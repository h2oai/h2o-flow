(function(){var t,n,e,i,r,o,u,a,c,s,l,f,h,d,p,v,g,m,w,b,y,k,x,C,S,q,N,W,T,O,E,Y,X,I,M,z,A,P,F,j,L,R,B,V,D,H,G,U,K,J,Q,Z,tt,nt,et,it,rt,ot,ut,at,ct,st,lt,ft,ht,dt,pt,vt,gt,mt,wt,bt,yt,_t,kt,xt,Ct,St,qt,Nt,Wt,Tt,Ot,Et,Yt,Xt,It,Mt,zt,At,Pt,Ft,jt,Lt,Rt,Bt,Vt,Dt,Ht,$t,Gt,Ut,Kt,Jt,Qt,Zt,tn,nn,en,rn,on,un,an,cn,sn,ln,fn,hn,dn,pn,vn,gn,mn,wn,bn,yn,_n,kn,xn,Cn,Sn,qn,Nn,Wn,Tn,On,En,Yn,Xn,In,Mn,zn,An,Pn,Fn,jn,Ln,Rn,Bn,Vn,Dn,Hn,$n,Gn,Un,Kn,Jn,Qn,Zn,te,ne,ee,ie,re,oe,ue,ae,ce,se,le,fe,he,de,pe,ve,ge,me,we,be,ye,_e,ke,xe,Ce,Se,qe,Ne,We,Te,Oe,Ee,Ye,Xe,Ie,Me,ze,Ae,Pe,Fe,je,Le,Re,Be,Ve,De,He,$e,Ge,Ue,Ke,Je,Qe,Ze,ti,ni,ei,ii,ri,oi,ui,ai,ci,si,li,fi,hi,di,pi,vi,gi,mi,wi,bi,yi,_i,ki,xi,Ci,Si,qi,Ni,Wi,Ti,Oi,Ei,Yi,Xi,Ii,Mi,zi,Ai,Pi,Fi,ji,Li,Ri,Bi,Vi,Di,Hi,$i,Gi,Ui,Ki,Ji,Qi,Zi,tr,nr,er,ir,rr,or,ur,ar,cr,sr,lr,fr,hr,dr,pr,vr,gr,mr,wr,br,yr,_r,kr,xr,Cr,Sr,qr,Nr,Wr,Tr,Or,Er,Yr,Xr,Ir,Mr,zr,Ar,Pr,Fr,jr,Lr,Rr,Br,Vr,Dr,Hr,$r,Gr,Ur,Kr,Jr,Qr,Zr,to,no,eo,io,ro,oo,uo,ao,co,so,lo,fo,ho,po,vo,go,mo,wo,bo,yo,_o,ko,xo,Co,So,qo,No,Wo,To,Oo,Eo,Yo,Xo,Io,Mo,zo,Ao,Po,Fo,jo,Lo,Ro,Bo,Vo,Do,Ho,$o,Go,Uo,Ko,Jo,Qo,Zo,tu,nu,eu,iu,ru,ou,uu,au,cu,su,lu,fu,hu,du,pu=[].slice,vu=function(t,n){function e(){this.constructor=t}for(var i in n)gu.call(n,i)&&(t[i]=n[i]);return e.prototype=n.prototype,t.prototype=new e,t.__super__=n.prototype,t},gu={}.hasOwnProperty;hu=Math.PI,du=2*hu,rt=hu/2,fu=1e-6,jt=hu/180,On=Math.tan(30*jt),pn=Math.sqrt(3),x=16581375,In="transparent",xt="&middot;",Tn="undefined",Cn="null",yn="Boolean",Wn="String",Sn="Number",xn="Function",qn="Object",bn="Array",wn="Arguments",_n="Date",Nn="RegExp",kn="Error",su=function(t){var n;if(n=Object.prototype.toString.call(t),null===t)return Cn;if(void 0===t)return Tn;if(!0===t||!1===t||"[object Boolean]"===n)return yn;switch(n){case"[object String]":return Wn;case"[object Number]":return Sn;case"[object Function]":return xn;case"[object Object]":return qn;case"[object Array]":return bn;case"[object Arguments]":return wn;case"[object Date]":return _n;case"[object RegExp]":return Nn;case"[object Error]":return kn;default:return n}},kt=function(){function t(t,n){this.match=t,this.func=n}return t}(),_i=function(){var t,n;return t=function(n){var e;switch(su(n)){case Tn:return function(t){return void 0===t};case Cn:return function(t){return null===t};case yn:return function(t){return n===Boolean||t===n};case Wn:return function(t){return n===String||t===n};case Sn:return function(t){return n===Number||t===n||_.isNaN(t)&&_.isNaN(n)};case Nn:return function(){return n===RegExp};case Error:return function(){return n===Error};case _n:return function(t){return n===Date||t===n};case bn:return 1===n.length&&xn===su(n[0])?(e=t(n[0]),function(t){var n,i,r;if(bn!==su(t))return!1;for(n=0,i=t.length;n<i;n++)if(r=t[n],!e(r))return!1;return!0}):function(t){return n===Array||fe(n,t)};case xn:return function(t){var e;return t instanceof n||(!(!t||t.constructor!==n)||(e=su(t),n===Boolean&&e===yn||n===String&&e===Wn||n===Number&&e===Sn))};case qn:return function(t){var e,i;for(e in n)if(i=n[e],t[e]!==i)return!1;return!0};default:return function(){return!1}}},n=function(n){var e;return e=_.map(n,t),function(t){var n,i,r;if(0===t.length)return!1;if(t.length!==e.length)return!1;for(n=i=0,r=e.length;i<r;n=++i)if(!(0,e[n])(t[n]))return!1;return!0}},function(){var t,e;return t=1<=arguments.length?pu.call(arguments,0):[],e=_.map(t,function(t){var e,i,r;return r=2<=t.length?pu.call(t,0,i=t.length-1):(i=0,[]),e=t[i++],new kt(n(r),e)}),function(){var t,n,i,r;for(t=1<=arguments.length?pu.call(arguments,0):[],n=0,i=e.length;n<i;n++)if(r=e[n],r.match(t))return r.func.apply(null,t);throw new Error("Pattern match failure for args [ "+_.map(t,function(t){return t+":"+su(t)}).join(", ")+" ]")}}}(),le=function(t,n){return new(t.bind.apply(t,[null].concat(n)))},m=function(){function t(t,n){this.put=t,this.test=n}return t}(),_t=function(){function t(t,n){this.put=t,this.test=n}return t}(),sn=function(){function t(t,n){this.width=t,this.height=n}return t}(),Bt=function(){function t(t,n,e,i){this.left=t,this.top=n,this.width=e,this.height=i}return t}(),Gn=function(){function t(t,n,e,i,r,o,u){this.name=t,this.label=n,this.type=e,this.at=i,this.count=r,this.domain=o,this.format=u}return t}(),K=function(t){function n(t,e,i,r,o,u,a,c){this.valueAt=o,n.__super__.constructor.call(this,t,e,i,r,u,a,c)}return vu(n,t),n}(Gn),gt=function(t){function n(t,e,i,r,o,u){n.__super__.constructor.call(this,t,e,qn,i,r,o,u)}return vu(n,t),n}(Gn),function(){function t(){}}(),nt=function(){function t(t,n,e,i,r,o,u,a,c){this.label=t,this.vectors=n,this.schema=e,this.indices=i,this.cube=r,this.at=o,this.evaluate=u,this.attach=a,this.metadata=c}return t}(),Mn=function(){function t(t){this.value=t}return t}(),Ct=function(t){function n(t){n.__super__.constructor.call(this,t)}return vu(n,t),n}(Mn),vn=function(t){function n(t){n.__super__.constructor.call(this,t)}return vu(n,t),n}(Mn),j=function(t){function n(t){n.__super__.constructor.call(this,t)}return vu(n,t),n}(Mn),a=function(t){function n(t){n.__super__.constructor.call(this,t)}return vu(n,t),n}(Mn),Q=function(){function t(t){this.name=t}return t}(),mt=function(t){function n(t){this.evaluate=t}return vu(n,t),n}(Q),Dt=function(t){function n(t){this.evaluate=t}return vu(n,t),n}(Q),function(){function t(t,n){this.color=t,this.opacity=n}}(),function(){function t(t,n,e){this.color=t,this.opacity=n,this.size=e}}(),nn=function(){function t(t){this.fields=t}return t}(),Rt=function(){function t(t){this.index=t}return t}(),yt=function(){function t(){}return t}(),Yt=function(t){function n(t,n,e,i,r,o,u,a,c){this.position=t,this.shape=n,this.size=e,this.fillColor=i,this.fillOpacity=r,this.strokeColor=o,this.strokeOpacity=u,this.lineWidth=a,this.tooltip=c}return vu(n,t),n}(yt),Nt=function(t){function n(t,n,e,i,r){this.position=t,this.strokeColor=n,this.strokeOpacity=e,this.lineWidth=i,this.tooltip=r}return vu(n,t),n}(yt),$t=function(t){function n(t,n,e,i,r){this.position=t,this.strokeColor=n,this.strokeOpacity=e,this.lineWidth=i,this.tooltip=r}return vu(n,t),n}(yt),Vt=function(t){function n(t,n,e,i,r,o,u,a,c){this.position=t,this.width=n,this.height=e,this.fillColor=i,this.fillOpacity=r,this.strokeColor=o,this.strokeOpacity=u,this.lineWidth=a,this.tooltip=c}return vu(n,t),n}(yt),e=function(){function t(){}return t}(),dt=function(t){function n(t,n,e,i){this.position=t,this.strokeColor=n,this.strokeOpacity=e,this.lineWidth=i}return vu(n,t),n}(e),n=function(){function t(){}return t}(),ht=function(t){function n(t,n,e,i,r){this.slope=t,this.intercept=n,this.strokeColor=e,this.strokeOpacity=i,this.lineWidth=r,this.render=Ho}return vu(n,t),n}(n),bt=function(){function t(){}return t}(),It=function(t){function n(t,n,e,i,r,o,u,a,c,s,l){this.space=t,this.positionX=n,this.positionY=e,this.shape=i,this.size=r,this.fillColor=o,this.fillOpacity=u,this.strokeColor=a,this.strokeOpacity=c,this.lineWidth=s,this.tooltip=l,this.geometry=Xt}return vu(n,t),n}(bt),Kt=function(t){function n(t,n,e,i,r,o,u,a,c,s,l,f){this.space=t,this.q0=n,this.q1=e,this.q2=i,this.q3=r,this.qn=o,this.positionY=u,this.height=a,this.strokeColor=c,this.strokeOpacity=s,this.lineWidth=l,this.tooltip=f,this.geometry=Ut}return vu(n,t),n}(bt),Zt=function(t){function n(t,n,e,i,r,o,u,a,c,s,l,f){this.space=t,this.positionX=n,this.q0=e,this.q1=i,this.q2=r,this.q3=o,this.qn=u,this.width=a,this.strokeColor=c,this.strokeOpacity=s,this.lineWidth=l,this.tooltip=f,this.geometry=Qt}return vu(n,t),n}(bt),y=function(t){function n(t,n,e,i,r,o,u,a,c,s,l){this.space=t,this.positionX=n,this.positionY1=e,this.positionY2=i,this.width=r,this.fillColor=o,this.fillOpacity=u,this.strokeColor=a,this.strokeOpacity=c,this.lineWidth=s,this.tooltip=l,this.geometry=b}return vu(n,t),n}(bt),u=function(t){function n(t,n,e,i,r,u,a,c,s,l,f){this.space=t,this.positionX1=n,this.positionX2=e,this.positionY=i,this.height=r,this.fillColor=u,this.fillOpacity=a,this.strokeColor=c,this.strokeOpacity=s,this.lineWidth=l,this.tooltip=f,this.geometry=o}return vu(n,t),n}(bt),Tt=function(t){function n(t,n,e,i,r,o,u){this.space=t,this.positionX=n,this.positionY=e,this.strokeColor=i,this.strokeOpacity=r,this.lineWidth=o,this.tooltip=u,this.geometry=Wt}return vu(n,t),n}(bt),G=function(){function t(){}return t}(),Et=function(t){function n(t,n,e,i,r,o,u,a,c,s,l,f){this.positionX=t,this.positionY=n,this.shape=e,this.size=i,this.fill=r,this.fillColor=o,this.fillOpacity=u,this.stroke=a,this.strokeColor=c,this.strokeOpacity=s,this.lineWidth=l,this.tooltip=f}return vu(n,t),n}(G),Gt=function(t){function n(t,n,e,i,r,o,u,a,c,s,l,f){this.q0=t,this.q1=n,this.q2=e,this.q3=i,this.qn=r,this.positionY=o,this.height=u,this.stroke=a,this.strokeColor=c,this.strokeOpacity=s,this.lineWidth=l,this.tooltip=f}return vu(n,t),n}(G),Jt=function(t){function n(t,n,e,i,r,o,u,a,c,s,l,f){this.positionX=t,this.q0=n,this.q1=e,this.q2=i,this.q3=r,this.qn=o,this.width=u,this.stroke=a,this.strokeColor=c,this.strokeOpacity=s,this.lineWidth=l,this.tooltip=f}return vu(n,t),n}(G),w=function(t){function n(t,n,e,i,r,o,u,a,c,s,l,f){this.positionX=t,this.positionY1=n,this.positionY2=e,this.width=i,this.fill=r,this.fillColor=o,this.fillOpacity=u,this.stroke=a,this.strokeColor=c,this.strokeOpacity=s,this.lineWidth=l,this.tooltip=f}return vu(n,t),n}(G),r=function(t){function n(t,n,e,i,r,o,u,a,c,s,l,f){this.positionX1=t,this.positionX2=n,this.positionY=e,this.height=i,this.fill=r,this.fillColor=o,this.fillOpacity=u,this.stroke=a,this.strokeColor=c,this.strokeOpacity=s,this.lineWidth=l,this.tooltip=f}return vu(n,t),n}(G),qt=function(t){function n(t,n,e,i,r,o,u){this.positionX=t,this.positionY=n,this.stroke=e,this.strokeColor=i,this.strokeOpacity=r,this.lineWidth=o,this.tooltip=u}return vu(n,t),n}(G),dn=function(){function t(t,n){this.x=t,this.y=n}return t}(),hn=function(){function t(t,n,e){this.type=t,this.vectors=n,this.domain=e}return t}(),i=function(){function t(){}return t}(),f=function(t){function n(t,n,e,i,r,o,u){this.type=t,this.label=n,this.scale=e,this.domain=i,this.range=r,this.rect=o,this.guide=u}return vu(n,t),n}(i),At=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return vu(n,t),n}(i),vt=function(t){function n(t,n,e,i,r,o,u){this.type=t,this.label=n,this.scale=e,this.domain=i,this.range=r,this.rect=o,this.guide=u}return vu(n,t),n}(At),En=function(){function t(t,n){this.value=t,this.label=n}return t}(),H=function(){function t(t,n){this.label=t,this.encode=n}return t}(),N=function(t){function n(t){this.value=t,n.__super__.constructor.call(this,"Constant",se(this.value))}return vu(n,t),n}(H),An=function(t){function n(t,e,i){this.vector=i,n.__super__.constructor.call(this,t,e)}return vu(n,t),n}(H),Xn=function(t){function n(t){this.vectors=t,n.__super__.constructor.call(this,"tooltips")}return vu(n,t),n}(H),zt=function(t){function n(t,e,i,r,o,u){this.domain=r,this.range=o,this.guide=u,n.__super__.constructor.call(this,t,e,i)}return vu(n,t),n}(An),k=function(t){function n(t,e,i,r,o,u){this.domain=r,this.range=o,this.guide=u,n.__super__.constructor.call(this,t,e,i)}return vu(n,t),n}(An),St=function(t){function n(t,e,i,r,o,u){this.domain=r,this.range=o,this.guide=u,n.__super__.constructor.call(this,t,e,i)}return vu(n,t),n}(An),fn=function(t){function n(t,e,i,r,o,u){this.domain=r,this.range=o,this.guide=u,n.__super__.constructor.call(this,t,e,i)}return vu(n,t),n}(An),un=function(t){function n(t,e,i,r,o,u){this.domain=r,this.range=o,this.guide=u,n.__super__.constructor.call(this,t,e,i)}return vu(n,t),n}(An),g=function(){function t(){}return t}(),function(t){function n(){return n.__super__.constructor.apply(this,arguments)}vu(n,t)}(g),A=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return vu(n,t),n}(g),Mt=function(t){function n(t){this.coordinates=t}return vu(n,t),n}(g),Z=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return vu(n,t),n}(g),tt=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return vu(n,t),n}(g),gn=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return vu(n,t),n}(g),mn=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return vu(n,t),n}(g),ln=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return vu(n,t),n}(g),Qn=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return vu(n,t),n}(g),at=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return vu(n,t),n}(g),pt=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return vu(n,t),n}(g),on=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return vu(n,t),n}(g),Yn=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return vu(n,t),n}(g),q=function(t){function n(t){this.value=t}return vu(n,t),n}(A),zn=function(t){function n(t){this.field=t}return vu(n,t),n}(A),W=function(t){function n(t){this.value=t}return vu(n,t),n}(Z),Pn=function(t){function n(t,n){this.field=t,this.range=n}return vu(n,t),n}(Z),T=function(t){function n(t){this.value=t}return vu(n,t),n}(tt),Fn=function(t){function n(t,n){this.field=t,this.range=n}return vu(n,t),n}(tt),I=function(t){function n(t){this.value=t}return vu(n,t),n}(gn),Vn=function(t){function n(t,n){this.field=t,this.range=n}return vu(n,t),n}(gn),M=function(t){function n(t){this.value=t}return vu(n,t),n}(mn),Dn=function(t){function n(t,n){this.field=t,this.range=n}return vu(n,t),n}(mn),X=function(t){function n(t){this.value=t}return vu(n,t),n}(ln),Bn=function(t){function n(t,n){this.field=t,this.range=n}return vu(n,t),n}(ln),z=function(t){function n(t){this.value=t}return vu(n,t),n}(Qn),$n=function(t){function n(t,n){this.field=t,this.range=n}return vu(n,t),n}(Qn),O=function(t){function n(t){this.value=t}return vu(n,t),n}(at),jn=function(t){function n(t,n){this.field=t,this.range=n}return vu(n,t),n}(at),E=function(t){function n(t){this.value=t}return vu(n,t),n}(pt),Ln=function(t){function n(t,n){this.field=t,this.range=n}return vu(n,t),n}(pt),Y=function(t){function n(t){this.value=t}return vu(n,t),n}(on),Rn=function(t){function n(t,n){this.field=t,this.range=n}return vu(n,t),n}(on),Hn=function(t){function n(t){this.fields=t}return vu(n,t),n}(Yn),U=function(){function t(t,n){this.min=t,this.max=n}return t}(),V=function(){function t(t,n){this.min=t,this.max=n}return t}(),D=function(){function t(t,n){this.min=t,this.max=n}return t}(),Lt=function(){function t(){}return t}(),h=function(t){function n(t){this.values=t}return vu(n,t),n}(Lt),Pt=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return vu(n,t),n}(Lt),rn=function(t){function n(t,n){this.min=t,this.max=n}return vu(n,t),n}(Pt),B=function(t){function n(t,n,e){this.min=t,this.mid=n,this.max=e}return vu(n,t),n}(Pt),S=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return vu(n,t),n}(Lt),en=function(t){function n(t,n){this.min=t,this.max=n}return vu(n,t),n}(S),R=function(t){function n(t,n,e){this.min=t,this.mid=n,this.max=e}return vu(n,t),n}(S),et=function(){function t(t,n,e,i,r){this.encode=t,this.mask=n,this.highlight=e,this.render=i,this.select=r}return t}(),F=function(){function t(t){this.read=t}return t}(),l=function(){function t(t,n,e,i){this.element=t,this.context=n,this.bounds=e,this.ratio=i}return t}(),Un=function(){function t(t,n,e,i,r,o,u,a,c,s,l){this.box=t,this.container=n,this.baseCanvas=e,this.highlightCanvas=i,this.hoverCanvas=r,this.maskCanvas=o,this.clipCanvas=u,this.marquee=a,this.tooltip=c,this.mask=s,this.clip=l}return t}(),st=function(){function t(t,n,e,i,r,o){this.encodings=t,this.encoders=n,this.mask=e,this.highlight=i,this.render=r,this.select=o}return t}(),Kn=function(){function t(t,n,e,i,r,o,u,a){this.viewport=t,this.frame=n,this.test=e,this.highlight=i,this.hover=r,this.selectAt=o,this.selectWithin=u,this.render=a}return t}(),Ot=function(){function t(t,n,e,i){this.element=t,this.subscribe=n,this.unsubscribe=e,this.highlight=i}return t}(),c=function(){function t(t,n){this.width=t,this.height=n}return t}(),Ht=function(){function t(t,n,e,i,r){this.center=t,this.left=n,this.top=e,this.right=i,this.bottom=r}return t}(),wt=function(){function t(t,n,e,i){this.left=t,this.top=n,this.right=e,this.bottom=i}return t}(),s=function(){function t(t,n,e){var i;this.width=t,this.height=n,this.margin=e,this.regions=new Ht(i=new Bt(e.left,e.top,t-e.left-e.right,n-e.top-e.bottom),new Bt(0,e.top,e.left,i.height),new Bt(e.left+i.width,e.top,e.right,i.height),new Bt(e.left,0,i.width,e.top),new Bt(e.left,e.top+i.height,i.width,e.bottom))}return t}(),Ft=function(){function t(t,n,e,i){this.where=t,this.limit=n,this.group=e,this.having=i}return t}(),d=function(){function t(t,n){this.key=t,this.value=n}return t}(),t=new d(0,"All"),P=function(){function t(t,n,e,i){this.frame=t,this.hierarchy=n,this.cells=e,this.dimension=i}return t}(),lt=function(){function t(t,n,e){this.category=t,this.indices=n,this.children=e}return t}(),p=function(){function t(t,n){this.levels=t,this.indices=n}return t}(),J=function(){function t(t,n,e,i,r){this.at=t,this.valueAt=n,this.count=e,this.domain=i,this.format=r}return t}(),it=function(){function t(t){this.fields=t}return t}(),Jn=function(){function t(t,n){this.fields=t,this.predicate=n}return t}(),ft=function(){function t(t,n){this.offset=t,this.length=n}return t}(),ot=function(){function t(t,n){this.fields=t,this.predicate=n}return t}(),ct=function(){function t(t,n){this.frame=t,this.index=n}return t}(),tn=function(){function t(t,n){this.frame=t,this.indices=n}return t}(),L=function(){function t(t){this.frame=t}return t}(),function(){function t(t){this.vector=t}}(),ut=function(){function t(t){this.vector=t}return t}(),function(){function t(t){this.index=t}}(),v=function(){function t(t,n){this.vector=t,this.index=n}return t}(),pe=function(t){var n;return n=parseFloat(t),_.isNaN(n)?void 0:n},de=function(t){var n;return n=parseInt(t,10),_.isNaN(n)?void 0:n},he=function(t){return null!=t?t:void 0},au=function(t){return t*t},be=function(t,n){return function(e){return e<t?t:e>n?n:e}},we=be(0,1),yi=8,Ye=function(t){return t.slice(0)},fr=function(t,n){var e,i,r,o,u,a,c,s;for(s=[],e=0,i=t.length;e<i;e++)for(a=t[e],u=n(a),o=0,r=u.length;o<r;o++)c=u[o],s.push(c);return s},se=function(t){return function(){return t}},fe=function(t,n){var e,i,r;if(t&&n&&t.length===n.length){for(e=i=0,r=t.length;i<r;e=++i)if(t[e]!==n[e])return!1;return!0}return!1},ur=function(){var t,n,e,i,r,o,u,a,c;for(n=arguments[0],c=2<=arguments.length?pu.call(arguments,1):[],e=[],i=0,r=n.length;i<r;i++)for(t=n[i],u=0,o=c.length;u<o;u++)a=c[u],t instanceof a&&e.push(t);return e},sr=function(){var t,n,e,i,r,o,u,a;for(n=arguments[0],a=2<=arguments.length?pu.call(arguments,1):[],e=0,i=n.length;e<i;e++)for(t=n[e],o=0,r=a.length;o<r;o++)if(u=a[o],t instanceof u)return t},lr=function(t,n){var e,i,r,o;for(r=[],e=0,i=n.length;e<i;e++)o=n[e],r.push(sr(t,o));return r},We=function(t){var n,e,i,r,o;for(r=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,n=0,e=t.length;n<e;n++)void 0!==(o=t[n])&&(o<=r&&(r=o),o>=i&&(i=o));return new U(r,i)},Te=function(t,n){var e,i,r,o,u,a;for(o=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,e=i=0,u=t;0<=u?i<u:i>u;e=0<=u?++i:--i)void 0!==(a=n(e))&&(a<=o&&(o=a),a>=r&&(r=a));return new U(o,r)},Ee=function(t){return function(n){return n.min>=t&&n.max>t?1:n.min<t&&n.max<=t?-1:0}},Oe=Ee(0),Se=function(t,n){return new U(Math.min(t.min,n.min),Math.max(t.max,n.max))},yr=function(t){return function(n){return n.min>t&&n.max>t?new U(t,n.max):n.min<t&&n.max<t?new U(n.min,t):n}},br=yr(0),Oi=function(t,n,e){return $.ajax({dataType:t,url:n,success:function(t,n,i){return e(null,t)},error:function(t,n,i){return e(i)}})},ni=function(t,n,e){var i,r,o;return r=function(){return n.length},i=function(t){return n[t]},o=e?function(t){return e(n[t],t)}:i,new gt(t,t,i,r,n,o)},mi=function(t,n,e,i){return ee(t,t,n,e,i)},ee=function(t,n,e,i,r){var o,u,a,c;return a=We(i),u=function(){return i.length},o=function(t){return i[t]},c=r?function(t){return r(i[t],t)}:o,new Gn(t,n,e,o,u,a,c)},Qe=function(t,n,e,i,r,o){var u,a;return u=Te(i,r),a=o?function(t){return o(r(t),t)}:r,new Gn(t,n,e,r,i,u,a)},or=function(t,n,e,i){var r,o,u,a,c,s,l,f,h,p,v,g,m,w;for(o=0,r={},v=n(),c=new Array(v),s=function(){var t,n,i;for(i=[],t=0,n=e.length;t<n;t++)m=e[t],i.push(r[m]=new d(o++,m));return i}(),h=p=0,g=v;0<=g?p<g:p>g;h=0<=g?++p:--p)l=t(h),m=void 0!==l?l:"?",(a=r[m])||s.push(r[m]=a=new d(o++,m)),c[h]=a;return u=function(t){return c[t]},w=function(t){return c[t].value},f=i?function(t){return i(c[t].value)}:function(t){return void 0!==(m=c[t].value)?_.escape(m):m},new J(u,w,n,s,f)},Ge=function(t,n,e,i,r){var o,u,a;return u=function(){return e.length},o=function(t){return e[t]},a=or(o,u,i||[],r),new K(t,t,n,a.at,a.valueAt,u,a.domain,a.format)},Ie=function(t,n){var e,i,r,o,u,a;return r="All",i=new d(0,r),a=function(t){return r},e=function(){return i},o=function(){return n},u=function(){return r},new K(t,t,Wn,e,a,o,[i],u)},Je=function(t,n,e,i,r){var o,u;return u=_.keyBy(n,function(t){return t.name}),o=new nt(t,n,u,e,i,null,null,null,r||{}),o.evaluate=function(n){var e,r,a,c;return r=_.isArray(n)?n:[n],a=function(){var a,s,l;for(l=[],a=0,s=r.length;a<s;a++)if((e=r[a])instanceof mt)l.push(o.evaluate(e.evaluate(o)));else if(e instanceof Dt){if(!i)throw new Error("Cannot compute aggregate ["+e.name+"] on an unaggregated frame.");l.push(o.evaluate(e.evaluate(o,i)))}else{if(!(e instanceof Q))throw new Error("Cannot evaluate ["+n+"] on frame ["+t+"].");if(!(c=u[e.name]))throw new Error("Vector ["+e.name+"] does not exist in frame ["+t+"].");l.push(c)}return l}(),_.flatten(a)},o.attach=function(e){if(u[e.name])throw new Error("Cannot attach vector ["+e.name+"]: a vector by that name already exists in frame ["+t+"]");return n.push(e),u[e.name]=e,e},o.exists=function(t){return!!u[t]},o},ci=function(t){return new Ft(ur(t,Jn),ur(t,ft),ur(t,it),ur(t,ot))},Ke=function(t){return _.map(t,function(t){return new Q(t)})},Ue=function(t){return new mt(function(n){var e,i,r,o,u,a,c,s,l;if((l=_.head(n.evaluate(t)))instanceof K)return t;for(a=l.count(),e=l.at,r=new Array(a),o=u=0,c=a;0<=c?u<c:u>c;o=0<=c?++u:--u)void 0!==(s=e(o))&&(r[o]=""+s);return n.attach(i=Ge("factor("+l.label+")",Wn,r)),[new Q(i.name)]})},Me=function(t){return new mt(function(n){return n.attach(Ie(t,n.indices.length)),[new Q(t)]})};$r=_i([String,function(t){return $r(new Q(t))}],[Q,function(t){return Ue(t)}],[vn,function(t){var n;return n=t.value,Me(n)}]),pi=function(t,n){return new mt(function(e){var i,r,o,u,a,c,s,l,f,h,d,p,v,g,m,w,b,y,k,x,C,S,q,N,W;if((W=_.head(e.evaluate(t)))instanceof K)throw new Error("Cannot stack factor ["+W.label+"]: expecting vector.");for(g=W.count(),y=new Array(g),l=new Array(g),b="low("+W.name+", "+n+")",s="high("+W.name+", "+n+")",r=W.at,u=e.cube,n=Math.min(n,u.dimension),o=u.cells,w=c=0,i=new Array(n),C=e.indices,p=0,v=C.length;p<v;p++){for(f=C[p],m=o[f].levels,h=k=0,S=n;0<=S?k<S:k>S;h=0<=S?++k:--k)if(i[h]!==m[h].category){for(w=c=0,d=x=0,q=n;0<=q?x<q:x>q;d=0<=q?++x:--x)i[d]=m[d].category;break}N=r(f),N<0?(y[f]=w,l[f]=w+=N):(y[f]=c,l[f]=c+=N)}return a=function(t,n){return W.format(n)},e.attach(ee(b,W.name,W.type,y,a)),e.attach(ee(s,W.name,W.type,l,a)),[new Q(b),new Q(s)]})},xo=_i([String,Number,function(t,n){return xo(new Q(t),n)}],[Q,Number,function(t,n){return pi(t,n)}]),Yo=function(t){var n;return n=be(0,t.length-1),function(e){return t[n(-1+Math.round(e*t.length))]}},re=function(t){var n,e,i,r,o;for(r=0,n=0,e=0,i=t.length;e<i;e++)void 0!==(o=t[e])&&(r+=o,n++);return r/n},oe=function(t){var n,e,i;for(n=0,e=0,i=t.length;e<i;e++)void 0!==t[e]&&n++;return n},ue=function(t){var n,e,i,r;for(i=Number.NEGATIVE_INFINITY,n=0,e=t.length;n<e;n++)void 0!==(r=t[n])&&r>=i&&(i=r);return i},ae=function(t){var n,e,i,r;for(i=Number.POSITIVE_INFINITY,n=0,e=t.length;n<e;n++)void 0!==(r=t[n])&&r<=i&&(i=r);return i},ce=function(t){var n,e,i,r;for(i=0,n=0,e=t.length;n<e;n++)void 0!==(r=t[n])&&(i+=r);return i},Xe=function(t,n,e,i,r){return new Dt(function(o,u){var a,c,s,l,f,h,d,p,v,g,m,w,b,y,k,x;if(m=n+"("+t.name+")",o.exists(m))return new Q(m);for(x=_.head(u.frame.evaluate(t)),a=x.at,l=new Array(u.cells.length),w=u.cells,h=d=0,p=w.length;d<p;h=++d){for(c=w[h],k=[],b=c.indices,g=0,v=b.length;g<v;g++)f=b[g],void 0!==(y=a(f))&&k.push(y);l[h]=r(k)}return o.attach(s=mi(m,e,l,i)),[new Q(s.name)]})},Pr=function(t,n,e,i){return _i([String,function(r){return Xe(new Q(r),t,n,e,i)}],[Q,function(r){return Xe(r,t,n,e,i)}])},Rr=Pr("count",Sn,_.identity,oe),Fr=Pr("avg",Sn,_.identity,re),co=Pr("max",Sn,_.identity,ue),so=Pr("min",Sn,_.identity,ae),qo=Pr("sum",Sn,_.identity,ce),Qr=function(){var t,n,e;return n=1<=arguments.length?pu.call(arguments,0):[],e=function(){var e,i,r;for(r=[],e=0,i=n.length;e<i;e++)if((t=n[e])instanceof Q)r.push(t);else{if(!_.isString(t))throw new Error("Cannot group by ["+t+"]");r.push(new Q(t))}return r}(),new it(e)},Ar=_i([[String],Function,function(t,n){return new Jn(Ke(t),n)}]),To=function(){var t,n,e;return e=2<=arguments.length?pu.call(arguments,0,n=arguments.length-1):(n=0,[]),t=arguments[n++],Ar(e,t)},ro=_i([Number,Number,function(t,n){return new ft(t,n)}],[Number,function(t){return new ft(0,t)}]),zr=_i([[String],Function,function(t,n){return new ot(Ke(t),n)}],[[Q],Function,function(t,n){return new ot(t,n)}]),to=function(){var t,n,e;return e=2<=arguments.length?pu.call(arguments,0,n=arguments.length-1):(n=0,[]),t=arguments[n++],zr(e,t)},Hr=function(t){return function(n){return n===t}},lo=function(t){return function(n){return n!==t}},ao=function(t){return function(n){return n<t}},Zr=function(t){return function(n){return n>t}},eo=function(t){return function(n){return n<=t}},Jr=function(t){return function(n){return n>=t}},io=function(t){if(Nn!==su(t))throw new Error("like ["+t+"]: expecting RegExp");return function(n){return t.test(n)}},Xo=function(n,e){var i,r,o,u,a,c,s,l,f,h,d;return s=e.where.length?Je(n.label,n.vectors,cr(n,e.where)):n,h=e.group.length?(c=fr(e.group,function(t){return t.fields}),u=function(){var t,n,e;for(e=[],t=0,n=c.length;t<n;t++){if(a=c[t],!((d=_.head(s.evaluate(a)))instanceof K))throw new Error("Cannot group by ["+a.name+"]: not a Factor.");e.push(d)}return e}(),l={0:new lt(t,s.indices,{})},ve(l,u,0),r=[],ke(l[0].children,c.length-1,r,0,new Array(c.length)),o=new P(s,l,r,c.length),i=ie(s.label+"'",o,u),e.having.length?Je(i.label,i.vectors,cr(i,e.having),i.cube):i):s,e.limit.length?(f=e.limit[e.limit.length-1],Je(h.label,h.vectors,h.indices.slice(f.offset,f.offset+f.length))):h},cr=function(t,n){var e,i,r,o,u,a,c,s,l,f,h,d,p,v,g,m;for(e=t.indices,l=0,f=n.length;l<f;l++){for(g=n[l],c=[],m=function(){var n,e,i,r;for(i=g.fields,r=[],e=0,n=i.length;e<n;e++)u=i[e],r.push(_.head(t.evaluate(u)));return r}(),o=_.map(m,function(t){return t instanceof K?t.valueAt:t.at}),p=0,h=e.length;p<h;p++){for(a=e[p],i=new Array(m.length),s=v=0,d=o.length;v<d;s=++v)r=o[s],i[s]=r(a);g.predicate.apply(null,i)&&c.push(a)}e=c}return e},ie=function(t,n,e){var i,r,o;return i=_.range(n.cells.length),o=function(){var t,i,o;for(o=[],r=t=0,i=n.dimension;0<=i?t<i:t>i;r=0<=i?++t:--t)o.push(rr(n,e[r],r));return o}(),Je(t,o,i,n)},ve=function(t,n,e){var i,r,o,u,a,c,s,l,f,h;i=n[e].at;for(c in t){for(f=t[c],u=f.children,h=f.indices,s=0,l=h.length;s<l;s++)a=h[s],r=i(a),(o=u[r.key])||(u[r.key]=o=new lt(r,[],{})),o.indices.push(a);e<n.length-1&&ve(u,n,e+1)}},ke=function(t,n,e,i,r){var o,u;for(o in t)u=t[o],r[i]=u,i===n?e.push(new p(Ye(r),u.indices)):ke(u.children,n,e,i+1,r)},rr=function(t,n,e){var i,r,o,u,a,c,s,l,f,h,d,p,v;for(a=new Array(t.cells.length),c={},s=[],p=t.cells,f=h=0,d=p.length;h<d;f=++h)o=p[f],a[f]=r=o.levels[e].category,c[r.value]||(c[r.value]=r,s.push(r));return i=function(t){return a[t]},v=function(t){return a[t].value},l=function(t){return a[t].value},u=function(){return a.length},new K(n.label,n.label,n.type,i,v,u,s,l)},C={c10:["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],c20:["#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"],c20b:["#393b79","#5254a3","#6b6ecf","#9c9ede","#637939","#8ca252","#b5cf6b","#cedb9c","#8c6d31","#bd9e39","#e7ba52","#e7cb94","#843c39","#ad494a","#d6616b","#e7969c","#7b4173","#a55194","#ce6dbd","#de9ed6"],c20c:["#3182bd","#6baed6","#9ecae1","#c6dbef","#e6550d","#fd8d3c","#fdae6b","#fdd0a2","#31a354","#74c476","#a1d99b","#c7e9c0","#756bb1","#9e9ac8","#bcbddc","#dadaeb","#636363","#969696","#bdbdbd","#d9d9d9"]},Xr=function(t){return t>10?C.c20:C.c10},_e=function(t){var n,e,i,r;return r=t.rgb(),i=r[0],e=r[1],n=r[2],chroma.rgb(i,e,n)},Ce=function(t,n){return 0<=n&&n<1?_e(t).alpha(n).css():t.css()},Ei=function(t,n,e,i){var r;return r=Math.sqrt(i/hu),t.beginPath(),t.arc(n,e,r,0,du,!1),t.closePath()},Ii=function(t,n,e,i){var r;return r=.5*Math.sqrt(i),t.save(),t.translate(n,e),t.beginPath(),t.moveTo(r,r),t.lineTo(-r,r),t.lineTo(-r,-r),t.lineTo(r,-r),t.closePath(),t.restore()},Yi=function(t,n,e,i){var r,o;return r=.5*Math.sqrt(i/5),o=3*r,t.save(),t.translate(n,e),t.beginPath(),t.moveTo(o,r),t.lineTo(r,r),t.lineTo(r,o),t.lineTo(-r,o),t.lineTo(-r,r),t.lineTo(-o,r),t.lineTo(-o,-r),t.lineTo(-r,-r),t.lineTo(-r,-o),t.lineTo(r,-o),t.lineTo(r,-r),t.lineTo(o,-r),t.closePath(),t.restore()},Xi=function(t,n,e,i){var r,o;return o=Math.sqrt(i/(2*On)),r=o*On,t.save(),t.translate(n,e),t.beginPath(),t.moveTo(r,0),t.lineTo(0,o),t.lineTo(-r,0),t.lineTo(0,-o),t.closePath(),t.restore()},Pi=function(t,n,e,i){var r,o;return r=Math.sqrt(i/pn),o=r*pn/2,t.save(),t.translate(n,e),t.beginPath(),t.moveTo(0,-o),t.lineTo(r,o),t.lineTo(-r,o),t.closePath(),t.restore()},Mi=function(t,n,e,i){var r,o;return r=Math.sqrt(i/pn),o=r*pn/2,t.save(),t.translate(n,e),t.beginPath(),t.moveTo(0,o),t.lineTo(r,-o),t.lineTo(-r,-o),t.closePath(),t.restore()},Ai=function(t,n,e,i){var r,o;return o=Math.sqrt(i/pn),r=o*pn/2,t.save(),t.translate(n,e),t.beginPath(),t.moveTo(r,0),t.lineTo(-r,o),t.lineTo(-r,-o),t.closePath(),t.restore()},zi=function(t,n,e,i){var r,o;return o=Math.sqrt(i/pn),r=o*pn/2,t.save(),t.translate(n,e),t.beginPath(),t.moveTo(-r,0),t.lineTo(r,-o),t.lineTo(r,o),t.closePath(),t.restore()},cn={circle:Ei,square:Ii,cross:Yi,diamond:Xi,triangleUp:Pi,triangleDown:Mi,triangleLeft:zi,triangleRight:Ai},an={c8:["circle","square","cross","diamond","triangleUp","triangleDown","triangleLeft","triangleRight"]},Ir=function(){return an.c8},nu=function(t){return function(n){return void 0!==n?t(n):void 0}},ri=function(t,n){var e;return e=d3.scaleLinear().domain([t.min,t.max]).range([n.min,n.max]).nice(),[nu(e),e.tickFormat,e.ticks]},oi=function(t,n){var e,i,r,o,u,a,c;for(i=0,e={},o=0,u=t.length;o<u;o++)r=t[o],e[r.key]=i++;return a=(n.max-n.min)/t.length/2,c=n.min,nu(function(t){return c+2*e[t.key]*a+a})},je=function(t,n){var e,i;return i=n.values,e=i.length,nu(function(t){return i[t.key%e]})},hi=function(t,n){return nu(d3.scaleLinear().domain([t.min,t.max]).range([n.min,n.max]))},De=function(t,n){return nu(d3.scaleLinear().domain([t.min,t.mid,t.max]).range([n.min,n.mid,n.max]))},fi=function(t,n){return nu(chroma.scale([n.min,n.max]).domain([t.min,t.max]).mode("lch"))},Ve=function(t,n){var e,i;return e=chroma.scale([n.min,n.mid]).domain([t.min,t.mid]).mode("lch"),i=chroma.scale([n.mid,n.max]).domain([t.mid,t.max]).mode("lch"),function(n){return void 0!==n?n<t.mid?e(n):i(n):void 0}},Re=_i([rn,S,fi],[B,S,Ve]),ti=_i([rn,rn,hi],[B,B,De]),ge=function(t){var n;return n=t.toString(16),1===n.length?"0"+n:n},Le=function(t){var n,e,i,r;return n=t.context,i=t.ratio,e=function(){return"#fff"},r=function(t,e){var r,o,u,a,c;return c=n.getImageData(t*i,e*i,1,1).data,a=c[0],u=c[1],o=c[2],r=c[3],255===a&&255===u&&255===o&&255===r},new m(e,r)},ii=function(t){var n,e,i,r,o,u;return e=t.context,o=t.ratio,n=0,i={},r=function(t){var e,r,o,u;return r=n++,
n>=x&&(n=0),i[r]=t,u=r>>16&255,o=r>>8&255,e=255&r,"#"+ge(u)+ge(o)+ge(e)},u=function(t,n){var r,u,a,c,s,l;return l=e.getImageData(t*o,n*o,1,1).data,s=l[0],c=l[1],u=l[2],r=l[3],255===r?(a=(s<<16)+(c<<8)+u,i[a]):void 0},new _t(r,u)},Ui=function(t,n){var e,i,r,o,u,a,c;return c=t.scale,i=t.domain,a=t.range,o=t.guide,u=n.label,e=n.at,r=function(t){return c(e(t))},new zt(u,r,n,i,a,o)},Bi=function(t,n){return new N(t.scale(n))},Ri=function(t,n){var e,i,r,o,u,a,c;return n instanceof Pn||n instanceof Vn?(c=_.head(t.evaluate(n.field)),c instanceof K?(n.range||(n.range=new h(Xr(c.domain.length))),u=je(c.domain,n.range),e=c.at,r=function(t){return chroma(u(e(t)))},new k(c.label,r,c,c.domain,n.range,null)):(i=function(){switch(Oe(c.domain)){case 1:case-1:return new rn(c.domain.min,c.domain.max);default:return new B(c.domain.min,0,c.domain.max)}}(),a=Oe(i),o=n.range?n.range instanceof R?i instanceof rn?1===a?new en(n.range.mid,n.range.max):new en(n.range.min,n.range.mid):n.range:(i instanceof B&&(i=new rn(i.min,i.max)),n.range):i instanceof rn?1===a?new en("#deebf7","#3182bd"):new en("#e6550d","#fee6ce"):new R("#fc8d59","#ffffbf"),u=Re(i,o),e=c.at,r=function(t){return u(e(t))},new k(c.label,r,c,i,o,null))):new N(n.value)},Hi=function(t,n){var e,i,r,o,u,a;if(n instanceof Fn||n instanceof Dn){if((a=_.head(t.evaluate(n.field)))instanceof K)throw new Error("Could not encode opacity. Vector ["+a.label+"] is a Factor.");return i=new rn(a.domain.min,a.domain.max),o=n.range?new rn(we(n.range.min),we(n.range.max)):n.range=new rn(.05,1),u=ti(i,o),e=a.at,r=function(t){return u(e(t))},new St(a.label,r,a,i,o,null)}return new N(we(n.value))},nr=function(t,n){var e,i;return t&&n?(e=t.encode,i=n.encode,new An("("+t.label+", "+n.label+")",function(t){return Ce(e(t),i(t))})):void 0},ir=function(t,n){return function(e,i,r){var o,u,a,c,s,l;if(i instanceof t){if((l=_.head(e.evaluate(i.field)))instanceof K)throw new Error("Could not encode size. Vector ["+l.label+"] is a Factor.");return u=new rn(l.domain.min,l.domain.max),c=i.range?new rn(we(i.range.min),we(i.range.max)):i.range=new rn(.05,1),s=ti(u,c),o=l.at,a=function(t){return r*s(o(t))},new n(l.label,a,u,c,null)}return new N(r*we(i.value))}},Zi=ir(Bn,fn),ir($n,fn),ir(jn,fn),Fi=function(t,n){var e,i,r,o,u,a;if(n instanceof Bn){if((a=_.head(t.evaluate(n.field)))instanceof K)throw new Error("Could not encode size. Vector ["+a.label+"] is a Factor.");return i=new rn(a.domain.min,a.domain.max),o=n.range?new rn(au(n.range.min),au(n.range.max)):n.range=new rn(au(yi),au(30)),u=ti(i,o),e=a.at,r=function(t){return u(e(t))},new fn(a.label,r,a,i,o,null)}return new N(au(n.value))},Di=function(t,n){var e,i,r,o,u,a;if(n instanceof Ln){if((a=_.head(t.evaluate(n.field)))instanceof K)throw new Error("Could not encode lineWidth. Vector ["+a.label+"] is a Factor.");return i=new rn(a.domain.min,a.domain.max),o=n.range?new rn(n.range.min,n.range.max):n.range=new rn(1.5,15),u=ti(i,o),e=a.at,r=function(t){return u(e(t))},new fn(a.label,r,a,i,o,null)}return new N(n.value)},Qi=function(t,n){var e,i,r,o;if(n instanceof Rn){if(!((o=_.head(t.evaluate(n.field)))instanceof K))throw new Error("Could not encode shape. Vector ["+o.label+"] is not a Factor.");return n.range||(n.range=new h(Ir(o.domain.length))),r=je(o.domain,n.range),e=o.at,i=function(t){return cn[r(e(t))]},new un(o.label,i,o,o.domain,n.range,null)}return new N(cn[n.value]||cn.circle)},er=function(t,n){var e,i;return n?(i=function(){var i,r,o,u;for(o=n.fields,u=[],i=0,r=o.length;i<r;i++)e=o[i],u.push(_.head(t.evaluate(e)));return u}(),new Xn(i)):void 0},_r=function(t,n){return[null!=t?t:new W(chroma(_.head(C.c10))),null!=n?n:new T(1)]},xr=function(t,n,e){return[null!=t?t:new I(chroma(_.head(C.c10))),null!=n?n:new M(1),null!=e?e:new E(1.5)]},kr=function(t,n,e,i,r,o,u){var a,c,s,l;return a=t||n,c=e||i||r,a||c||(o&&(a=!0),u&&(c=!0)),a&&(s=_r(t,n),t=s[0],n=s[1]),c&&(l=xr(e,i,r),e=l[0],i=l[1],r=l[2]),[t,n,e,i,r]},Vi=function(t,n){var e,i;return n.fillColor||n.fillOpacity?[e=Ri(t,n.fillColor),i=Hi(t,n.fillOpacity),nr(e,i)]:[]},tr=function(t,n){var e,i;return n.strokeColor||n.strokeOpacity||n.lineWidth?[e=Ri(t,n.strokeColor),i=Hi(t,n.strokeOpacity),nr(e,i),Di(t,n.lineWidth)]:[]},ye=function(t,n,e,i,r){return t.beginPath(),t.rect(n,e,i,r),t.clip()},Ti=function(t,n,e){return t.lineWidth=e,t.strokeStyle=n,t.stroke()},xi=function(t,n){return t.fillStyle=n,t.fill()},Ci=function(t,n,e,i,r){return t.beginPath(),t.moveTo(n,e),t.lineTo(i,r),t.stroke()},qi=function(t,n,e,i,r){return t.beginPath(),i>e?t.rect(n-r/2,e,r,i-e):t.rect(n-r/2,i,r,e-i),t.closePath()},Si=function(t,n,e,i,r){return t.beginPath(),e>n?t.rect(n,i-r/2,e-n,r):t.rect(e,i-r/2,n-e,r),t.closePath()},Ni=function(t,n,e,i,r,o,u,a,c,s){var l,f;if(void 0!==n&&void 0!==e&&void 0!==i&&void 0!==r&&void 0!==o&&void 0!==u&&void 0!==a&&void 0!==c&&void 0!==s)return t.strokeStyle=c,t.lineWidth=s,Si(t,e,r,u,a),t.stroke(),l=a/2,f=a/4,Ci(t,i,u-l,i,u+l),Ci(t,e,u,n,u),Ci(t,r,u,o,u),Ci(t,n,u-f,n,u+f),Ci(t,o,u-f,o,u+f)},Wi=function(t,n,e,i,r,o,u,a,c,s){var l,f;if(void 0!==n&&void 0!==e&&void 0!==i&&void 0!==r&&void 0!==o&&void 0!==u&&void 0!==a&&void 0!==c&&void 0!==s)return t.strokeStyle=c,t.lineWidth=s,qi(t,n,i,o,a),t.stroke(),l=a/2,f=a/4,Ci(t,n-l,r,n+l,r),Ci(t,n,i,n,e),Ci(t,n,o,n,u),Ci(t,n-f,e,n+f,e),Ci(t,n-f,u,n+f,u)},Ho=function(t,n,e,i){var r,o,u,a,c,s,l,f,h;u=t.slope,r=t.intercept,a=t.strokeColor,c=t.strokeOpacity,o=t.lineWidth,void 0!==r?0===u?e instanceof At&&(s=n.range.min,l=n.range.max,f=h=e.scale(r)):n instanceof At&&e instanceof At&&(s=n.scale(n.domain.min),l=n.scale(n.domain.max),f=e.scale(u*n.domain.min+r),h=e.scale(u*e.domain.max+r)):n instanceof At&&(s=l=n.scale(u),f=e.range.min,h=e.range.max),void 0!==s&&void 0!==f&&void 0!==l&&void 0!==h&&(i.save(),i.strokeStyle=Ce(a,c),i.lineWidth=o,Ci(i,s,f,l,h),i.restore())},Ze=function(t){var n,e,i,r,o,u;return i=t.position.coordinates,r=i[0],n=i[1],o=t.strokeColor,u=t.strokeOpacity,e=t.lineWidth,new ht(r?r.value:0,n?n.value:void 0,o?o.value:chroma("red"),u?u.value:1,e?e.value:1.5)},ai=function(t,n){var e,i,r,o,u,a,c,s,l,f,h,d,p;return o=n[0],u=n[1],h=new dn([o],[u]),l=null!=(a=t.shape)?a:new Y("circle"),f=null!=(c=t.size)?c:new X(yi),s=kr(t.fillColor,t.fillOpacity,t.strokeColor,t.strokeOpacity,t.lineWidth,!1,!0),e=s[0],i=s[1],d=s[2],p=s[3],r=s[4],new It(h,o,u,l,f,e,i,d,p,r,t.tooltip)},Gi=function(t,n,e,i){var r,o,u,a,c,s,l,f,h,d,p,v,g,m;return c=Ui(e,n.positionX),s=Ui(i,n.positionY),h=Qi(t,n.shape),d=Fi(t,n.size),l=Vi(t,n),o=l[0],u=l[1],r=l[2],f=tr(t,n),v=f[0],g=f[1],p=f[2],a=f[3],m=er(t,n.tooltip),new Et(c,s,h,d,r,o,u,p,v,g,a,m)},gr=function(t,n,e){var i,r,o,u,a,c,s,l,f,h,d,p,v,g;for(l=n.positionX,f=n.positionY,h=n.shape,d=n.size,i=n.fill,p=n.stroke,c=n.lineWidth,e.save(),o=0,u=t.length;o<u;o++)r=t[o],v=l(r),g=f(r),void 0!==v&&void 0!==g&&(h(r)(e,v,g,d(r)),e.lineWidth=2+(p?c(r):1),e.stroke());for(e.restore(),e.save(),e.globalCompositeOperation="destination-out",e.fillStyle=e.strokeStyle="black",s=0,a=t.length;s<a;s++)r=t[s],v=l(r),g=f(r),void 0!==v&&void 0!==g&&(h(r)(e,v,g,d(r)),p&&(e.lineWidth=c(r),e.stroke()),i&&e.fill());return e.restore()},Or=function(t,n,e,i){var r,o,u,a,c,s,l,f,h,d,p,v;for(s=n.positionX,l=n.positionY,f=n.shape,h=n.size,d=n.stroke,a=n.lineWidth,e.save(),o=0,u=t.length;o<u;o++)r=t[o],p=s(r),v=l(r),void 0!==p&&void 0!==v&&(c=i.put(r),f(r)(e,p,v,h(r)),e.fillStyle=c,e.fill(),d&&(e.lineWidth=a(r),e.strokeStyle=c,e.stroke()));return e.restore()},Uo=function(t,n,e){var i,r,o,u,a,c,s,l,f,h,d,p;for(c=n.positionX,s=n.positionY,l=n.shape,f=n.size,i=n.fill,h=n.stroke,a=n.lineWidth,e.save(),o=0,u=t.length;o<u;o++)r=t[o],d=c(r),p=s(r),void 0!==d&&void 0!==p&&(l(r)(e,d,p,f(r)),h&&(e.lineWidth=a(r),e.strokeStyle=h(r),e.stroke()),i&&(e.fillStyle=i(r),e.fill()));return e.restore()},ru=function(t,n,e,i,r,o){var u,a,c,s,l,f,h,d;for(s=n.positionX,l=n.positionY,f=[],a=0,c=t.length;a<c;a++)u=t[a],h=s(u),d=l(u),void 0!==h&&void 0!==d&&e<=h&&h<=r&&i<=d&&d<=o&&f.push(u);return f},cu=function(t){return _.map(t,function(t){return t.type}).join(", ")},si=function(t,n){var e,i,r,o,a,c,s,l,f,h,d,p,v,g,m,w,b,_,k,x,C,S,q;switch(S=cu(n)){case"String, Number":return a=n[0],h=n[1],k=new dn([a],[h]),q=null!=(d=t.width)?d:new z(.8),p=kr(t.fillColor,t.fillOpacity,t.strokeColor,t.strokeOpacity,t.lineWidth,!0,!1),e=p[0],i=p[1],x=p[2],C=p[3],o=p[4],new y(k,a,void 0,h,q,e,i,x,C,o,t.tooltip);case"String, Number, Number":return a=n[0],f=n[1],h=n[2],k=new dn([a],[f,h]),q=null!=(v=t.width)?v:new z(.8),g=kr(t.fillColor,t.fillOpacity,t.strokeColor,t.strokeOpacity,t.lineWidth,!0,!1),e=g[0],i=g[1],x=g[2],C=g[3],o=g[4],new y(k,a,f,h,q,e,i,x,C,o,t.tooltip);case"Number, String":return s=n[0],l=n[1],k=new dn([s],[l]),r=null!=(m=t.height)?m:new O(.8),w=kr(t.fillColor,t.fillOpacity,t.strokeColor,t.strokeOpacity,t.lineWidth,!0,!1),e=w[0],i=w[1],x=w[2],C=w[3],o=w[4],new u(k,void 0,s,l,r,e,i,x,C,o,t.tooltip);case"Number, Number, String":return c=n[0],s=n[1],l=n[2],k=new dn([c,s],[l]),r=null!=(b=t.height)?b:new O(.8),_=kr(t.fillColor,t.fillOpacity,t.strokeColor,t.strokeOpacity,t.lineWidth,!0,!1),e=_[0],i=_[1],x=_[2],C=_[3],o=_[4],new u(k,c,s,l,r,e,i,x,C,o,t.tooltip);default:throw new Error("Cannot create rect marks with vectors of type ["+S+"]")}},Li=function(t,n,e,i){var r,o,u,a,c,s,l,f,h,d,p,v,g,m;return c=Ui(e,n.positionX),s=n.positionY1?Ui(i,n.positionY1):Bi(i,0),l=Ui(i,n.positionY2),m=Zi(t,n.width,e.rect.width/e.domain.length),f=Vi(t,n),o=f[0],u=f[1],r=f[2],h=tr(t,n),p=h[0],v=h[1],d=h[2],a=h[3],g=er(t,n.tooltip),new w(c,s,l,m,r,o,u,d,p,v,a,g)},ji=function(t,n,e,i){var o,u,a,c,s,l,f,h,d,p,v,g,m,w,b,y,_,k;switch(n.space.x.length){case 1:_=n.space.x[0],l=Bi(e,0),f=Ui(e,_);break;default:d=n.space.x,y=d[0],_=d[1],l=Ui(e,y),f=Ui(e,_)}return k=n.space.y[0],h=Ui(i,k),c=Zi(t,n.height,i.rect.height/i.domain.length),p=Vi(t,n),u=p[0],a=p[1],o=p[2],v=tr(t,n),m=v[0],w=v[1],g=v[2],s=v[3],b=er(t,n.tooltip),new r(l,f,h,c,o,u,a,g,m,w,s,b)},pr=function(t,n,e){var i,r,o,u,a,c,s,l,f,h,d,p,v,g,m,w;for(l=n.positionX,f=n.positionY1,h=n.positionY2,v=n.width,i=n.fill,d=n.stroke,c=n.lineWidth,e.save(),o=0,u=t.length;o<u;o++)r=t[o],g=l(r),m=f(r),w=h(r),p=v(r),void 0!==g&&void 0!==m&&void 0!==w&&void 0!==p&&(qi(e,g,m,w,p),e.lineWidth=2+(d?c(r):1),e.stroke());for(e.restore(),e.save(),e.globalCompositeOperation="destination-out",e.fillStyle=e.strokeStyle="black",s=0,a=t.length;s<a;s++)r=t[s],g=l(r),m=f(r),w=h(r),p=v(r),void 0!==g&&void 0!==m&&void 0!==w&&void 0!==p&&(qi(e,g,m,w,p),d&&(e.lineWidth=c(r),e.stroke()),i&&e.fill());return e.restore()},dr=function(t,n,e){var i,r,o,u,a,c,s,l,f,h,d,p,v,g,m,w;for(h=n.positionX1,d=n.positionX2,p=n.positionY,o=n.height,i=n.fill,v=n.stroke,l=n.lineWidth,e.save(),a=0,c=t.length;a<c;a++)u=t[a],g=h(u),m=d(u),w=p(u),r=o(u),void 0!==g&&void 0!==m&&void 0!==w&&void 0!==r&&(Si(e,g,m,w,r),e.lineWidth=2+(v?l(u):1),e.stroke());for(e.restore(),e.save(),e.globalCompositeOperation="destination-out",e.fillStyle=e.strokeStyle="black",f=0,s=t.length;f<s;f++)u=t[f],g=h(u),m=d(u),w=p(u),r=o(u),void 0!==g&&void 0!==m&&void 0!==w&&void 0!==r&&(Si(e,g,m,w,r),v&&(e.lineWidth=l(u),e.stroke()),i&&e.fill());return e.restore()},Wr=function(t,n,e,i){var r,o,u,a,c,s,l,f,h,d,p,v,g,m;for(s=n.positionX,l=n.positionY1,f=n.positionY2,p=n.width,h=n.stroke,a=n.lineWidth,e.save(),o=0,u=t.length;o<u;o++)r=t[o],v=s(r),g=l(r),m=f(r),d=p(r),void 0!==v&&void 0!==g&&void 0!==m&&void 0!==d&&(c=i.put(r),qi(e,v,g,m,d),xi(e,c),h&&Ti(e,c,a(r)));return e.restore()},Nr=function(t,n,e,i){var r,o,u,a,c,s,l,f,h,d,p,v,g,m;for(f=n.positionX1,h=n.positionX2,d=n.positionY,o=n.height,p=n.stroke,s=n.lineWidth,e.save(),a=0,c=t.length;a<c;a++)u=t[a],v=f(u),g=h(u),m=d(u),r=o(u),void 0!==v&&void 0!==g&&void 0!==m&&void 0!==r&&(l=i.put(u),Si(e,v,g,m,r),xi(e,l),p&&Ti(e,l,s(u)));return e.restore()},Lo=function(t,n,e){var i,r,o,u,a,c,s,l,f,h,d,p,v,g;for(c=n.positionX,s=n.positionY1,l=n.positionY2,d=n.width,i=n.fill,f=n.stroke,a=n.lineWidth,e.save(),o=0,u=t.length;o<u;o++)r=t[o],p=c(r),v=s(r),g=l(r),h=d(r),void 0!==p&&void 0!==v&&void 0!==g&&void 0!==h&&(qi(e,p,v,g,h),f&&Ti(e,f(r),a(r)),i&&xi(e,i(r)));return e.restore()},jo=function(t,n,e){var i,r,o,u,a,c,s,l,f,h,d,p,v,g;for(l=n.positionX1,f=n.positionX2,h=n.positionY,o=n.height,i=n.fill,d=n.stroke,s=n.lineWidth,e.save(),a=0,c=t.length;a<c;a++)u=t[a],p=l(u),v=f(u),g=h(u),r=o(u),void 0!==p&&void 0!==v&&void 0!==g&&void 0!==r&&(Si(e,p,v,g,r),d&&Ti(e,d(u),s(u)),i&&xi(e,i(u)));return e.restore()},iu=function(t,n,e,i,r,o){var u,a,c,s,l,f,h,d,p,v,g,m,w,b,y;for(s=n.positionX,l=n.positionY1,f=n.positionY2,p=n.width,h=[],a=0,c=t.length;a<c;a++)u=t[a],v=s(u),w=l(u),b=f(u),w>b&&(y=w,w=b,b=y),d=p(u),void 0!==v&&void 0!==w&&void 0!==b&&void 0!==d&&(g=v-d/2,m=v+d/2,e>m||r<g||i>b||o<w||h.push(u));return h},eu=function(t,n,e,i,r,o){var u,a,c,s,l,f,h,d,p,v,g,m,w,b,y;for(f=n.positionX1,h=n.positionX2,d=n.positionY,a=n.height,p=[],s=0,l=t.length;s<l;s++)c=t[s],v=f(c),g=h(c),w=d(c),v>g&&(m=v,v=g,g=m),u=a(c),void 0!==v&&void 0!==g&&void 0!==w&&void 0!==u&&(b=w-u/2,y=w+u/2,e>g||r<v||i>y||o<b||p.push(c));return p},li=function(t,n){var e,i,r,o,u,a,c,s,l,f,h,d,p,v,g,m,w;switch(cu(n)){case"String, Number, Number, Number, Number, Number":return m=n[0],r=n[1],o=n[2],u=n[3],a=n[4],c=n[5],d=new dn([m],[r,o,u,a,c]),g=null!=(s=t.width)?s:new z(.8),l=xr(t.strokeColor,t.strokeOpacity,t.lineWidth),p=l[0],v=l[1],i=l[2],new Zt(d,m,r,o,u,a,c,g,p,v,i,t.tooltip);case"Number, Number, Number, Number, Number, String":return r=n[0],o=n[1],u=n[2],a=n[3],c=n[4],w=n[5],d=new dn([r,o,u,a,c],[w]),e=null!=(f=t.height)?f:new z(.8),h=xr(t.strokeColor,t.strokeOpacity,t.lineWidth),p=h[0],v=h[1],i=h[2],new Kt(d,r,o,u,a,c,w,e,p,v,i,t.tooltip)}},Ki=function(t,n,e,i){var r,o,u,a,c,s,l,f,h,d,p,v,g;return u=Ui(e,n.q0),a=Ui(e,n.q1),c=Ui(e,n.q2),s=Ui(e,n.q3),l=Ui(e,n.qn),g=Ui(i,n.positionY),r=Zi(t,n.height,i.rect.height/i.domain.length),f=tr(t,n),d=f[0],p=f[1],h=f[2],o=f[3],v=er(t,n.tooltip),new Gt(u,a,c,s,l,g,r,h,d,p,o,v)},mr=function(t,n,e){var i,r,o,u,a,c,s,l,f,h,d,p,v,g;for(l=n.positionY,f=n.q0,h=n.q1,d=n.q2,p=n.q3,v=n.qn,i=n.height,g=n.stroke,c=n.lineWidth,e.save(),o=0,u=t.length;o<u;o++)r=t[o],Ni(e,f(r),h(r),d(r),p(r),v(r),l(r),i(r),g(r),2+(g?c(r):1));for(e.restore(),e.save(),e.globalCompositeOperation="destination-out",e.strokeStyle="black",s=0,a=t.length;s<a;s++)r=t[s],Ni(e,f(r),h(r),d(r),p(r),v(r),l(r),i(r),g(r),c(r));return e.restore()},Er=function(t,n,e,i){var r,o,u,a,c,s,l,f,h,d,p,v,g;for(f=n.positionY,h=n.q0,n.q1,n.q2,n.q3,d=n.qn,o=n.height,n.stroke,s=n.lineWidth,e.save(),a=0,c=t.length;a<c;a++)u=t[a],p=h(u),v=d(u),g=f(u),r=o(u),void 0!==p&&void 0!==v&&void 0!==g&&void 0!==r&&(l=i.put(u),Si(e,p,v,g,r),xi(e,l),Ti(e,l,s(u)));return e.restore()},Jo=function(t,n,e){var i,r,o,u,a,c,s,l,f,h,d,p;for(c=n.positionY,s=n.q0,l=n.q1,f=n.q2,h=n.q3,d=n.qn,i=n.height,p=n.stroke,a=n.lineWidth,e.save(),o=0,u=t.length;o<u;o++)r=t[o],Ni(e,s(r),l(r),f(r),h(r),d(r),c(r),i(r),p(r),a(r));return e.restore()},ou=function(t,n,e,i,r,o){var u,a,c,s,l,f,h,d,p,v,g,m,w,b,y;for(f=n.positionY,h=n.q0,n.q1,n.q2,n.q3,d=n.qn,a=n.height,n.stroke,n.lineWidth,p=[],s=0,l=t.length;s<l;s++)c=t[s],v=h(c),g=d(c),w=f(c),v>g&&(m=v,v=g,g=m),u=a(c),void 0!==v&&void 0!==g&&void 0!==w&&void 0!==u&&(b=w-u/2,y=w+u/2,e>g||r<v||i>y||o<b||p.push(c));return p},Ji=function(t,n,e,i){var r,o,u,a,c,s,l,f,h,d,p,v,g;return g=Ui(e,n.positionX),o=Ui(i,n.q0),u=Ui(i,n.q1),a=Ui(i,n.q2),c=Ui(i,n.q3),s=Ui(i,n.qn),v=Zi(t,n.width,e.rect.width/e.domain.length),l=tr(t,n),h=l[0],d=l[1],f=l[2],r=l[3],p=er(t,n.tooltip),new Jt(g,o,u,a,c,s,v,f,h,d,r,p)},wr=function(t,n,e){var i,r,o,u,a,c,s,l,f,h,d,p,v,g;for(s=n.positionX,l=n.q0,f=n.q1,h=n.q2,d=n.q3,p=n.qn,g=n.width,v=n.stroke,a=n.lineWidth,e.save(),r=0,o=t.length;r<o;r++)i=t[r],Wi(e,s(i),l(i),f(i),h(i),d(i),p(i),g(i),v(i),2+(v?a(i):1));for(e.restore(),e.save(),e.globalCompositeOperation="destination-out",e.strokeStyle="black",c=0,u=t.length;c<u;c++)i=t[c],Wi(e,s(i),l(i),f(i),h(i),d(i),p(i),g(i),v(i),a(i));return e.restore()},Yr=function(t,n,e,i){var r,o,u,a,c,s,l,f,h,d,p,v,g;for(s=n.positionX,l=n.q0,n.q1,n.q2,n.q3,f=n.qn,d=n.width,n.stroke,a=n.lineWidth,e.save(),o=0,u=t.length;o<u;o++)r=t[o],p=s(r),v=l(r),g=f(r),h=d(r),void 0!==p&&void 0!==v&&void 0!==g&&void 0!==h&&(c=i.put(r),qi(e,p,v,g,h),xi(e,c),Ti(e,c,a(r)));return e.restore()},Qo=function(t,n,e){var i,r,o,u,a,c,s,l,f,h,d,p;for(a=n.positionX,c=n.q0,s=n.q1,l=n.q2,f=n.q3,h=n.qn,p=n.width,d=n.stroke,u=n.lineWidth,e.save(),r=0,o=t.length;r<o;r++)i=t[r],Wi(e,a(i),c(i),s(i),l(i),f(i),h(i),p(i),d(i),u(i));return e.restore()},uu=function(t,n,e,i,r,o){var u,a,c,s,l,f,h,d,p,v,g,m,w,b,y;for(s=n.positionX,l=n.q0,n.q1,n.q2,n.q3,f=n.qn,p=n.width,n.stroke,n.lineWidth,h=[],a=0,c=t.length;a<c;a++)u=t[a],v=s(u),w=l(u),b=f(u),w>b&&(y=w,w=b,b=y),d=p(u),void 0!==v&&void 0!==w&&void 0!==b&&void 0!==d&&(g=v-d/2,m=v+d/2,e>m||r<g||i>b||o<w||h.push(u));return h},ui=function(t,n){var e,i,r,o,u,a,c;return i=n[0],r=n[1],u=new dn([i],[r]),o=xr(t.strokeColor,t.strokeOpacity,t.lineWidth),a=o[0],c=o[1],e=o[2],new Tt(u,i,r,a,c,e,t.tooltip)},$i=function(t,n,e,i){var r,o,u,a,c,s,l,f;return o=Ui(e,n.positionX),u=Ui(i,n.positionY),a=tr(t,n),s=a[0],l=a[1],c=a[2],r=a[3],f=er(t,n.tooltip),new qt(o,u,c,s,l,r,f)},vr=function(t,n,e){var i,r,o,u,a,c,s;for(u=n.positionX,a=n.positionY,e.save(),r=0,o=t.length;r<o;r++)i=t[r],c=u(i),s=a(i),e.lineWidth=1.5,e.strokeStyle="black",void 0!==c&&void 0!==s&&(Ei(e,c,s,64),e.stroke());return e.restore()},Tr=function(t,n,e,i){var r,o,u,a,c,s,l;for(a=n.positionX,c=n.positionY,e.save(),o=0,u=t.length;o<u;o++)r=t[o],s=a(r),l=c(r),void 0!==s&&void 0!==l&&(Ei(e,s,l,64),e.fillStyle=i.put(r),e.fill());return e.restore()},$o=function(t,n,e){var i,r,o,u,a,c,s,l,f,h,d,p,v,g,m,w,b,y,_;if(f=n.positionX,h=n.positionY,d=n.stroke,s=n.lineWidth,d instanceof N&&s instanceof N){for(e.strokeStyle=d(),e.lineWidth=s(),e.save(),i=!1,u=0,a=t.length;u<a;u++)o=t[u],g=f(o),b=h(o),void 0!==g&&void 0!==b?i?e.lineTo(g,b):(e.beginPath(),i=!0,e.moveTo(g,b)):(i&&e.stroke(),i=!1);return e.restore()}for(e.save(),e.lineCap="round",i=!1,m=void 0,y=void 0,p=void 0,l=0,c=t.length;l<c;l++)o=t[l],w=f(o),_=h(o),void 0!==w&&void 0!==_?(v=d(o),i&&(v!==p?(r=e.createLinearGradient(m,y,w,_),r.addColorStop(0,p||In),r.addColorStop(1,v||In),e.strokeStyle=r):e.strokeStyle=v,e.lineWidth=s(o),e.beginPath(),e.moveTo(m,y),e.lineTo(w,_),e.stroke()),i=!0,m=w,y=_,p=v):i=!1;return e.restore()},ei=_i([Yt,Array,ai],[Nt,Array,ui],[Vt,Array,si],[$t,Array,li]),ze=_i([dt,Ze]),Xt=new et(Gi,Or,gr,Uo,ru),Wt=new et($i,Tr,vr,$o,ru),b=new et(Li,Wr,pr,Lo,iu),o=new et(ji,Nr,dr,jo,eu),Ut=new et(Ki,Er,mr,Jo,ou),Qt=new et(Ji,Yr,wr,Qo,uu),jr=_i([Number,null,function(t,n){return new c(t,void 0)}],[null,Number,function(t,n){return new c(void 0,n)}],[Number,Number,function(t,n){return new c(t,n)}],[null,null,function(){return new c(void 0,void 0)}]),Vr=_i([Number,Number,function(t,n){return new V(t,n)}]),Dr=_i([Number,Number,function(t,n){return new D(t,n)}]),Kr=_i([nt,_.identity],[Function,function(t){return new F(t)}]),Wo=_i([Number,function(t){return new Ct(t)}],[Boolean,function(t){return new a(t)}],[Date,function(t){return new j(t)}],[String,function(t){return new vn(t)}]),go=_i([Array,function(t){return new h(t)}],[Number,function(t){return t>0?new rn(0,t):t<0?new rn(t,0):new B(-1,0,1)}],[String,function(t){return new en(t,"black")}],[Number,Number,function(t,n){return t<=n?new rn(t,n):new rn(n,t)}],[String,String,function(t,n){return new en(t,n)}],[Number,Number,Number,function(t,n,e){var i,r,o,u;return u=_.sortBy([t,n,e],_.identity),i=u[0],r=u[1],o=u[2],new B(i,r,o)}],[String,String,String,function(t,n,e){return new R(t,n,e)}]),xe=function(t){var n,e,i,r,o;for(r=[],e=0,i=t.length;e<i;e++)if((n=t[e])instanceof Q)r.push(n);else{if(Wn!==(o=su(n)))throw new Error("Cannot create vector reference from ["+n+"] of type ["+o+"].");r.push(new Q(n))}return r},vo=function(){var t,n,e;return n=1<=arguments.length?pu.call(arguments,0):[],new Mt(_.every(n,function(t){return t instanceof Mn})?function(){var e,i,r;for(r=[],e=0,i=n.length;e<i;e++)t=n[e],r.push(new q(t.value));return r}():function(){var t,i,r,o;for(r=xe(n),o=[],t=0,i=r.length;t<i;t++)e=r[t],o.push(new zn(e));return o}())},Gr=_i([vn,function(t){return new W(chroma(t.value))}],[String,function(t){return new Pn(new Q(t))}],[Q,function(t){return new Pn(t)}],[String,S,function(t,n){return new Pn(new Q(t),n)}],[Q,S,function(t,n){return new Pn(t,n)}],[String,h,function(t,n){return new Pn(new Q(t),n)}],[Q,h,function(t,n){return new Pn(t,n)}]),Ur=_i([Ct,function(t){return new T(t.value)}],[String,function(t){return new Fn(new Q(t))}],[Q,function(t){return new Fn(t)}],[String,rn,function(t,n){return new Fn(new Q(t),n)}],[Q,rn,function(t,n){return new Fn(t,n)}]),Co=_i([vn,function(t){return new I(chroma(t.value))}],[String,function(t){return new Vn(new Q(t))}],[Q,function(t){return new Vn(t)}],[String,S,function(t,n){return new Vn(new Q(t),n)}],[Q,S,function(t,n){return new Vn(t,n)}],[String,h,function(t,n){return new Vn(new Q(t),n)}],[Q,h,function(t,n){return new Vn(t,n)}]),So=_i([Ct,function(t){return new M(t.value)}],[String,function(t){return new Dn(new Q(t))}],[Q,function(t){return new Dn(t)}],[String,rn,function(t,n){return new Dn(new Q(t),n)}],[Q,rn,function(t,n){return new Dn(t,n)}]),ki=function(t,n){return _i([Ct,function(n){return new t(n.value)}],[String,function(t){return new n(new Q(t))}],[Q,function(t){return new n(t)}],[String,rn,function(t,e){return new n(new Q(t),e)}],[Q,rn,function(t,e){return new n(t,e)}])},ko=ki(X,Bn),Oo=ki(z,$n),no=ki(O,jn),uo=_i([Ct,function(t){return new E(t.value)}],[String,function(t){return new Ln(new Q(t))}],[Q,function(t){return new Ln(t)}],[String,rn,function(t,n){return new Ln(new Q(t),n)}],[Q,rn,function(t,n){return new Ln(t,n)}]),_o=_i([vn,function(t){return new Y(t.value)}],[String,function(t){return new Rn(new Q(t))}],[Q,function(t){return new Rn(t)}],[String,h,function(t,n){return new Rn(new Q(t),n)}],[Q,h,function(t,n){return new Rn(t,n)}]),No=function(){var t;return t=1<=arguments.length?pu.call(arguments,0):[],new Hn(xe(t))},bo=function(){var t,n;return n=1<=arguments.length?pu.call(arguments,0):[],1===n.length&&_.isNumber(t=_.head(n))?new Rt(t):new nn(xe(n))},Mo=function(t){var n,e,i,r,o;for(o=[],e=0,i=t.length;e<i;e++)switch(n=t[e],n.type){case"string":o.push({label:n.name,type:"String",domain:null!=(r=n.lightningDomain)?r:[],parse:he});break;case"integer":o.push({label:n.name,type:"Number",parse:de});break;case"number":o.push({label:n.name,type:"Number",parse:pe});break;default:throw new Error("Invalid type ["+n.type+"] for schema field ["+n.name+"]")}return o},Io=function(t,n,e,i){var r,o,u,a,c,s,l,f;return a=Papa.parse(e,{skipEmptyLines:!0}),s=a.data,i&&s.shift(),f=function(){var t,i,a,f,h;for(h=[],u=t=0,i=n.length;t<i;u=++t){for(r=n[u],e=new Array(s.length),o=f=0,a=s.length;f<a;o=++f)c=s[o],void 0!==(l=r.parse(c[u]))&&(e[o]=l);switch(r.type){case"String":h.push(Ge(r.label,r.type,e,r.domain));break;case"Number":h.push(mi(r.label,r.type,e,_.identity));break;default:h.push(void 0)}}return h}(),Je(t,f,_.range(s.length))},Lr=function(t,n,e,i,r){return function(o){var u,a,c,s,l,f;return l=Math.floor((e-n)/i),u=function(t){return n+t*i},c=function(t,n){var e;return e=function(t){return n(u(t))},Qe(t,t,"Number",l,e,_.identity)},f=function(){var t;t=[];for(s in r)a=r[s],t.push(c(s,a));return t}(),f.unshift(Qe(t,t,"Number",l,u,_.identity)),o(null,Je("computed",f,_.range(l)))}},Br=function(t){return function(n){return Oi("json",t+"/datapackage.json",function(e,i){var r,o;return e?n(e):(r=_.head(i.resources))?(o=r.path)?Oi("text",t+"/"+o,function(t,e){if(t)return n(t);try{return n(null,Io(i.name,Mo(r.schema),e,!0))}catch(e){return t=e,n(t)}}):n(new Error("Resource is missing attribute [path].")):n(new Error("No resources found in data package."))})}},$e=function(){var t,n;return t=arguments[0],n=2<=arguments.length?pu.call(arguments,1):[],function(){var e;return e=1<=arguments.length?pu.call(arguments,0):[],le(t,lr(e,n))}},po=$e(Yt,Mt,on,ln,Z,tt,gn,mn,pt,Yn),mo=$e(Vt,Mt,Qn,at,Z,tt,gn,mn,pt,Yn),ho=$e(Nt,Mt,gn,mn,pt,Yn),wo=$e($t,Mt,Qn,at,gn,mn,pt,Yn),oo=$e(dt,Mt,gn,mn,pt),fo=function(t,n){var e;return e=function(t,n){var i,r,o,u;if(_.isArray(t)){for(r=t.length,o=[];r--;)i=t[r],null!==i&&_.isObject(i)?(e(i,n),o.push(n(i))):o.push(void 0);return o}u=[];for(r in t)gu.call(t,r)&&(i=t[r],null!==i&&_.isObject(i)?(e(i,n),u.push(n(i))):u.push(void 0));return u},function(i){var r;return r=t.parse(i),e(r,function(t){var n;"CallExpression"===t.type&&"Identifier"===t.callee.type?_.isFunction(Mr[n=t.callee.name])&&(t.callee={type:"MemberExpression",computed:!1,object:{type:"Identifier",name:"plot"},property:{type:"Identifier",name:n}}):"Identifier"===t.type&&_.isFunction(Mr[n=t.name])&&(delete t.name,t.type="MemberExpression",t.computed=!1,t.object={type:"Identifier",name:"plot"},t.property={type:"Identifier",name:n})}),n.generate(r)}},yo={maxCanvasSize:new sn(795,600),visualizationSize:new sn(300,300),axisLabelFont:"10px monospace",axisTickColor:"#4d4d4d",axisTitleFont:"bold 10px monospace",axisLabelColor:"#4d4d4d",gridLineColor:"#eee",originLineColor:"#ccc"},Eo=function(t){return Math.round(t)+"px"},Be=function(t,n){var e,i,r,o;e=document.createElement(t),r=e.style;for(i in n)o=n[i],r[i]=o;return e},zo=function(t){for(var n;n=t.firstChild;)t.removeChild(n)},vi=function(t){var n,e;n=document.createElement("style"),n.type="text/css",n.innerHTML=t,e=_.head(document.getElementsByTagName("head")),e.appendChild(n)},gi=function(t){var n,e,i,r,o,u,a,c,s;return e=diecut("table","tbody","tr","th","td"),r=e[0],o=e[1],c=e[2],a=e[3],u=e[4],i=function(){var e;e=[];for(n in t)s=t[n],e.push(c([u(n+":"),a(s)]));return e}(),Do(r(o(i)))},Fe=function(t){var n,e,i,r,o,u,a;return a=t.width,o=t.height,r=document.createElement("canvas"),e=r.getContext("2d"),i=window.devicePixelRatio||1,n=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1,u=i/n,r.style.position="absolute",i!==n?(r.width=a*u,r.height=o*u,e.scale(u,u),r.style.width=Eo(a),r.style.height=Eo(o)):(r.width=a,r.height=o),new l(r,e,t,u)},wi=function(t){var n,e,i,r,o,u,a,c,s,l,f,h;return f=function(){var n,e;for(e=[],a=n=1;n<=5;a=++n)e.push(Fe(t));return e}(),n=f[0],o=f[1],u=f[2],l=f[3],i=f[4],r=Be("div",{position:"relative",overflow:"visible",width:Eo(t.width),height:Eo(t.height)}),r.className="lz",c=Be("div",{position:"absolute",left:Eo(0),top:Eo(0),width:Eo(0),height:Eo(0),display:"none",outline:"1px dotted #999",background:"rgba(0, 0, 0, 0.05)"}),h=Be("div",{position:"absolute",left:Eo(0),top:Eo(0),"max-width":Eo(.9*t.width),display:"none"}),h.className="lz-tooltip",r.appendChild(n.element),r.appendChild(o.element),r.appendChild(c),r.appendChild(u.element),r.appendChild(h),s=ii(l),e=Le(i),new Un(t,r,n,o,u,l,i,c,h,s,e)},hr=function(t){var n,e,i;return i=null!=(e=t.target)?e:t.srcElement,n=i.getBoundingClientRect(),[t.clientX-n.left,t.clientY-n.top]},me=function(t,n,e,i,r){var o,u,a,c,s,l,f,h,d,p;u=$(document),o=$(t),c=n.style,s=h=l=d=f=p=0,a=!1,o.on("mousemove",function(t){var n;return s=t.offsetX,h=t.offsetY,void 0!==s&&void 0!==h||(n=hr(t),s=n[0],h=n[1]),a?(c.left=Eo(s>l?l:s),c.top=Eo(h>d?d:h),c.width=Eo(Math.abs(s-l)),c.height=Eo(Math.abs(h-d))):e(s,h)}),o.on("mousedown",function(t){var n;return t.preventDefault(),l=t.offsetX,d=t.offsetY,void 0!==l&&void 0!==d||(n=hr(t),l=n[0],d=n[1]),a=!0,c.display="block",c.left=Eo(l),c.top=Eo(d),u.on("mouseup",function(t){var n;return t.preventDefault(),f=t.offsetX,p=t.offsetY,void 0!==f&&void 0!==p||(n=hr(t),f=n[0],p=n[1]),a=!1,c.display="none",c.width=Eo(0),c.height=Eo(0),u.off("mouseup"),Math.abs(l-f)>5||Math.abs(d-p)>5?i(l,d,f,p):r(l,d)})})},He=function(){var t,n,e,i;return t={},e=function(n,e){var i;return(i=t[n])?i.push(e):t[n]=[e]},i=function(n,e){var i,r,o,u;if(n)if(e){if(u=t[n])for(i=r=0,o=u.length;r<o;i=++r)if(u[i]===e){u.splice(i,1);break}}else delete t[n]},n=function(){var n,e,i,r,o,u;if(e=arguments[0],n=2<=arguments.length?pu.call(arguments,1):[],u=t[e])for(i=0,r=u.length;i<r;i++)o=u[i],o.apply(null,n)},[e,i,n]},bi=function(t,n,e,i,r,o,u){var a,c,s,l,f,h,d,p,v,g,m,w,b,y,k,x,C,S,q,N,W,T,O;return l=wi(t),f=l.baseCanvas,m=l.highlightCanvas,b=l.hoverCanvas,d=l.clipCanvas,x=l.maskCanvas,y=l.marquee,T=l.tooltip,k=l.mask,h=l.clip,O=t.regions.center,c=n.indices,a=void 0,W=function(n,i){var r,o,u,a,c;if(void 0!==(o=k.test(n,i)))for(r=d.context,r.clearRect(0,0,t.width,t.height),u=0,c=e.length;u<c;u++)if(a=e[u],r.save(),r.translate(O.left,O.top),a.mask([o],a.encoders,r,h),r.restore(),h.test(n,i))return o},p=function(t,n,e){var i;return i=gi(e),zo(T),T.appendChild(i),T.style.display="block",C(t,n)},s=7,C=function(n,e){var i,r,o,u;if("none"!==T.style.display)return u=T.clientWidth,o=T.clientHeight,i=n+s,r=e-s-o,i+u>t.width&&(i=n-s-u),r<0&&(r=e+s),i<0&&(i=0),r<0&&(r=0),T.style.left=Eo(i),T.style.top=Eo(r)},v=function(){return T.style.display="none"},w=function(i,r){var o,c,s,l,f,h,d,g,m,w,y,_,k,x,S;if((l=W(i,r))!==a){if(a=l,s=b.context,s.clearRect(0,0,t.width,t.height),v(),void 0!==l){for(s.save(),s.translate(O.left,O.top),f=0,d=e.length;f<d;f++)h=e[f],h.highlight([l],h.encoders,s);for(s.restore(),u("markhover",new ct(n,l)),x={},w=0,g=e.length;w<g;w++){h=e[w],_=h.encodings;for(o in _)if(c=_[o])if(c instanceof An)(S=c.vector)&&(x[S.label]=S.format(l));else if(c instanceof Xn)for(k=c.vectors,y=0,m=k.length;y<m;y++)S=k[y],x[S.label]=S.format(l)}p(i,r,x)}}else C(i,r)},g=function(i){var r,o,a,c;if(r=m.context,r.clearRect(0,0,t.width,t.height),i.length){for(f.element.style.opacity=.5,r.save(),r.translate(O.left,O.top),o=0,c=e.length;o<c;o++)a=e[o],a.highlight(i,a.encoders,r),a.render(i,a.encoders,r);r.restore(),u("markselect",new tn(n,i))}else f.element.style.opacity=1,u("markdeselect",new L(n))},q=function(t,n){var e;e=W(t,n),g(void 0!==e?[e]:[])},N=function(t,n,i,r){var o,u,a,s,l,f,h;l=-O.left+(t>i?i:t),s=-O.left+(t>i?t:i),h=-O.top+(n>r?r:n),f=-O.top+(n>r?n:r),a=function(){var t,n,i;for(i=[],t=0,n=e.length;t<n;t++)o=e[t],i.push(o.select(c,o.encoders,l,h,s,f));return i}(),u=e.length>1?_.uniq(_.flatten(a,!0)):_.head(a),g(u)},S=function(){var n,u,a,s,l,h,d,p;for(u=f.context,p=x.context,Bo(u,r,O),Vo(u,o,O),u.save(),u.translate(O.left,O.top),p.save(),p.translate(O.left,O.top),a=0,l=e.length;a<l;a++)s=e[a],s.render(c,s.encoders,u),s.mask(c,s.encoders,p,k);for(d=0,h=i.length;d<h;d++)n=i[d],n.render(n,r,o,u);p.restore(),u.restore(),Po(u,r,t.regions.bottom),Fo(u,o,t.regions.left)},me(b.element,y,w,N,q),new Kn(l,n,W,g,w,q,N,S)},Ao=function(t,n,e,i,r){var o,u,a,c,s,l,h,d,p,v,g,m,w,b,y,_,k,x,C,S,q;if(t.font=yo.axisLabelFont,t.fillStyle=yo.axisLabelColor,t.strokeStyle=yo.axisTickColor,t.textBaseline="middle",q=Zn+4,m=e-q,t.save(),ye(t,q,0,m,i),t.textAlign="right",S=e-5,h=e-6,n instanceof f){for(o=n.guide(),b=Math.floor(i/(Zn+2)),a=Math.floor(o.length/b),c=s=0,p=o.length;s<p;c=++s)u=o[c],_=n.scale(u),C=-.5+Math.round(_),Ci(t,S,C,e,C),(0===a||0!==c&&0==c%a)&&t.fillText(u.value,h,_,m-6);Ci(t,e-.5,0,e-.5,i)}else{if(!(n instanceof At))throw new Error("Invalid axis type.");for(y=6,w=i-6,k=n.guide(),g=0,v=k.length;g<v;g++)x=k[g],l=x.label,_=n.scale(x.value),C=Math.max(.5,-.5+Math.round(_)),Ci(t,S,C,e,C),d=_<y?y:_>w?w:_,t.fillText(l,h,d,m-6);Ci(t,e-.5,0,e-.5,i)}return t.restore(),t.font=yo.axisTitleFont,t.textAlign="center",t.translate(q/2,i/2),t.rotate(r*rt),t.fillText(n.label,0,0,i),t.restore()},Ro=function(t,n,e,i){var r,o,u,a,c;if(t.strokeStyle=yo.gridLineColor,n instanceof f)Ci(t,0,.5,e,.5),Ci(t,0,i-.5,e,i-.5);else if(n instanceof At){for(u=n.guide(),r=0,o=u.length;r<o;r++)a=u[r],c=Math.max(.5,-.5+Math.round(n.scale(a.value))),Ci(t,0,c,e,c);n.domain.min<=0&&0<=n.domain.max&&(t.strokeStyle=yo.originLineColor,c=Math.max(.5,-.5+Math.round(n.scale(0))),Ci(t,0,c,e,c))}},Bo=function(t,n,e){return t.save(),t.translate(e.left,e.top+e.height),t.rotate(-rt),Ro(t,n,e.height,e.width),t.restore()},Vo=function(t,n,e){return t.save(),t.translate(e.left,e.top),
Ro(t,n,e.width,e.height),t.restore()},Po=function(t,n,e){return t.save(),t.translate(e.left,e.top+e.height),t.rotate(-rt),Ao(t,n,e.height,e.width,1),t.restore()},Fo=function(t,n,e){return t.save(),t.translate(e.left,e.top),Ao(t,n,e.width,e.height,-1),t.restore()},Do=function(t){var n;return n=document.createElement("div"),n.innerHTML=t,n.childNodes[0]},ar=function(t,n){var e,i,r,o,u,a,c;for(i={},r=[],a=0,c=n.length;a<c;a++)o=n[a],u=(e=t.at(o)).key,i[u]||(i[u]=!0,r.push(e));return r},di=function(t,n){var e,i,r,o,u,a;for(u=null,i=null,e=null,r=0,o=t.length;r<o;r++)if(a=t[r],null===u)switch(u=a.type){case Wn:e=a,i=ar(a,n);break;case Sn:i=a.domain;break;default:throw new Error("ni")}else{if(u!==a.type)throw new Error("Incompatible axis vector ["+a.label+"]. Expect type ["+u+"], got ["+a.type+"]");switch(u){case Wn:if(e!==a)throw new Error("Incompatible categorical vector ["+a.label+"]. Expected ["+e.label+"].");break;case Sn:i=Se(i,a.domain);break;default:throw new Error("ni")}}return new hn(u,t,i)},Pe=function(t){var n,e;return n=function(){var n,i,r;for(r=[],n=0,i=t.length;n<i;n++)e=t[n],r.push(e.label);return r}(),_.uniq(n).join(", ")},qe=function(t,n){var e,i,r,o,u,a,s,l,h,d,p,v,g;if(p=new Bt(0,0,400,400),e=Ae(t,"",n,new rn(0,p.width),p),d=Zn+4+6+10,e instanceof f){for(l=0,i=e.guide(),o=0,u=i.length;o<u;o++)r=i[o],l<(s=(""+r.value).length)&&(l=s);return new c(Math.ceil(l*Zn+d),Math.ceil(i.length*(Zn+8)))}if(e instanceof At){for(l=0,i=e.guide(),v=e.guide(),h=0,a=v.length;h<a;h++)g=v[h],l<(s=g.label.length)&&(l=s);return new c(Math.ceil(l*Zn+d),yo.visualizationSize.height)}throw new Error("Invalid axis type.")},Ae=function(t,n,e,i,r){var o,u,a,c,s;switch(t){case Wn:return a=oi(e,i),o=function(){return e},new f(t,n,a,e,i,r,o);case Sn:return u=ri(e,i),a=u[0],c=u[1],s=u[2],o=function(t){var n,e,i,r,o,u;for(null==t&&(t=10),n=c(t),r=s(t),o=[],e=0,i=r.length;e<i;e++)u=r[e],o.push(new En(u,n(u)));return o},new vt(t,n,a,e,i,r,o);default:throw new Error("Unhandled axis type ["+t+"].")}},tu=function(t,n){var e,i;return i=ci(n),e=Xo(t,i),sr(n,nn)?Zo(e,n):sr(n,Rt)?Ko(e,n):Go(e,n)},Ko=function(t,n){var e,i,r,o,u,a,c,s,l,f,h,d,p,v,g,m,w;return a=sr(n,Rt),o=a.index,c=diecut("table.lz-record","tbody","tr","th","td"),l=c[0],f=c[1],p=c[2],d=c[3],h=c[4],v=function(){var n,e;n=t.schema,e=[];for(u in n)w=n[u],m=w.format(o),i=function(){switch(w.type){case Wn:return void 0!==m?m:xt;case Sn:return void 0!==m?_.escape(m):xt;case qn:return void 0!==m?m:xt;default:throw new Error("Cannot render table cell of type "+w.type)}}(),e.push(p([d(_.escape(w.label)),h(i)]));return e}(),e=Do(l(f(v))),s=_.noop,g=_.noop,r=_.noop,new Ot(e,s,g,r)},Zo=function(t,n){var e,i,r,o,u,a,c,s,l,f,h,d,p,g,m,w,b,y,k,x,C,S,q,N,W;return s=sr(n,nn),N=function(){var n,e,r,o;if(s.fields.length){for(r=s.fields,o=[],n=0,e=r.length;n<e;n++)i=r[n],o.push(t.evaluate(i));return o}return t.vectors}(),W=_.flatten(N),a=diecut("table.lz-table","thead","tbody","tr","th","th.lz-number","td","td.lz-number"),f=a[0],w=a[1],h=a[2],k=a[3],m=a[4],b=a[5],d=a[6],p=a[7],y=function(){var t,n,e;for(e=[],t=0,n=W.length;t<n;t++)switch(q=W[t],q.type){case Sn:e.push(b(_.escape(q.label)));break;default:e.push(m(_.escape(q.label)))}return e}(),x=function(){var n,e,i,r;for(i=t.indices,r=[],n=0,e=i.length;n<e;n++)o=i[n],g=function(){var t,n,e;for(e=[],n=0,t=W.length;n<t;n++)switch(q=W[n],S=q.format(o),q.type){case Wn:e.push(d(void 0!==S?S:xt));break;case Sn:e.push(p(void 0!==S?_.escape(S):xt));break;case qn:e.push(d(void 0!==S?S:xt));break;default:throw new Error("Cannot render table cell of type "+q.type)}return e}(),r.push(k(g));return r}(),e=Do(f([w(k(y)),h(x)])),c=He(),l=c[0],C=c[1],u=c[2],$(e).on("click",function(n){var e,i,r,o,a;switch(i=$(n.target),e=i.parent(),e.prop("tagName").toLowerCase(),a=i.prop("tagName").toLowerCase(),o=i.index(),r=e.index(),a){case"td":u("cellselect",new v(W[o],t.indices[r]));break;case"th":u("headerselect",new ut(W[o]))}}),r=_.noop,new Ot(e,l,C,r)},Ne=function(t,n,e){return t.type===Sn?e?Se(t.domain,e):n.type===Wn?br(t.domain):t.domain:t.domain},Go=function(t,n){var i,r,o,u,a,l,f,h,d,p,v,g,m,w,b,y,k,x,C,S,q,N,W,T,O,E,Y,X,I,M;return b=_.map(ur(n,yt),function(n){var e,i;return i=function(){var i,r,o,u;for(o=n.position.coordinates,u=[],i=0,r=o.length;i<r;i++)e=o[i],u.push(t.evaluate(e.field));return u}(),ei(n,_.flatten(i))}),O=_.map(b,function(t){return t.space}),X=fr(O,function(t){return t.x}),I=fr(O,function(t){return t.y}),W=di(X,t.indices),T=di(I,t.indices),g=Ne(W,T,sr(n,V)),m=Ne(T,W,sr(n,D)),r=qe(W.type,g),o=qe(T.type,m),h=null!=(C=sr(n,c))?C:new c(void 0,void 0),p=null!=(S=h.width)?S:Math.min(yo.maxCanvasSize.width,o.width+r.height),d=null!=(q=h.height)?q:Math.min(yo.maxCanvasSize.height,r.width+o.height),v=new s(p,d,new wt(Math.min(.3*yo.maxCanvasSize.width,o.width),0,0,Math.min(.3*yo.maxCanvasSize.height,r.width))),u=v.regions.bottom,a=v.regions.left,k=new rn(0,u.width),x=T.type===Sn?new rn(a.height,0):new rn(0,a.height),l=Ae(W.type,Pe(X),g,k,u),f=Ae(T.type,Pe(I),m,x,a),w=_.map(b,function(n){var e,i,r,o,u;r=n.geometry,i=r.encode(t,n,l,f),e={};for(o in i)u=i[o],(null!=u?u.encode:void 0)&&(e[o]=u.encode);return new st(i,e,r.mask,r.highlight,r.render,r.select)}),i=_.map(ur(n,e),function(t){return ze(t)}),N=He(),E=N[0],Y=N[1],y=N[2],M=bi(v,t,w,i,l,f,y),M.render(),new Ot(M.viewport.container,E,Y,M.highlight)},lu=_i([F,Array,Function,function(t,n,e){return t.read(function(t,i){return t?e(t):lu(i,n,e)})}],[nt,Array,Function,function(t,n,e){var i;try{return e(null,tu(t,n))}catch(t){return i=t,e(i)}}]),qr=function(){return vi(".lz-tooltip {\n  background: #2c2c2c;\n  color: #fff;\n  font-size: 12px;\n}\n.lz-tooltip th, .lz-tooltip td {\n  padding: 0px 4px;\n  vertical-align: middle;\n}\n.lz-tooltip th {\n  text-align: left;\n}\n.lz-table th, .lz-table td {\n  padding: 0px 8px;\n  vertical-align: middle;\n}\n.lz-table tbody > tr:nth-child(odd) {\n  background-color: #f3f3f3;\n}\n.lz-table .lz-number {\n  text-align: right;\n}\n.lz-record th, .lz-record td {\n  padding: 0px 8px;\n  vertical-align: middle;\n}\n.lz-record th {\n  text-align: right;\n}\n.lz-record tbody > tr:nth-child(odd) {\n  background-color: #f3f3f3;\n}")},ne=null,Zn=18;Sr=function(){var t,n;return ne=t=Fe(new c(100,100)),n=t.context,n.font=yo.axisLabelFont,Zn=n.measureText("M").width},te=!1,Cr=function(){if(!te)return qr(),Sr(),te=!0},Mr=function(){var t,n;return n=1<=arguments.length?pu.call(arguments,0):[],(t=sr(n,F,nt))?(Cr(),function(e){var i;if(i=_.isElement(e)?function(t,n){return t?e.innerHTML=t.message:e.appendChild(n.element)}:_.isFunction(e)?e:void 0)return lu(t,_.without(n,t),i)}):function(){var t;return t=1<=arguments.length?pu.call(arguments,0):[],Mr.apply(null,n.concat(t))}},Mr.VERSION="999.999.999",Mr.settings=yo,Mr.bounds=jr,Mr.from=Kr,Mr.value=Wo,Mr.range=go,Mr.position=vo,Mr.fillColor=Gr,Mr.fillOpacity=Ur,Mr.strokeColor=Co,Mr.strokeOpacity=So,Mr.size=ko,Mr.width=Oo,Mr.height=no,Mr.lineWidth=uo,Mr.shape=_o,Mr.tooltip=No,Mr.factor=$r,Mr.stack=xo,Mr.groupBy=Qr,Mr.where=To,Mr.limit=ro,Mr.having=to,Mr.eq=Hr,Mr.ne=lo,Mr.lt=ao,Mr.gt=Zr,Mr.le=eo,Mr.ge=Jr,Mr.like=io,Mr.avg=Fr,Mr.count=Rr,Mr.max=co,Mr.min=so,Mr.sum=qo,Mr.parse=fo,Mr.point=po,Mr.rect=mo,Mr.path=ho,Mr.schema=wo,Mr.line=oo,Mr.select=bo,Mr.dataPackage=Br,Mr.computed=Lr,Mr.createFrame=Je,Mr.createVector=mi,Mr.createList=ni,Mr.createFactor=Ge,Mr.domainX_HACK=Vr,Mr.domainY_HACK=Dr,null!=("undefined"!=typeof module&&null!==module?module.exports:void 0)?module.exports=Mr:window.plot=Mr}).call(this);