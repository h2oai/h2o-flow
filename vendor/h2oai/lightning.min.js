(function(){var t,n,e,r,i,o,u,a,s,c,l,h,f,d,g,p,v,m,w,b,y,k,x,C,S,q,N,W,T,O,E,Y,X,A,M,I,P,F,j,z,R,B,V,L,D,G,U,H,J,K,Q,Z,tn,nn,en,rn,on,un,an,sn,cn,ln,hn,fn,dn,gn,pn,vn,mn,wn,bn,yn,_n,kn,xn,Cn,Sn,qn,Nn,Wn,Tn,On,En,Yn,Xn,An,Mn,In,Pn,Fn,jn,zn,Rn,Bn,Vn,Ln,Dn,Gn,Un,Hn,$n,Jn,Kn,Qn,Zn,te,ne,ee,re,ie,oe,ue,ae,se,ce,le,he,fe,de,ge,pe,ve,me,we,be,ye,_e,ke,xe,Ce,Se,qe,Ne,We,Te,Oe,Ee,Ye,Xe,Ae,Me,Ie,Pe,Fe,je,ze,Re,Be,Ve,Le,De,Ge,Ue,He,$e,Je,Ke,Qe,Ze,tr,nr,er,rr,ir,or,ur,ar,sr,cr,lr,hr,fr,dr,gr,pr,vr,mr,wr,br,yr,_r,kr,xr,Cr,Sr,qr,Nr,Wr,Tr,Or,Er,Yr,Xr,Ar,Mr,Ir,Pr,Fr,jr,zr,Rr,Br,Vr,Lr,Dr,Gr,Ur,Hr,$r,Jr,Kr,Qr,Zr,ti,ni,ei,ri,ii,oi,ui,ai,si,ci,li,hi,fi,di,gi,pi,vi,mi,wi,bi,yi,_i,ki,xi,Ci,Si,qi,Ni,Wi,Ti,Oi,Ei,Yi,Xi,Ai,Mi,Ii,Pi,Fi,ji,zi,Ri,Bi,Vi,Li,Di,Gi,Ui,Hi,$i,Ji,Ki,Qi,Zi,to,no,eo,ro,io,oo,uo,ao,so,co,lo,ho,fo,go,po,vo,mo,wo,bo,yo,_o,ko,xo,Co,So,qo,No,Wo,To,Oo,Eo,Yo,Xo,Ao,Mo,Io,Po,Fo,jo,zo,Ro,Bo,Vo,Lo,Do,Go,Uo,Ho,$o,Jo,Ko,Qo,Zo,tu,nu,eu,ru,iu,ou,uu,au,su,cu,lu,hu,fu,du,gu,pu,vu,mu,wu,bu,yu,_u,ku,xu,Cu,Su,qu,Nu,Wu,Tu,Ou,Eu,Yu,Xu,Au,Mu,Iu,Pu,Fu,ju,zu,Ru,Bu,Vu,Lu,Du,Gu,Uu,Hu,$u,Ju,Ku,Qu,Zu,ta,na,ea,ra,ia,oa,ua,aa,sa,ca,la,ha,fa,da=[].slice,ga=function(t,n){function e(){this.constructor=t}for(var r in n)pa.call(n,r)&&(t[r]=n[r]);return e.prototype=n.prototype,t.prototype=new e,t.__super__=n.prototype,t},pa={}.hasOwnProperty;ua=Math.PI,aa=2*ua,rn=ua/2,oa=1e-6,L=oa*oa,Mn=ua/180,F=180/ua,qe=Math.tan(30*Mn),se=Math.sqrt(3),y=16581375,Ee="transparent",Ce="undefined",be="null",pe="Boolean",xe="String",ye="Number",we="Function",_e="Object",ge="Array",de="Arguments",ve="Date",ke="RegExp",me="Error",ra=function(t){var n;if(n=Object.prototype.toString.call(t),null===t)return be;if(void 0===t)return Ce;if(t===!0||t===!1||"[object Boolean]"===n)return pe;switch(n){case"[object String]":return xe;case"[object Number]":return ye;case"[object Function]":return we;case"[object Object]":return _e;case"[object Array]":return ge;case"[object Arguments]":return de;case"[object Date]":return ve;case"[object RegExp]":return ke;case"[object Error]":return me;default:return n}},bn=function(){function t(t,n){this.match=t,this.func=n}return t}(),di=function(){var t,n;return t=function(n){var e,r,i;switch(r=ra(n)){case Ce:return function(t){return void 0===t};case be:return function(t){return null===t};case pe:return function(t){return n===Boolean||t===n};case xe:return function(t){return n===String||t===n};case ye:return function(t){return n===Number||t===n||_.isNaN(t)&&_.isNaN(n)};case ke:return function(){return n===RegExp};case Error:return function(){return n===Error};case ve:return function(t){return n===Date||t===n};case ge:return 1===n.length&&we===(i=ra(n[0]))?(e=t(n[0]),function(t){var n,r,i;if(ge!==ra(t))return!1;for(r=0,i=t.length;i>r;r++)if(n=t[r],!e(n))return!1;return!0}):function(t){return n===Array||er(n,t)};case we:return function(t){var e;return t instanceof n?!0:t&&t.constructor===n?!0:(e=ra(t),n===Boolean&&e===pe||n===String&&e===xe||n===Number&&e===ye)};case _e:return function(t){var e,r;for(e in n)if(r=n[e],t[e]!==r)return!1;return!0};default:return function(){return!1}}},n=function(n){var e;return e=_.map(n,t),function(t){var n,r,i,o;if(0===t.length)return!1;if(t.length!==e.length)return!1;for(r=i=0,o=e.length;o>i;r=++i)if(n=e[r],!n(t[r]))return!1;return!0}},function(){var t,e;return t=1<=arguments.length?da.call(arguments,0):[],e=_.map(t,function(t){var e,r,i;return r=2<=t.length?da.call(t,0,i=t.length-1):(i=0,[]),e=t[i++],new bn(n(r),e)}),function(){var t,n,r,i;for(t=1<=arguments.length?da.call(arguments,0):[],r=0,i=e.length;i>r;r++)if(n=e[r],n.match(t))return n.func.apply(null,t);throw new Error("Pattern match failure for args [ "+_.map(t,function(t){return""+t+":"+ra(t)}).join(", ")+" ]")}}}(),g=function(){function t(t,n){this.put=t,this.test=n}return t}(),wn=function(){function t(t,n){this.put=t,this.test=n}return t}(),re=function(){function t(t,n){this.width=t,this.height=n}return t}(),Fn=function(){function t(t,n,e,r){this.left=t,this.top=n,this.width=e,this.height=r}return t}(),Le=function(){function t(t,n,e,r,i,o,u){this.name=t,this.label=n,this.type=e,this.at=r,this.count=i,this.domain=o,this.format=u}return t}(),G=function(t){function n(t,e,r,i,o,u,a,s){this.valueAt=o,n.__super__.constructor.call(this,t,e,r,i,u,a,s)}return ga(n,t),n}(Le),dn=function(t){function n(t,e,r,i,o,u){n.__super__.constructor.call(this,t,e,_e,r,i,o,u)}return ga(n,t),n}(Le),nn=function(){function t(){}return t}(),Z=function(){function t(t,n,e,r,i,o,u,a,s){this.label=t,this.vectors=n,this.schema=e,this.indices=r,this.cube=i,this.at=o,this.evaluate=u,this.attach=a,this.metadata=s}return t}(),Ye=function(){function t(t){this.value=t}return t}(),yn=function(t){function n(t){n.__super__.constructor.call(this,t)}return ga(n,t),n}(Ye),ce=function(t){function n(t){n.__super__.constructor.call(this,t)}return ga(n,t),n}(Ye),P=function(t){function n(t){n.__super__.constructor.call(this,t)}return ga(n,t),n}(Ye),o=function(t){function n(t){n.__super__.constructor.call(this,t)}return ga(n,t),n}(Ye),H=function(){function t(t){this.name=t}return t}(),gn=function(t){function n(t){this.evaluate=t}return ga(n,t),n}(H),zn=function(t){function n(t){this.evaluate=t}return ga(n,t),n}(H),J=function(){function t(t,n){this.color=t,this.opacity=n}return t}(),le=function(){function t(t,n,e){this.color=t,this.opacity=n,this.size=e}return t}(),Se=function(){function t(t){this.fields=t}return t}(),Pn=function(){function t(t){this.index=t}return t}(),mn=function(){function t(){}return t}(),Wn=function(t){function n(t,n,e,r,i,o,u,a,s){this.position=t,this.shape=n,this.size=e,this.fillColor=r,this.fillOpacity=i,this.strokeColor=o,this.strokeOpacity=u,this.lineWidth=a,this.tooltip=s}return ga(n,t),n}(mn),xn=function(t){function n(t,n,e,r,i){this.position=t,this.strokeColor=n,this.strokeOpacity=e,this.lineWidth=r,this.tooltip=i}return ga(n,t),n}(mn),Bn=function(t){function n(t,n,e,r,i){this.position=t,this.strokeColor=n,this.strokeOpacity=e,this.lineWidth=r,this.tooltip=i}return ga(n,t),n}(mn),jn=function(t){function n(t,n,e,r,i,o,u,a,s){this.position=t,this.width=n,this.height=e,this.fillColor=r,this.fillOpacity=i,this.strokeColor=o,this.strokeOpacity=u,this.lineWidth=a,this.tooltip=s}return ga(n,t),n}(mn),vn=function(){function t(){}return t}(),On=function(t){function n(t,n,e,r,i,o,u,a,s,c,l){this.space=t,this.positionX=n,this.positionY=e,this.shape=r,this.size=i,this.fillColor=o,this.fillOpacity=u,this.strokeColor=a,this.strokeOpacity=s,this.lineWidth=c,this.tooltip=l,this.geometry=Tn}return ga(n,t),n}(vn),Dn=function(t){function n(t,n,e,r,i,o,u,a,s,c,l,h){this.space=t,this.q0=n,this.q1=e,this.q2=r,this.q3=i,this.qn=o,this.positionY=u,this.height=a,this.strokeColor=s,this.strokeOpacity=c,this.lineWidth=l,this.tooltip=h,this.geometry=Ln}return ga(n,t),n}(vn),Hn=function(t){function n(t,n,e,r,i,o,u,a,s,c,l,h){this.space=t,this.positionX=n,this.q0=e,this.q1=r,this.q2=i,this.q3=o,this.qn=u,this.width=a,this.strokeColor=s,this.strokeOpacity=c,this.lineWidth=l,this.tooltip=h,this.geometry=Un}return ga(n,t),n}(vn),m=function(t){function n(t,n,e,r,i,o,u,a,s,c,l){this.space=t,this.positionX=n,this.positionY1=e,this.positionY2=r,this.width=i,this.fillColor=o,this.fillOpacity=u,this.strokeColor=a,this.strokeOpacity=s,this.lineWidth=c,this.tooltip=l,this.geometry=v}return ga(n,t),n}(vn),i=function(t){function n(t,n,e,i,o,u,a,s,c,l,h){this.space=t,this.positionX1=n,this.positionX2=e,this.positionY=i,this.height=o,this.fillColor=u,this.fillOpacity=a,this.strokeColor=s,this.strokeOpacity=c,this.lineWidth=l,this.tooltip=h,this.geometry=r}return ga(n,t),n}(vn),Sn=function(t){function n(t,n,e,r,i,o,u){this.space=t,this.positionX=n,this.positionY=e,this.strokeColor=r,this.strokeOpacity=i,this.lineWidth=o,this.tooltip=u,this.geometry=Cn}return ga(n,t),n}(vn),Ne=function(t){function n(t,n,e,r,i,o,u,a){this.space=t,this.positionX=n,this.positionY=e,this.text=r,this.size=i,this.fillColor=o,this.fillOpacity=u,this.tooltip=a,this.geometry=TextGeometry}return ga(n,t),n}(vn),V=function(){function t(){}return t}(),Nn=function(t){function n(t,n,e,r,i,o,u,a,s,c,l,h){this.positionX=t,this.positionY=n,this.shape=e,this.size=r,this.fill=i,this.fillColor=o,this.fillOpacity=u,this.stroke=a,this.strokeColor=s,this.strokeOpacity=c,this.lineWidth=l,this.tooltip=h}return ga(n,t),n}(V),Vn=function(t){function n(t,n,e,r,i,o,u,a,s,c,l,h){this.q0=t,this.q1=n,this.q2=e,this.q3=r,this.qn=i,this.positionY=o,this.height=u,this.stroke=a,this.strokeColor=s,this.strokeOpacity=c,this.lineWidth=l,this.tooltip=h}return ga(n,t),n}(V),Gn=function(t){function n(t,n,e,r,i,o,u,a,s,c,l,h){this.positionX=t,this.q0=n,this.q1=e,this.q2=r,this.q3=i,this.qn=o,this.width=u,this.stroke=a,this.strokeColor=s,this.strokeOpacity=c,this.lineWidth=l,this.tooltip=h}return ga(n,t),n}(V),p=function(t){function n(t,n,e,r,i,o,u,a,s,c,l,h){this.positionX=t,this.positionY1=n,this.positionY2=e,this.width=r,this.fill=i,this.fillColor=o,this.fillOpacity=u,this.stroke=a,this.strokeColor=s,this.strokeOpacity=c,this.lineWidth=l,this.tooltip=h}return ga(n,t),n}(V),e=function(t){function n(t,n,e,r,i,o,u,a,s,c,l,h){this.positionX1=t,this.positionX2=n,this.positionY=e,this.height=r,this.fill=i,this.fillColor=o,this.fillOpacity=u,this.stroke=a,this.strokeColor=s,this.strokeOpacity=c,this.lineWidth=l,this.tooltip=h}return ga(n,t),n}(V),kn=function(t){function n(t,n,e,r,i,o,u){this.positionX=t,this.positionY=n,this.stroke=e,this.strokeColor=r,this.strokeOpacity=i,this.lineWidth=o,this.tooltip=u}return ga(n,t),n}(V),ae=function(){function t(t,n){this.x=t,this.y=n}return t}(),ue=function(){function t(t,n,e){this.type=t,this.vectors=n,this.domain=e}return t}(),n=function(){function t(){}return t}(),c=function(t){function n(t,n,e,r,i,o,u){this.type=t,this.label=n,this.scale=e,this.domain=r,this.range=i,this.rect=o,this.guide=u}return ga(n,t),n}(n),fn=function(t){function n(t,n,e,r,i,o,u){this.type=t,this.label=n,this.scale=e,this.domain=r,this.range=i,this.rect=o,this.guide=u}return ga(n,t),n}(n),We=function(){function t(t,n){this.value=t,this.label=n}return t}(),B=function(){function t(t,n){this.label=t,this.encode=n}return t}(),C=function(t){function n(t){this.value=t,n.__super__.constructor.call(this,"Constant",nr(this.value))}return ga(n,t),n}(B),Xe=function(t){function n(t,e,r){this.vector=r,n.__super__.constructor.call(this,t,e)}return ga(n,t),n}(B),Oe=function(t){function n(t){this.vectors=t,n.__super__.constructor.call(this,"tooltips")}return ga(n,t),n}(B),Yn=function(t){function n(t,e,r,i,o,u){this.domain=i,this.range=o,this.guide=u,n.__super__.constructor.call(this,t,e,r)}return ga(n,t),n}(Xe),b=function(t){function n(t,e,r,i,o,u){this.domain=i,this.range=o,this.guide=u,n.__super__.constructor.call(this,t,e,r)}return ga(n,t),n}(Xe),_n=function(t){function n(t,e,r,i,o,u){this.domain=i,this.range=o,this.guide=u,n.__super__.constructor.call(this,t,e,r)}return ga(n,t),n}(Xe),oe=function(t){function n(t,e,r,i,o,u){this.domain=i,this.range=o,this.guide=u,n.__super__.constructor.call(this,t,e,r)}return ga(n,t),n}(Xe),te=function(t){function n(t,e,r,i,o,u){this.domain=i,this.range=o,this.guide=u,n.__super__.constructor.call(this,t,e,r)}return ga(n,t),n}(Xe),d=function(){function t(){}return t}(),w=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return ga(n,t),n}(d),A=function(t){function n(t){this.field=t}return ga(n,t),n}(d),En=function(t){function n(t){this.coordinates=t}return ga(n,t),n}(d),K=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return ga(n,t),n}(d),Q=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return ga(n,t),n}(d),he=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return ga(n,t),n}(d),fe=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return ga(n,t),n}(d),ie=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return ga(n,t),n}(d),He=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return ga(n,t),n}(d),un=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return ga(n,t),n}(d),hn=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return ga(n,t),n}(d),Zn=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return ga(n,t),n}(d),Te=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return ga(n,t),n}(d),S=function(t){function n(t){this.value=t}return ga(n,t),n}(K),Ae=function(t){function n(t,n){this.field=t,this.range=n}return ga(n,t),n}(K),q=function(t){function n(t){this.value=t}return ga(n,t),n}(Q),Me=function(t){function n(t,n){this.field=t,this.range=n}return ga(n,t),n}(Q),E=function(t){function n(t){this.value=t}return ga(n,t),n}(he),ze=function(t){function n(t,n){this.field=t,this.range=n}return ga(n,t),n}(he),Y=function(t){function n(t){this.value=t}return ga(n,t),n}(fe),Re=function(t){function n(t,n){this.field=t,this.range=n}return ga(n,t),n}(fe),O=function(t){function n(t){this.value=t}return ga(n,t),n}(ie),je=function(t){function n(t,n){this.field=t,this.range=n}return ga(n,t),n}(ie),X=function(t){function n(t){this.value=t}return ga(n,t),n}(He),Ve=function(t){function n(t,n){this.field=t,this.range=n}return ga(n,t),n}(He),N=function(t){function n(t){this.value=t}return ga(n,t),n}(un),Ie=function(t){function n(t,n){this.field=t,this.range=n}return ga(n,t),n}(un),W=function(t){function n(t){this.value=t}return ga(n,t),n}(hn),Pe=function(t){function n(t,n){this.field=t,this.range=n}return ga(n,t),n}(hn),T=function(t){function n(t){this.value=t}return ga(n,t),n}(Zn),Fe=function(t){function n(t,n){this.field=t,this.range=n}return ga(n,t),n}(Zn),Be=function(t){function n(t){this.fields=t}return ga(n,t),n}(Te),D=function(){function t(t,n){this.min=t,this.max=n}return t}(),In=function(){function t(){}return t}(),l=function(t){function n(t){this.values=t}return ga(n,t),n}(In),Xn=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return ga(n,t),n}(In),Qn=function(t){function n(t,n){this.min=t,this.max=n}return ga(n,t),n}(Xn),R=function(t){function n(t,n,e){this.min=t,this.mid=n,this.max=e}return ga(n,t),n}(Xn),x=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return ga(n,t),n}(In),Kn=function(t){function n(t,n){this.min=t,this.max=n}return ga(n,t),n}(x),z=function(t){function n(t,n,e){this.min=t,this.mid=n,this.max=e}return ga(n,t),n}(x),tn=function(){function t(t,n,e,r,i){this.encode=t,this.mask=n,this.highlight=e,this.render=r,this.select=i}return t}(),I=function(){function t(t){this.read=t}return t}(),s=function(){function t(t,n,e,r){this.element=t,this.context=n,this.bounds=e,this.ratio=r}return t}(),De=function(){function t(t,n,e,r,i,o,u,a,s,c,l){this.box=t,this.container=n,this.baseCanvas=e,this.highlightCanvas=r,this.hoverCanvas=i,this.maskCanvas=o,this.clipCanvas=u,this.marquee=a,this.tooltip=s,this.mask=c,this.clip=l}return t}(),sn=function(){function t(t,n,e,r,i,o){this.encodings=t,this.encoders=n,this.mask=e,this.highlight=r,this.render=i,this.select=o}return t}(),Ge=function(){function t(t,n,e,r,i,o,u,a){this.viewport=t,this.frame=n,this.test=e,this.highlight=r,this.hover=i,this.selectAt=o,this.selectWithin=u,this.render=a}return t}(),qn=function(){function t(t,n,e){this.element=t,this.subscribe=n,this.unsubscribe=e}return t}(),u=function(){function t(t,n){this.width=t,this.height=n}return t}(),Rn=function(){function t(t,n,e,r,i){this.center=t,this.left=n,this.top=e,this.right=r,this.bottom=i}return t}(),pn=function(){function t(t,n,e,r){this.left=t,this.top=n,this.right=e,this.bottom=r}return t}(),a=function(){function t(t,n,e){var r;this.width=t,this.height=n,this.margin=e,this.regions=new Rn(r=new Fn(e.left,e.top,t-e.left-e.right,n-e.top-e.bottom),new Fn(0,e.top,e.left,r.height),new Fn(e.left+r.width,e.top,e.right,r.height),new Fn(e.left,0,r.width,e.top),new Fn(e.left,e.top+r.height,r.width,e.bottom))}return t}(),An=function(){function t(t,n,e,r,i){this.select=t,this.where=n,this.limit=e,this.group=r,this.having=i}return t}(),h=function(){function t(t,n){this.key=t,this.value=n}return t}(),t=new h(0,"All"),M=function(){function t(t,n,e,r){this.frame=t,this.hierarchy=n,this.cells=e,this.dimension=r}return t}(),cn=function(){function t(t,n,e){this.category=t,this.indices=n,this.children=e}return t}(),f=function(){function t(t,n){this.levels=t,this.indices=n}return t}(),U=function(){function t(t,n,e,r,i){this.at=t,this.valueAt=n,this.count=e,this.domain=r,this.format=i}return t}(),en=function(){function t(t){this.fields=t}return t}(),Jn=function(){function t(t,n,e){this.name=t,this.fields=n,this.func=e}return t}(),Ue=function(){function t(t,n){this.fields=t,this.predicate=n}return t}(),ln=function(){function t(t,n){this.offset=t,this.length=n}return t}(),on=function(){function t(t,n){this.fields=t,this.predicate=n}return t}(),an=function(){function t(t,n){this.vectors=t,this.index=n}return t}(),$n=function(){function t(t,n){this.vectors=t,this.indices=n}return t}(),j=function(){function t(t){this.vectors=t}return t}(),ir=function(t){var n;return n=parseFloat(t),_.isNaN(n)?void 0:n},rr=function(t){var n;return n=parseInt(t,10),_.isNaN(n)?void 0:n},or=function(t){return null!=t?t:void 0},na=function(t){return t*t},lr=function(t,n){return function(e){return t>e?t:e>n?n:e}},cr=lr(0,1),fi=8,qr=function(t){return t.slice(0)},oo=function(t,n){var e,r,i,o,u,a,s,c;for(i=[],o=0,a=t.length;a>o;o++)for(e=t[o],c=n(e),u=0,s=c.length;s>u;u++)r=c[u],i.push(r);return i},Wo=function(){var t,n;return n=arguments[0],t=2<=arguments.length?da.call(arguments,1):[],function(){return n.apply(null,t)}},nr=function(t){return function(){return t}},er=function(t,n){var e,r,i,o;if(t&&n&&t.length===n.length){for(e=i=0,o=t.length;o>i;e=++i)if(r=t[e],r!==n[e])return!1;return!0}return!1},no=function(){var t,n,e,r,i,o,u,a,s;for(n=arguments[0],i=2<=arguments.length?da.call(arguments,1):[],e=[],o=0,a=n.length;a>o;o++)for(t=n[o],u=0,s=i.length;s>u;u++)r=i[u],t instanceof r&&e.push(t);return e},io=function(){var t,n,e,r,i,o,u,a;for(n=arguments[0],r=2<=arguments.length?da.call(arguments,1):[],i=0,u=n.length;u>i;i++)for(t=n[i],o=0,a=r.length;a>o;o++)if(e=r[o],t instanceof e)return t},zr=function(t,n){return n>t?new D(t,n):new D(n,t)},_r=function(t){var n,e,r,i,o;for(e=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,i=0,o=t.length;o>i;i++)r=t[i],void 0!==r&&(e>=r&&(e=r),r>=n&&(n=r));return new D(e,n)},Cr=function(t){return function(n){return n.min>=t&&n.max>t?1:n.min<t&&n.max<=t?-1:0}},xr=Cr(0),mr=function(t,n){return new D(Math.min(t.min,n.min),Math.max(t.max,n.max))},po=function(t){return function(n){return n.min>t&&n.max>t?new D(t,n.max):n.min<t&&n.max<t?new D(n.min,t):n}},go=po(0),ki=function(t,n,e){return $.ajax({dataType:t,url:n,success:function(t){return e(null,t)},error:function(t,n,r){return e(r)}})},Ur=function(t,n,e){var r,i,o;return i=function(){return n.length},r=function(t){return n[t]},o=e?function(t){return e(n[t],t)}:r,new dn(t,t,r,i,n,o)},ci=function(t,n,e,r){return ha(t,t,n,e,r)},ha=function(t,n,e,r,i){var o,u,a,s;return a=_r(r),u=function(){return r.length},o=function(t){return r[t]},s=i?function(t){return i(r[t],t)}:o,new Le(t,n,e,o,u,a,s)},to=function(t,n,e){var r,i,o,u,a,s,c,l,f,d,g,p,v;for(v=0,g={},l=n(),o=new Array(l),u=function(){var t,n,r;for(r=[],t=0,n=e.length;n>t;t++)f=e[t],r.push(g[f]=new h(v++,f));return r}(),c=p=0;l>=0?l>p:p>l;c=l>=0?++p:--p)a=t(c),f=void 0!==a?a:"?",(i=g[f])||u.push(g[f]=i=new h(v++,f)),o[c]=i;return r=function(t){return o[t]},d=function(t){return o[t].value},s=function(t){return o[t].value},new U(r,d,n,u,s)},Rr=function(t,n,e,r){var i,o,u;return o=function(){return e.length},i=function(t){return e[t]},u=to(i,o,r||[]),new G(t,t,n,u.at,u.valueAt,o,u.domain,u.format)},Wr=function(t,n){var e,r,i,o,u,a;return i="All",r=new h(0,i),a=function(){return i},e=function(){return r},o=function(){return n},u=function(){return i},new G(t,t,xe,e,a,o,[r],u)},Lr=function(t,n,e,r,i){var o,u;return u=_.indexBy(n,function(t){return t.name}),o=new Z(t,n,u,e,r,null,null,null,i||{}),o.evaluate=function(n){var e,i,a,s;return i=_.isArray(n)?n:[n],a=function(){var a,c,l;for(l=[],a=0,c=i.length;c>a;a++)if(e=i[a],e instanceof gn)l.push(o.evaluate(e.evaluate(o)));else if(e instanceof zn){if(!r)throw new Error("Cannot compute aggregate ["+e.name+"] on an unaggregated frame.");l.push(o.evaluate(e.evaluate(o,r)))}else{if(!(e instanceof H))throw new Error("Cannot evaluate ["+n+"] on frame ["+t+"].");if(!(s=u[e.name]))throw new Error("Vector ["+e.name+"] does not exist in frame ["+t+"].");l.push(s)}return l}(),_.flatten(a)},o.attach=function(e){if(u[e.name])throw new Error("Cannot attach vector ["+e.name+"]: a vector by that name already exists in frame ["+t+"]");return n.push(e),u[e.name]=e,e},o.exists=function(t){return u[t]?!0:!1},o},Ei=function(t){var n,e,r,i,o,u,a,s,c,l,h;for(u=new Array(t.indices.length),e=_.map(t.vectors,function(t){return t instanceof G?t.valueAt:t.at}),h=t.indices,a=0,c=h.length;c>a;a++)for(r=h[a],u[r]=o=new Array(t.vectors.length),i=s=0,l=e.length;l>s;i=++s)n=e[i],o[i]=n(r);return u},ti=function(t){return new An(no(t,Jn),no(t,Ue),no(t,ln),no(t,en),no(t,on))},Vr=function(t){return _.map(t,function(t){return new H(t)})},Br=function(t){return new gn(function(n){var e,r,i,o,u,a,s,c;if(s=_.head(n.evaluate(t)),s instanceof G)return t;for(u=s.count(),e=s.at,i=new Array(u),o=c=0;u>=0?u>c:c>u;o=u>=0?++c:--c)void 0!==(a=e(o))&&(i[o]=""+a);return n.attach(r=Rr("factor("+s.label+")",xe,i)),[new H(r.name)]})},Tr=function(t){return new gn(function(n){return n.attach(Wr(t,n.indices.length)),[new H(t)]})},Ro=di([String,function(t){return Ro(new H(t))}],[H,function(t){return Br(t)}],[ce,function(t){var n;return n=t.value,Tr(n)}]),ui=function(t,n){return new gn(function(e){var r,i,o,u,a,s,c,l,h,f,d,g,p,v,m,w,b,y,k,x,C,S,q;if(b=_.head(e.evaluate(t)),b instanceof G)throw new Error("Cannot stack factor ["+b.label+"]: expecting vector.");for(d=b.count(),m=new Array(d),c=new Array(d),v="low("+b.name+", "+n+")",s="high("+b.name+", "+n+")",r=b.at,o=e.cube,n=Math.min(n,o.dimension),i=o.cells,p=a=0,y=new Array(n),q=e.indices,k=0,S=q.length;S>k;k++){for(l=q[k],g=i[l].levels,h=x=0;n>=0?n>x:x>n;h=n>=0?++x:--x)if(y[h]!==g[h].category){for(p=a=0,f=C=0;n>=0?n>C:C>n;f=n>=0?++C:--C)y[f]=g[f].category;break}w=r(l),0>w?(m[l]=p,c[l]=p+=w):(m[l]=a,c[l]=a+=w)}return u=function(t,n){return b.format(n)},e.attach(ha(v,b.name,b.type,m,u)),e.attach(ha(s,b.name,b.type,c,u)),[new H(v),new H(s)]})},wu=di([String,Number,function(t,n){return wu(new H(t),n)}],[H,Number,function(t,n){return ui(t,n)}]),Wu=function(t){var n;return n=lr(0,t.length-1),function(e){return t[n(-1+Math.round(e*t.length))]}},kr=function(t){var n,e,r,i,o,u,a,s;return s=function(){var n,e,r;for(r=[],n=0,e=t.length;e>n;n++)a=t[n],(a||0===a)&&r.push(a);return r}(),s.sort(function(t,n){return t-n}),e=s[0],n=s[s.length-1],u=Wu(s),r=u(.25),i=u(.5),o=u(.75),[e,r,i,o,n]},Je=function(t){var n,e,r,i,o;for(e=0,n=0,i=0,o=t.length;o>i;i++)r=t[i],void 0!==r&&(e+=r,n++);return e/n},Ke=function(t){var n,e,r,i;for(n=0,r=0,i=t.length;i>r;r++)e=t[r],void 0!==e&&n++;return n},Qe=function(t){var n,e,r,i;for(n=Number.NEGATIVE_INFINITY,r=0,i=t.length;i>r;r++)e=t[r],void 0!==e&&e>=n&&(n=e);return n},Ze=function(t){var n,e,r,i;for(n=Number.POSITIVE_INFINITY,r=0,i=t.length;i>r;r++)e=t[r],void 0!==e&&n>=e&&(n=e);return n},tr=function(t){var n,e,r,i;for(n=0,r=0,i=t.length;i>r;r++)e=t[r],void 0!==e&&(n+=e);return n},Nr=function(t,n,e,r,i){return new zn(function(o,u){var a,s,c,l,h,f,d,g,p,v,m,w,b,y,k,x;if(d=n+"("+t.name+")",o.exists(d))return new H(d);for(v=_.head(u.frame.evaluate(t)),a=v.at,l=new Array(u.cells.length),k=u.cells,f=m=0,b=k.length;b>m;f=++m){for(s=k[f],p=[],x=s.indices,w=0,y=x.length;y>w;w++)h=x[w],void 0!==(g=a(h))&&p.push(g);l[f]=i(p)}return o.attach(c=ci(d,e,l,r)),[new H(c.name)]})},Mo=function(t,n,e,r){return di([String,function(i){return Nr(new H(i),t,n,e,r)}],[H,function(i){return Nr(i,t,n,e,r)}])},Po=Mo("count",ye,_.identity,Ke),Io=Mo("avg",ye,_.identity,Je),eu=Mo("max",ye,_.identity,Qe),ru=Mo("min",ye,_.identity,Ze),_u=Mo("sum",ye,_.identity,tr),Go=function(){var t,n,e;return n=1<=arguments.length?da.call(arguments,0):[],e=function(){var e,r,i;for(i=[],e=0,r=n.length;r>e;e++)if(t=n[e],t instanceof H)i.push(t);else{if(!_.isString(t))throw new Error("Cannot group by ["+t+"]");i.push(new H(t))}return i}(),new en(e)},Xo=di([String,[String],Function,function(t,n,e){return new Jn(t,Vr(n),e)}]),pu=function(){var t,n,e,r;return e=arguments[0],n=3<=arguments.length?da.call(arguments,1,r=arguments.length-1):(r=1,[]),t=arguments[r++],Xo(e,n.length?n:[e],t)},Ao=di([[String],Function,function(t,n){return new Ue(Vr(t),n)}]),Su=function(){var t,n,e;return n=2<=arguments.length?da.call(arguments,0,e=arguments.length-1):(e=0,[]),t=arguments[e++],Ao(n,t)},Zo=di([Number,Number,function(t,n){return new ln(t,n)}],[Number,function(t){return new ln(0,t)}]),Yo=di([[String],Function,function(t,n){return new on(Vr(t),n)}],[[H],Function,function(t,n){return new on(t,n)}]),Ho=function(){var t,n,e;return n=2<=arguments.length?da.call(arguments,0,e=arguments.length-1):(e=0,[]),t=arguments[e++],Yo(n,t)},zo=function(t){return function(n){return n===t}},iu=function(t){return function(n){return n!==t}},nu=function(t){return function(n){return t>n}},Uo=function(t){return function(n){return n>t}},Ko=function(t){return function(n){return t>=n}},Do=function(t){return function(n){return n>=t}},Qo=function(t){if(ke!==ra(t))throw new Error("like ["+t+"]: expecting RegExp");return function(n){return t.test(n)}},Jo=function(){var t;return t=1<=arguments.length?da.call(arguments,0):[],function(n){var e,r,i;for(r=0,i=t.length;i>r;r++)if(e=t[r],e===n)return!0;return!1}},ou=function(){var t;return t=1<=arguments.length?da.call(arguments,0):[],function(n){var e,r,i;for(r=0,i=t.length;i>r;r++)if(e=t[r],e===n)return!1;return!0}},Tu=function(n,e){var r,i,o,u,a,s,c,l,h,f,d;return c=e.where.length?Lr(n.label,n.vectors,ro(n,e.where)):n,f=e.group.length?(s=oo(e.group,function(t){return t.fields}),u=function(){var t,n,e;for(e=[],t=0,n=s.length;n>t;t++){if(a=s[t],d=_.head(c.evaluate(a)),!(d instanceof G))throw new Error("Cannot group by ["+a.name+"]: not a Factor.");e.push(d)}return e}(),l={0:new cn(t,c.indices,{})},ur(l,u,0),i=[],dr(l[0].children,s.length-1,i,0,new Array(s.length)),o=new M(c,l,i,s.length),r=$e(c.label+"'",o,u),e.having.length?Lr(r.label,r.vectors,ro(r,e.having),r.cube):r):c,e.limit.length?(h=e.limit[e.limit.length-1],Lr(f.label,f.vectors,f.indices.slice(h.offset,h.offset+h.length))):f},ro=function(t,n){var e,r,i,o,u,a,s,c,l,h,f,d,g,p,v,m;for(f=t.indices,h=0,p=n.length;p>h;h++){for(c=n[h],a=[],l=function(){var n,e,r,i;for(r=c.fields,i=[],n=0,e=r.length;e>n;n++)o=r[n],i.push(_.head(t.evaluate(o)));return i}(),i=_.map(l,function(t){return t instanceof G?t.valueAt:t.at}),d=0,v=f.length;v>d;d++){for(u=f[d],e=new Array(l.length),s=g=0,m=i.length;m>g;s=++g)r=i[s],e[s]=r(u);c.predicate.apply(null,e)&&a.push(u)}f=a}return f},$e=function(t,n,e){var r,i,o;return r=_.range(n.cells.length),o=function(){var t,r,o;for(o=[],i=t=0,r=n.dimension;r>=0?r>t:t>r;i=r>=0?++t:--t)o.push(Zi(n,e[i],i));return o}(),Lr(t,o,r,n)},ur=function(t,n,e){var r,i,o,u,a,s,c,l,h,f;r=n[e].at;for(s in t){for(c=t[s],u=c.children,f=c.indices,l=0,h=f.length;h>l;l++)a=f[l],i=r(a),(o=u[i.key])||(u[i.key]=o=new cn(i,[],{})),o.indices.push(a);e<n.length-1&&ur(u,n,e+1)}},dr=function(t,n,e,r,i){var o,u;for(o in t)u=t[o],i[r]=u,r===n?e.push(new f(qr(i),u.indices)):dr(u.children,n,e,r+1,i)},Zi=function(t,n,e){var r,i,o,u,a,s,c,l,h,f,d,g,p;for(a=new Array(t.cells.length),s={},c=[],p=t.cells,h=d=0,g=p.length;g>d;h=++d)o=p[h],a[h]=i=o.levels[e].category,s[i.value]||(s[i.value]=i,c.push(i));return r=function(t){return a[t]},f=function(t){return a[t].value},l=function(t){return a[t].value},u=function(){return a.length},new G(n.label,n.label,n.type,r,f,u,c,l)},k={c10:["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],c20:["#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"],c20b:["#393b79","#5254a3","#6b6ecf","#9c9ede","#637939","#8ca252","#b5cf6b","#cedb9c","#8c6d31","#bd9e39","#e7ba52","#e7cb94","#843c39","#ad494a","#d6616b","#e7969c","#7b4173","#a55194","#ce6dbd","#de9ed6"],c20c:["#3182bd","#6baed6","#9ecae1","#c6dbef","#e6550d","#fd8d3c","#fdae6b","#fdd0a2","#31a354","#74c476","#a1d99b","#c7e9c0","#756bb1","#9e9ac8","#bcbddc","#dadaeb","#636363","#969696","#bdbdbd","#d9d9d9"]},To=function(t){return t>10?k.c20:k.c10},fr=function(t){var n,e,r,i;return i=t.rgb(),r=i[0],e=i[1],n=i[2],chroma.rgb(r,e,n)},pr=function(t){return t.css()},vr=function(t,n){return fr(t).alpha(n).css()},xi=function(t,n,e,r){var i;return i=Math.sqrt(r/ua),t.beginPath(),t.arc(n,e,i,0,aa,!1),t.closePath()},qi=function(t,n,e,r){var i;return i=.5*Math.sqrt(r),t.save(),t.translate(n,e),t.beginPath(),t.moveTo(i,i),t.lineTo(-i,i),t.lineTo(-i,-i),t.lineTo(i,-i),t.closePath(),t.restore()},Ci=function(t,n,e,r){var i,o;return i=.5*Math.sqrt(r/5),o=3*i,t.save(),t.translate(n,e),t.beginPath(),t.moveTo(o,i),t.lineTo(i,i),t.lineTo(i,o),t.lineTo(-i,o),t.lineTo(-i,i),t.lineTo(-o,i),t.lineTo(-o,-i),t.lineTo(-i,-i),t.lineTo(-i,-o),t.lineTo(i,-o),t.lineTo(i,-i),t.lineTo(o,-i),t.closePath(),t.restore()},Si=function(t,n,e,r){var i,o;return o=Math.sqrt(r/(2*qe)),i=o*qe,t.save(),t.translate(n,e),t.beginPath(),t.moveTo(i,0),t.lineTo(0,o),t.lineTo(-i,0),t.lineTo(0,-o),t.closePath(),t.restore()},Oi=function(t,n,e,r){var i,o;return i=Math.sqrt(r/se),o=i*se/2,t.save(),t.translate(n,e),t.beginPath(),t.moveTo(0,-o),t.lineTo(i,o),t.lineTo(-i,o),t.closePath(),t.restore()},Ni=function(t,n,e,r){var i,o;return i=Math.sqrt(r/se),o=i*se/2,t.save(),t.translate(n,e),t.beginPath(),t.moveTo(0,o),t.lineTo(i,-o),t.lineTo(-i,-o),t.closePath(),t.restore()},Ti=function(t,n,e,r){var i,o;return o=Math.sqrt(r/se),i=o*se/2,t.save(),t.translate(n,e),t.beginPath(),t.moveTo(i,0),t.lineTo(-i,o),t.lineTo(-i,-o),t.closePath(),t.restore()},Wi=function(t,n,e,r){var i,o;return o=Math.sqrt(r/se),i=o*se/2,t.save(),t.translate(n,e),t.beginPath(),t.moveTo(-i,0),t.lineTo(i,-o),t.lineTo(i,o),t.closePath(),t.restore()},ee={circle:xi,square:qi,cross:Ci,diamond:Si,triangleUp:Oi,triangleDown:Ni,triangleLeft:Wi,triangleRight:Ti},ne={c8:["circle","square","cross","diamond","triangleUp","triangleDown","triangleLeft","triangleRight"]},Oo=function(){return ne.c8},$u=function(t){return function(n){return void 0!==n?t(n):void 0}},Jr=function(t,n){var e;return e=d3.scale.linear().domain([t.min,t.max]).range([n.min,n.max]).nice(),[$u(e),e.tickFormat,e.ticks]},Kr=function(t,n){var e,r,i,o,u,a,s;for(a=0,o={},u=0,s=t.length;s>u;u++)e=t[u],o[e.key]=a++;return r=(n.max-n.min)/t.length/2,i=n.min,$u(function(t){return i+2*o[t.key]*r+r})},Xr=function(t,n){var e,r;return r=n.values,e=r.length,$u(function(t){return r[t.key%e]})},ii=function(t,n){return $u(d3.scale.linear().domain([t.min,t.max]).range([n.min,n.max]))},Fr=function(t,n){return $u(d3.scale.linear().domain([t.min,t.mid,t.max]).range([n.min,n.mid,n.max]))},ri=function(t,n){return $u(chroma.scale([n.min,n.max]).domain([t.min,t.max]).mode("lch"))},Pr=function(t,n){var e,r;return e=chroma.scale([n.min,n.mid]).domain([t.min,t.mid]).mode("lch"),r=chroma.scale([n.mid,n.max]).domain([t.mid,t.max]).mode("lch"),function(n){return void 0!==n?n<t.mid?e(n):r(n):void 0}},Mr=di([Qn,x,ri],[R,x,Pr]),Gr=di([Qn,Qn,ii],[R,R,Fr]),ar=function(t){var n;return n=t.toString(16),1===n.length?"0"+n:n},Ar=function(t){var n,e,r,i;return n=t.context,r=t.ratio,e=function(){return"#fff"},i=function(t,e){var i,o,u,a,s;return s=n.getImageData(t*r,e*r,1,1).data,a=s[0],u=s[1],o=s[2],i=s[3],255===a&&255===u&&255===o&&255===i
},new g(e,i)},$r=function(t){var n,e,r,i,o,u;return n=t.context,i=t.ratio,u=0,e={},r=function(t){var n,r,i,o;return r=u++,u>=y&&(u=0),e[r]=t,o=r>>16&255,i=r>>8&255,n=255&r,"#"+ar(o)+ar(i)+ar(n)},o=function(t,r){var o,u,a,s,c,l;return l=n.getImageData(t*i,r*i,1,1).data,c=l[0],s=l[1],u=l[2],o=l[3],255===o?(a=(c<<16)+(s<<8)+u,e[a]):void 0},new wn(r,o)},Vi=function(t,n){var e,r,i,o,u,a,s;return s=t.scale,r=t.domain,a=t.range,o=t.guide,u=n.label,e=n.at,i=function(t){return s(e(t))},new Yn(u,i,n,r,a,o)},Ii=function(t,n){return new C(t.scale(n))},Mi=function(t,n){var e,r,i,o,u,a,s;return n instanceof Ae||n instanceof ze?(s=_.head(t.evaluate(n.field)),s instanceof G?(n.range||(n.range=new l(To(s.domain.length))),u=Xr(s.domain,n.range),e=s.at,i=function(t){return chroma(u(e(t)))},new b(s.label,i,s,s.domain,n.range,null)):(r=function(){switch(xr(s.domain)){case 1:return new Qn(s.domain.min,s.domain.max);case-1:return new Qn(s.domain.min,s.domain.max);default:return new R(s.domain.min,0,s.domain.max)}}(),a=xr(r),o=n.range?n.range instanceof z?r instanceof Qn?1===a?new Kn(n.range.mid,n.range.max):new Kn(n.range.min,n.range.mid):n.range:(r instanceof R?r=new Qn(r.min,r.max):void 0,n.range):r instanceof Qn?1===a?new Kn("#deebf7","#3182bd"):new Kn("#e6550d","#fee6ce"):new z("#fc8d59","#ffffbf"),u=Mr(r,o),e=s.at,i=function(t){return u(e(t))},new b(s.label,i,s,r,o,null))):new C(n.value)},zi=function(t,n){var e,r,i,o,u,a;if(n instanceof Me||n instanceof Re){if(a=_.head(t.evaluate(n.field)),a instanceof G)throw new Error("Could not encode opacity. Vector ["+a.label+"] is a Factor.");return r=new Qn(a.domain.min,a.domain.max),o=n.range?new Qn(cr(n.range.min),cr(n.range.max)):n.range=new Qn(.05,1),u=Gr(r,o),e=a.at,i=function(t){return u(e(t))},new _n(a.label,i,a,r,o,null)}return new C(cr(n.value))},$i=function(t,n){var e,r;return t&&n?(e=t.encode,r=n.encode,new Xe("("+t.label+", "+n.label+")",function(t){var n,i;return n=e(t),i=r(t),i>=0&&1>i?vr(n,i):pr(n)})):void 0},Qi=function(t,n){return function(e,r,i){var o,u,a,s,c,l;if(r instanceof t){if(l=_.head(e.evaluate(r.field)),l instanceof G)throw new Error("Could not encode size. Vector ["+l.label+"] is a Factor.");return u=new Qn(l.domain.min,l.domain.max),s=r.range?new Qn(cr(r.range.min),cr(r.range.max)):r.range=new Qn(.05,1),c=Gr(u,s),o=l.at,a=function(t){return i*c(o(t))},new n(l.label,a,u,s,null)}return new C(i*cr(r.value))}},Ui=Qi(je,oe),Ki=Qi(Ve,oe),Fi=Qi(Ie,oe),Yi=function(t,n){var e,r,i,o,u,a;if(n instanceof je){if(a=_.head(t.evaluate(n.field)),a instanceof G)throw new Error("Could not encode size. Vector ["+a.label+"] is a Factor.");return r=new Qn(a.domain.min,a.domain.max),o=n.range?new Qn(na(n.range.min),na(n.range.max)):n.range=new Qn(na(fi),na(30)),u=Gr(r,o),e=a.at,i=function(t){return u(e(t))},new oe(a.label,i,a,r,o,null)}return new C(na(n.value))},ji=function(t,n){var e,r,i,o,u,a;if(n instanceof Pe){if(a=_.head(t.evaluate(n.field)),a instanceof G)throw new Error("Could not encode lineWidth. Vector ["+a.label+"] is a Factor.");return r=new Qn(a.domain.min,a.domain.max),o=n.range?new Qn(n.range.min,n.range.max):n.range=new Qn(1.5,15),u=Gr(r,o),e=a.at,i=function(t){return u(e(t))},new oe(a.label,i,a,r,o,null)}return new C(n.value)},Gi=function(t,n){var e,r,i,o;if(n instanceof Fe){if(o=_.head(t.evaluate(n.field)),!(o instanceof G))throw new Error("Could not encode shape. Vector ["+o.label+"] is not a Factor.");return n.range||(n.range=new l(Oo(o.domain.length))),i=Xr(o.domain,n.range),e=o.at,r=function(t){return ee[i(e(t))]},new te(o.label,r,o,o.domain,n.range,null)}return new C(ee[n.value]||ee.circle)},Ji=function(t,n){var e,r;return n?(r=function(){var r,i,o,u;for(o=n.fields,u=[],r=0,i=o.length;i>r;r++)e=o[r],u.push(_.head(t.evaluate(e)));return u}(),new Oe(r)):void 0},vo=function(t,n){return[null!=t?t:new S(chroma(_.head(k.c10))),null!=n?n:new q(1)]},wo=function(t,n,e){return[null!=t?t:new E(chroma(_.head(k.c10))),null!=n?n:new Y(1),null!=e?e:new W(1.5)]},mo=function(t,n,e,r,i,o,u){var a,s,c,l;return a=t||n,s=e||r||i,a||s||(o&&(a=!0),u&&(s=!0)),a&&(c=vo(t,n),t=c[0],n=c[1]),s&&(l=wo(e,r,i),e=l[0],r=l[1],i=l[2]),[t,n,e,r,i]},Pi=function(t,n){var e,r;return n.fillColor||n.fillOpacity?[e=Mi(t,n.fillColor),r=zi(t,n.fillOpacity),$i(e,r)]:[]},Hi=function(t,n){var e,r;return n.strokeColor||n.strokeOpacity||n.lineWidth?[e=Mi(t,n.strokeColor),r=zi(t,n.strokeOpacity),$i(e,r),ji(t,n.lineWidth)]:[]},hr=function(t,n,e,r,i){return t.beginPath(),t.rect(n,e,r,i),t.clip()},_i=function(t,n,e){return t.lineWidth=e,t.strokeStyle=n,t.stroke()},pi=function(t,n){return t.fillStyle=n,t.fill()},vi=function(t,n,e,r,i){return t.beginPath(),t.moveTo(n,e),t.lineTo(r,i),t.stroke()},wi=function(t,n,e,r,i){return t.beginPath(),r>e?t.rect(n-i/2,e,i,r-e):t.rect(n-i/2,r,i,e-r),t.closePath()},mi=function(t,n,e,r,i){return t.beginPath(),e>n?t.rect(n,r-i/2,e-n,i):t.rect(e,r-i/2,n-e,i),t.closePath()},bi=function(t,n,e,r,i,o,u,a,s,c){var l,h;return void 0!==n&&void 0!==e&&void 0!==r&&void 0!==i&&void 0!==o&&void 0!==u&&void 0!==a&&void 0!==s&&void 0!==c?(t.strokeStyle=s,t.lineWidth=c,mi(t,e,i,u,a),t.stroke(),l=a/2,h=a/4,vi(t,r,u-l,r,u+l),vi(t,e,u,n,u),vi(t,i,u,o,u),vi(t,n,u-h,n,u+h),vi(t,o,u-h,o,u+h)):void 0},yi=function(t,n,e,r,i,o,u,a,s,c){var l,h;return void 0!==n&&void 0!==e&&void 0!==r&&void 0!==i&&void 0!==o&&void 0!==u&&void 0!==a&&void 0!==s&&void 0!==c?(t.strokeStyle=s,t.lineWidth=c,wi(t,n,r,o,a),t.stroke(),l=a/2,h=a/4,vi(t,n-l,i,n+l,i),vi(t,n,r,n,e),vi(t,n,o,n,u),vi(t,n-h,e,n+h,e),vi(t,n-h,u,n+h,u)):void 0},Zr=function(t,n){var e,r,i,o,u,a,s,c,l,h,f,d,g;return o=n[0],u=n[1],c=new ae([o],[u]),a=null!=(f=t.shape)?f:new T("circle"),s=null!=(d=t.size)?d:new O(fi),g=mo(t.fillColor,t.fillOpacity,t.strokeColor,t.strokeOpacity,t.lineWidth,!1,!0),e=g[0],r=g[1],l=g[2],h=g[3],i=g[4],new On(c,o,u,a,s,e,r,l,h,i,t.tooltip)},Bi=function(t,n,e,r){var i,o,u,a,s,c,l,h,f,d,g,p,v,m;return s=Vi(e,n.positionX),c=Vi(r,n.positionY),l=Gi(t,n.shape),h=Yi(t,n.size),v=Pi(t,n),o=v[0],u=v[1],i=v[2],m=Hi(t,n),d=m[0],g=m[1],f=m[2],a=m[3],p=Ji(t,n.tooltip),new Nn(s,c,l,h,i,o,u,f,d,g,a,p)},lo=function(t,n,e){var r,i,o,u,a,s,c,l,h,f,d,g,p,v;for(u=n.positionX,a=n.positionY,s=n.shape,c=n.size,r=n.fill,l=n.stroke,o=n.lineWidth,e.save(),d=0,p=t.length;p>d;d++)i=t[d],h=u(i),f=a(i),void 0!==h&&void 0!==f&&(s(i)(e,h,f,c(i)),e.lineWidth=2+(l?o(i):1),e.stroke());for(e.restore(),e.save(),e.globalCompositeOperation="destination-out",e.fillStyle=e.strokeStyle="black",g=0,v=t.length;v>g;g++)i=t[g],h=u(i),f=a(i),void 0!==h&&void 0!==f&&(s(i)(e,h,f,c(i)),l&&(e.lineWidth=o(i),e.stroke()),r&&e.fill());return e.restore()},So=function(t,n,e,r){var i,o,u,a,s,c,l,h,f,d,g,p;for(a=n.positionX,s=n.positionY,c=n.shape,l=n.size,h=n.stroke,o=n.lineWidth,e.save(),g=0,p=t.length;p>g;g++)i=t[g],f=a(i),d=s(i),void 0!==f&&void 0!==d&&(u=r.put(i),c(i)(e,f,d,l(i)),e.fillStyle=u,e.fill(),h&&(e.lineWidth=o(i),e.strokeStyle=u,e.stroke()));return e.restore()},Vu=function(t,n,e){var r,i,o,u,a,s,c,l,h,f,d,g;for(u=n.positionX,a=n.positionY,s=n.shape,c=n.size,r=n.fill,l=n.stroke,o=n.lineWidth,e.save(),d=0,g=t.length;g>d;d++)i=t[d],h=u(i),f=a(i),void 0!==h&&void 0!==f&&(s(i)(e,h,f,c(i)),l&&(e.lineWidth=o(i),e.strokeStyle=l(i),e.stroke()),r&&(e.fillStyle=r(i),e.fill()));return e.restore()},Qu=function(t,n,e,r,i,o){var u,a,s,c,l,h,f,d;for(a=n.positionX,s=n.positionY,c=[],f=0,d=t.length;d>f;f++)u=t[f],l=a(u),h=s(u),void 0!==l&&void 0!==h&&l>=e&&i>=l&&h>=r&&o>=h&&c.push(u);return c},ea=function(t){return _.map(t,function(t){return t.type}).join(", ")},ni=function(t,n){var e,r,o,u,a,s,c,l,h,f,d,g,p,v,w,b,y,_,k,x,C,S,q;switch(v=ea(n)){case"String, Number":return a=n[0],f=n[1],d=new ae([a],[f]),w=null!=(b=t.width)?b:new X(.8),y=mo(t.fillColor,t.fillOpacity,t.strokeColor,t.strokeOpacity,t.lineWidth,!0,!1),e=y[0],r=y[1],g=y[2],p=y[3],u=y[4],new m(d,a,void 0,f,w,e,r,g,p,u,t.tooltip);case"String, Number, Number":return a=n[0],h=n[1],f=n[2],d=new ae([a],[h,f]),w=null!=(_=t.width)?_:new X(.8),k=mo(t.fillColor,t.fillOpacity,t.strokeColor,t.strokeOpacity,t.lineWidth,!0,!1),e=k[0],r=k[1],g=k[2],p=k[3],u=k[4],new m(d,a,h,f,w,e,r,g,p,u,t.tooltip);case"Number, String":return c=n[0],l=n[1],d=new ae([c],[l]),o=null!=(x=t.height)?x:new N(.8),C=mo(t.fillColor,t.fillOpacity,t.strokeColor,t.strokeOpacity,t.lineWidth,!0,!1),e=C[0],r=C[1],g=C[2],p=C[3],u=C[4],new i(d,void 0,c,l,o,e,r,g,p,u,t.tooltip);case"Number, Number, String":return s=n[0],c=n[1],l=n[2],d=new ae([s,c],[l]),o=null!=(S=t.height)?S:new N(.8),q=mo(t.fillColor,t.fillOpacity,t.strokeColor,t.strokeOpacity,t.lineWidth,!0,!1),e=q[0],r=q[1],g=q[2],p=q[3],u=q[4],new i(d,s,c,l,o,e,r,g,p,u,t.tooltip);default:throw new Error("Cannot create rect marks with vectors of type ["+v+"]")}},Ai=function(t,n,e,r){var i,o,u,a,s,c,l,h,f,d,g,v,m,w;return s=Vi(e,n.positionX),c=n.positionY1?Vi(r,n.positionY1):Ii(r,0),l=Vi(r,n.positionY2),v=Ui(t,n.width,e.rect.width/e.domain.length),m=Pi(t,n),o=m[0],u=m[1],i=m[2],w=Hi(t,n),f=w[0],d=w[1],h=w[2],a=w[3],g=Ji(t,n.tooltip),new p(s,c,l,v,i,o,u,h,f,d,a,g)},Xi=function(t,n,r,i){var o,u,a,s,c,l,h,f,d,g,p,v,m,w,b,y,_,k;switch(n.space.x.length){case 1:w=n.space.x[0],l=Ii(r,0),h=Vi(r,w);break;default:y=n.space.x,m=y[0],w=y[1],l=Vi(r,m),h=Vi(r,w)}return b=n.space.y[0],f=Vi(i,b),s=Ui(t,n.height,i.rect.height/i.domain.length),_=Pi(t,n),u=_[0],a=_[1],o=_[2],k=Hi(t,n),g=k[0],p=k[1],d=k[2],c=k[3],v=Ji(t,n.tooltip),new e(l,h,f,s,o,u,a,d,g,p,c,v)},so=function(t,n,e){var r,i,o,u,a,s,c,l,h,f,d,g,p,v,m,w;for(u=n.positionX,a=n.positionY1,s=n.positionY2,h=n.width,r=n.fill,c=n.stroke,o=n.lineWidth,e.save(),p=0,m=t.length;m>p;p++)i=t[p],f=u(i),d=a(i),g=s(i),l=h(i),void 0!==f&&void 0!==d&&void 0!==g&&void 0!==l&&(wi(e,f,d,g,l),e.lineWidth=2+(c?o(i):1),e.stroke());for(e.restore(),e.save(),e.globalCompositeOperation="destination-out",e.fillStyle=e.strokeStyle="black",v=0,w=t.length;w>v;v++)i=t[v],f=u(i),d=a(i),g=s(i),l=h(i),void 0!==f&&void 0!==d&&void 0!==g&&void 0!==l&&(wi(e,f,d,g,l),c&&(e.lineWidth=o(i),e.stroke()),r&&e.fill());return e.restore()},ao=function(t,n,e){var r,i,o,u,a,s,c,l,h,f,d,g,p,v,m,w;for(s=n.positionX1,c=n.positionX2,l=n.positionY,o=n.height,r=n.fill,h=n.stroke,a=n.lineWidth,e.save(),p=0,m=t.length;m>p;p++)u=t[p],f=s(u),d=c(u),g=l(u),i=o(u),void 0!==f&&void 0!==d&&void 0!==g&&void 0!==i&&(mi(e,f,d,g,i),e.lineWidth=2+(h?a(u):1),e.stroke());for(e.restore(),e.save(),e.globalCompositeOperation="destination-out",e.fillStyle=e.strokeStyle="black",v=0,w=t.length;w>v;v++)u=t[v],f=s(u),d=c(u),g=l(u),i=o(u),void 0!==f&&void 0!==d&&void 0!==g&&void 0!==i&&(mi(e,f,d,g,i),h&&(e.lineWidth=a(u),e.stroke()),r&&e.fill());return e.restore()},xo=function(t,n,e,r){var i,o,u,a,s,c,l,h,f,d,g,p,v,m;for(a=n.positionX,s=n.positionY1,c=n.positionY2,f=n.width,l=n.stroke,o=n.lineWidth,e.save(),v=0,m=t.length;m>v;v++)i=t[v],d=a(i),g=s(i),p=c(i),h=f(i),void 0!==d&&void 0!==g&&void 0!==p&&void 0!==h&&(u=r.put(i),wi(e,d,g,p,h),pi(e,u),l&&_i(e,u,o(i)));return e.restore()},ko=function(t,n,e,r){var i,o,u,a,s,c,l,h,f,d,g,p,v,m;for(c=n.positionX1,l=n.positionX2,h=n.positionY,o=n.height,f=n.stroke,a=n.lineWidth,e.save(),v=0,m=t.length;m>v;v++)u=t[v],d=c(u),g=l(u),p=h(u),i=o(u),void 0!==d&&void 0!==g&&void 0!==p&&void 0!==i&&(s=r.put(u),mi(e,d,g,p,i),pi(e,s),f&&_i(e,s,a(u)));return e.restore()},Iu=function(t,n,e){var r,i,o,u,a,s,c,l,h,f,d,g,p,v;for(u=n.positionX,a=n.positionY1,s=n.positionY2,h=n.width,r=n.fill,c=n.stroke,o=n.lineWidth,e.save(),p=0,v=t.length;v>p;p++)i=t[p],f=u(i),d=a(i),g=s(i),l=h(i),void 0!==f&&void 0!==d&&void 0!==g&&void 0!==l&&(wi(e,f,d,g,l),c&&_i(e,c(i),o(i)),r&&pi(e,r(i)));return e.restore()},Mu=function(t,n,e){var r,i,o,u,a,s,c,l,h,f,d,g,p,v;for(s=n.positionX1,c=n.positionX2,l=n.positionY,o=n.height,r=n.fill,h=n.stroke,a=n.lineWidth,e.save(),p=0,v=t.length;v>p;p++)u=t[p],f=s(u),d=c(u),g=l(u),i=o(u),void 0!==f&&void 0!==d&&void 0!==g&&void 0!==i&&(mi(e,f,d,g,i),h&&_i(e,h(u),a(u)),r&&pi(e,r(u)));return e.restore()},Ku=function(t,n,e,r,i,o){var u,a,s,c,l,h,f,d,g,p,v,m,w,b,y;for(a=n.positionX,s=n.positionY1,c=n.positionY2,f=n.width,l=[],b=0,y=t.length;y>b;b++)u=t[b],d=a(u),v=s(u),m=c(u),v>m&&(w=v,v=m,m=w),h=f(u),void 0!==d&&void 0!==v&&void 0!==m&&void 0!==h&&(g=d-h/2,p=d+h/2,e>p||g>i||r>m||v>o||l.push(u));return l},Ju=function(t,n,e,r,i,o){var u,a,s,c,l,h,f,d,g,p,v,m,w,b,y;for(c=n.positionX1,l=n.positionX2,h=n.positionY,a=n.height,f=[],b=0,y=t.length;y>b;b++)s=t[b],d=c(s),g=l(s),v=h(s),d>g&&(p=d,d=g,g=p),u=a(s),void 0!==d&&void 0!==g&&void 0!==v&&void 0!==u&&(m=v-u/2,w=v+u/2,e>g||d>i||r>w||m>o||f.push(s));return f},ei=function(t,n){var e,r,i,o,u,a,s,c,l,h,f,d,g,p,v,m,w,b;switch(f=ea(n)){case"String, Number, Number, Number, Number, Number":return g=n[0],i=n[1],o=n[2],u=n[3],a=n[4],s=n[5],c=new ae([g],[i,o,u,a,s]),d=null!=(v=t.width)?v:new X(.8),m=wo(t.strokeColor,t.strokeOpacity,t.lineWidth),l=m[0],h=m[1],r=m[2],new Hn(c,g,i,o,u,a,s,d,l,h,r,t.tooltip);case"Number, Number, Number, Number, Number, String":return i=n[0],o=n[1],u=n[2],a=n[3],s=n[4],p=n[5],c=new ae([i,o,u,a,s],[p]),e=null!=(w=t.height)?w:new X(.8),b=wo(t.strokeColor,t.strokeOpacity,t.lineWidth),l=b[0],h=b[1],r=b[2],new Dn(c,i,o,u,a,s,p,e,l,h,r,t.tooltip)}},Li=function(t,n,e,r){var i,o,u,a,s,c,l,h,f,d,g,p,v;return u=Vi(e,n.q0),a=Vi(e,n.q1),s=Vi(e,n.q2),c=Vi(e,n.q3),l=Vi(e,n.qn),p=Vi(r,n.positionY),i=Ui(t,n.height,r.rect.height/r.domain.length),v=Hi(t,n),f=v[0],d=v[1],h=v[2],o=v[3],g=Ji(t,n.tooltip),new Vn(u,a,s,c,l,p,i,h,f,d,o,g)},ho=function(t,n,e){var r,i,o,u,a,s,c,l,h,f,d,g,p,v;for(u=n.positionY,a=n.q0,s=n.q1,c=n.q2,l=n.q3,h=n.qn,r=n.height,f=n.stroke,o=n.lineWidth,e.save(),d=0,p=t.length;p>d;d++)i=t[d],bi(e,a(i),s(i),c(i),l(i),h(i),u(i),r(i),f(i),2+(f?o(i):1));for(e.restore(),e.save(),e.globalCompositeOperation="destination-out",e.strokeStyle="black",g=0,v=t.length;v>g;g++)i=t[g],bi(e,a(i),s(i),c(i),l(i),h(i),u(i),r(i),f(i),o(i));return e.restore()},qo=function(t,n,e,r){var i,o,u,a,s,c,l,h,f,d,g,p,v,m,w,b,y;for(c=n.positionY,l=n.q0,h=n.q1,f=n.q2,d=n.q3,g=n.qn,o=n.height,p=n.stroke,a=n.lineWidth,e.save(),b=0,y=t.length;y>b;b++)u=t[b],v=l(u),m=g(u),w=c(u),i=o(u),void 0!==v&&void 0!==m&&void 0!==w&&void 0!==i&&(s=r.put(u),mi(e,v,m,w,i),pi(e,s),_i(e,s,a(u)));return e.restore()},Du=function(t,n,e){var r,i,o,u,a,s,c,l,h,f,d,g;for(u=n.positionY,a=n.q0,s=n.q1,c=n.q2,l=n.q3,h=n.qn,r=n.height,f=n.stroke,o=n.lineWidth,e.save(),d=0,g=t.length;g>d;d++)i=t[d],bi(e,a(i),s(i),c(i),l(i),h(i),u(i),r(i),f(i),o(i));return e.restore()},Zu=function(t,n,e,r,i,o){var u,a,s,c,l,h,f,d,g,p,v,m,w,b,y,_,k,x,C,S;for(l=n.positionY,h=n.q0,f=n.q1,d=n.q2,g=n.q3,p=n.qn,a=n.height,m=n.stroke,c=n.lineWidth,v=[],C=0,S=t.length;S>C;C++)s=t[C],w=h(s),b=p(s),_=l(s),w>b&&(y=w,w=b,b=y),u=a(s),void 0!==w&&void 0!==b&&void 0!==_&&void 0!==u&&(k=_-u/2,x=_+u/2,e>b||w>i||r>x||k>o||v.push(s));return v},Di=function(t,n,e,r){var i,o,u,a,s,c,l,h,f,d,g,p,v;return p=Vi(e,n.positionX),o=Vi(r,n.q0),u=Vi(r,n.q1),a=Vi(r,n.q2),s=Vi(r,n.q3),c=Vi(r,n.qn),g=Ui(t,n.width,e.rect.width/e.domain.length),v=Hi(t,n),h=v[0],f=v[1],l=v[2],i=v[3],d=Ji(t,n.tooltip),new Gn(p,o,u,a,s,c,g,l,h,f,i,d)},fo=function(t,n,e){var r,i,o,u,a,s,c,l,h,f,d,g,p,v;for(o=n.positionX,u=n.q0,a=n.q1,s=n.q2,c=n.q3,l=n.qn,f=n.width,h=n.stroke,i=n.lineWidth,e.save(),d=0,p=t.length;p>d;d++)r=t[d],yi(e,o(r),u(r),a(r),s(r),c(r),l(r),f(r),h(r),2+(h?i(r):1));for(e.restore(),e.save(),e.globalCompositeOperation="destination-out",e.strokeStyle="black",g=0,v=t.length;v>g;g++)r=t[g],yi(e,o(r),u(r),a(r),s(r),c(r),l(r),f(r),h(r),i(r));return e.restore()},No=function(t,n,e,r){var i,o,u,a,s,c,l,h,f,d,g,p,v,m,w,b,y;for(a=n.positionX,s=n.q0,c=n.q1,l=n.q2,h=n.q3,f=n.qn,p=n.width,d=n.stroke,o=n.lineWidth,e.save(),b=0,y=t.length;y>b;b++)i=t[b],v=a(i),m=s(i),w=f(i),g=p(i),void 0!==v&&void 0!==m&&void 0!==w&&void 0!==g&&(u=r.put(i),wi(e,v,m,w,g),pi(e,u),_i(e,u,o(i)));return e.restore()},Gu=function(t,n,e){var r,i,o,u,a,s,c,l,h,f,d,g;for(o=n.positionX,u=n.q0,a=n.q1,s=n.q2,c=n.q3,l=n.qn,f=n.width,h=n.stroke,i=n.lineWidth,e.save(),d=0,g=t.length;g>d;d++)r=t[d],yi(e,o(r),u(r),a(r),s(r),c(r),l(r),f(r),h(r),i(r));return e.restore()},ta=function(t,n,e,r,i,o){var u,a,s,c,l,h,f,d,g,p,v,m,w,b,y,_,k,x,C,S;for(s=n.positionX,c=n.q0,l=n.q1,h=n.q2,f=n.q3,d=n.qn,m=n.width,p=n.stroke,a=n.lineWidth,g=[],C=0,S=t.length;S>C;C++)u=t[C],w=s(u),_=c(u),k=d(u),_>k&&(x=_,_=k,k=x),v=m(u),void 0!==w&&void 0!==_&&void 0!==k&&void 0!==v&&(b=w-v/2,y=w+v/2,e>y||b>i||r>k||_>o||g.push(u));return g},Qr=function(t,n){var e,r,i,o,u,a,s;return r=n[0],i=n[1],o=new ae([r],[i]),s=wo(t.strokeColor,t.strokeOpacity,t.lineWidth),u=s[0],a=s[1],e=s[2],new Sn(o,r,i,u,a,e,t.tooltip)},Ri=function(t,n,e,r){var i,o,u,a,s,c,l,h;return o=Vi(e,n.positionX),u=Vi(r,n.positionY),h=Hi(t,n),s=h[0],c=h[1],a=h[2],i=h[3],l=Ji(t,n.tooltip),new kn(o,u,a,s,c,i,l)},co=function(t,n,e){var r,i,o,u,a,s,c;for(i=n.positionX,o=n.positionY,e.save(),s=0,c=t.length;c>s;s++)r=t[s],u=i(r),a=o(r),e.lineWidth=1.5,e.strokeStyle="black",void 0!==u&&void 0!==a&&(xi(e,u,a,64),e.stroke());return e.restore()},Co=function(t,n,e,r){var i,o,u,a,s,c,l;for(o=n.positionX,u=n.positionY,e.save(),c=0,l=t.length;l>c;c++)i=t[c],a=o(i),s=u(i),void 0!==a&&void 0!==s&&(xi(e,a,s,64),e.fillStyle=r.put(i),e.fill());return e.restore()},Ru=function(t,n,e){var r,i,o,u,a,s,c,l,h,f,d,g,p,v,m,w,b,y,_;if(u=n.positionX,a=n.positionY,s=n.stroke,o=n.lineWidth,s instanceof C&&o instanceof C){for(e.strokeStyle=s(),e.lineWidth=o(),e.save(),w=!1,m=0,y=t.length;y>m;m++)i=t[m],h=u(i),g=a(i),void 0!==h&&void 0!==g?w?e.lineTo(h,g):(e.beginPath(),w=!0,e.moveTo(h,g)):(w&&e.stroke(),w=!1);return e.restore()}for(e.save(),e.lineCap="round",w=!1,f=void 0,p=void 0,c=void 0,b=0,_=t.length;_>b;b++)i=t[b],d=u(i),v=a(i),void 0!==d&&void 0!==v?(l=s(i),w&&(l!==c?(r=e.createLinearGradient(f,p,d,v),r.addColorStop(0,c||Ee),r.addColorStop(1,l||Ee),e.strokeStyle=r):e.strokeStyle=l,e.lineWidth=o(i),e.beginPath(),e.moveTo(f,p),e.lineTo(d,v),e.stroke()),w=!0,f=d,p=v,c=l):w=!1;return e.restore()},Hr=di([Wn,Array,Zr],[xn,Array,Qr],[jn,Array,ni],[Bn,Array,ei]),Tn=new tn(Bi,So,lo,Vu,Qu),Cn=new tn(Ri,Co,co,Ru,Qu),v=new tn(Ai,xo,so,Iu,Ku),r=new tn(Xi,ko,ao,Mu,Ju),Ln=new tn(Li,qo,ho,Du,Zu),Un=new tn(Di,No,fo,Gu,ta),Lo=di([Z,_.identity],[Function,function(t){return new I(t)}]),Cu=di([Number,function(t){return new yn(t)}],[Boolean,function(t){return new o(t)}],[Date,function(t){return new P(t)}],[String,function(t){return new ce(t)}]),jo=function(){var t;t=1<=arguments.length?da.call(arguments,0):[]},lu=di([Array,function(t){return new l(t)}],[Number,function(t){return t>0?new Qn(0,t):0>t?new Qn(t,0):new R(-1,0,1)}],[String,function(t){return new Kn(t,"black")}],[Number,Number,function(t,n){return n>=t?new Qn(t,n):new Qn(n,t)}],[String,String,function(t,n){return new Kn(t,n)}],[Number,Number,Number,function(t,n,e){var r,i,o,u;return u=_.sortBy([t,n,e],_.identity),r=u[0],i=u[1],o=u[2],new R(r,i,o)}],[String,String,String,function(t,n,e){return new z(t,n,e)}]),gr=function(t){var n,e,r,i,o;for(o=[],r=0,i=t.length;i>r;r++)if(n=t[r],n instanceof H)o.push(n);else{if(xe!==(e=ra(n)))throw new Error("Cannot create vector reference from ["+n+"] of type ["+e+"].");o.push(new H(n))}return o},cu=function(){var t,n;return t=1<=arguments.length?da.call(arguments,0):[],new En(function(){var e,r,i,o;for(i=gr(t),o=[],e=0,r=i.length;r>e;e++)n=i[e],o.push(new A(n));return o}())},Bo=di([ce,function(t){return new S(chroma(t.value))}],[String,function(t){return new Ae(new H(t))}],[H,function(t){return new Ae(t)}],[String,x,function(t,n){return new Ae(new H(t),n)}],[H,x,function(t,n){return new Ae(t,n)}],[String,l,function(t,n){return new Ae(new H(t),n)}],[H,l,function(t,n){return new Ae(t,n)}]),Vo=di([yn,function(t){return new q(t.value)}],[String,function(t){return new Me(new H(t))}],[H,function(t){return new Me(t)}],[String,Qn,function(t,n){return new Me(new H(t),n)}],[H,Qn,function(t,n){return new Me(t,n)}]),bu=di([ce,function(t){return new E(chroma(t.value))}],[String,function(t){return new ze(new H(t))}],[H,function(t){return new ze(t)}],[String,x,function(t,n){return new ze(new H(t),n)}],[H,x,function(t,n){return new ze(t,n)}],[String,l,function(t,n){return new ze(new H(t),n)}],[H,l,function(t,n){return new ze(t,n)}]),yu=di([yn,function(t){return new Y(t.value)}],[String,function(t){return new Re(new H(t))}],[H,function(t){return new Re(t)}],[String,Qn,function(t,n){return new Re(new H(t),n)}],[H,Qn,function(t,n){return new Re(t,n)}]),gi=function(t,n){return di([yn,function(n){return new t(n.value)}],[String,function(t){return new n(new H(t))}],[H,function(t){return new n(t)}],[String,Qn,function(t,e){return new n(new H(t),e)}],[H,Qn,function(t,e){return new n(t,e)}])},mu=gi(O,je),qu=gi(X,Ve),$o=gi(N,Ie),tu=di([yn,function(t){return new W(t.value)}],[String,function(t){return new Pe(new H(t))}],[H,function(t){return new Pe(t)}],[String,Qn,function(t,n){return new Pe(new H(t),n)}],[H,Qn,function(t,n){return new Pe(t,n)}]),vu=di([ce,function(t){return new T(t.value)}],[String,function(t){return new Fe(new H(t))}],[H,function(t){return new Fe(t)}],[String,l,function(t,n){return new Fe(new H(t),n)}],[H,l,function(t,n){return new Fe(t,n)}]),xu=function(){var t;return t=1<=arguments.length?da.call(arguments,0):[],new Be(gr(t))},ku=function(){var t;return t=1<=arguments.length?da.call(arguments,0):[],new Se(gr(t))},hu=function(t){return null==t&&(t=0),new Pn(t)},Sr=function(t){var n,e,r;r=[];for(n in t)if(e=t[n],_.isString(e))switch(e){case"string":r.push({label:n,type:"String",domain:[],parse:or});break;case"int":r.push({label:n,type:"Number",parse:rr});break;case"real":r.push({label:n,type:"Number",parse:ir});break;default:throw new Error("Invalid type "+e+" for schema field "+n)}else{if(!_.isArray(e))throw new Error("Invalid type "+e+" for schema field "+n);r.push({label:n,type:"String",domain:e,parse:or})}return r},Ou=function(t,n,e){var r,i,o,u,a,s,c;return a=CSV.parse(e,{header:!1,cast:!1}),c=function(){var t,c,l,h,f;for(f=[],o=t=0,l=n.length;l>t;o=++t){for(r=n[o],e=new Array(a.length),i=c=0,h=a.length;h>c;i=++c)u=a[i],void 0!==(s=r.parse(u[o]))&&(e[i]=s);switch(r.type){case"String":f.push(Eo.createFactor(r.label,r.type,e,r.domain));break;case"Number":f.push(Eo.createVector(r.label,r.type,e,_.identity));break;default:f.push(void 0)}}return f}(),Lr(t,c,_.range(a.length))},du=function(t){return function(n){return ki("json",t+".json",function(t,e){if(t)return n(t);switch(e.format){case"csv":return ki("text",e.location,function(t,r){if(t)return n(t);try{return n(null,Ou(e.name,Sr(e.schema),r))}catch(i){return t=i,n(t)}});default:return n(new Error("Unsupported format ["+e.format+"]"))}})}},su=function(){var t,n,e,r,i,o,u,a,s,c;return r=1<=arguments.length?da.call(arguments,0):[],i=io(r,En),o=io(r,Zn),u=io(r,ie),t=io(r,K),n=io(r,Q),a=io(r,he),s=io(r,fe),e=io(r,hn),c=io(r,Te),new Wn(i,o,u,t,n,a,s,e,c)},fu=function(){var t,n,e,r,i,o,u,a,s,c;return i=1<=arguments.length?da.call(arguments,0):[],o=io(i,En),c=io(i,He),e=io(i,un),t=io(i,K),n=io(i,Q),u=io(i,he),a=io(i,fe),r=io(i,hn),s=io(i,Te),new jn(o,c,e,t,n,u,a,r,s)},au=function(){var t,n,e,r,i,o;return n=1<=arguments.length?da.call(arguments,0):[],e=io(n,En),r=io(n,he),i=io(n,fe),t=io(n,hn),o=io(n,Te),new xn(e,r,i,t,o)},gu=function(){var t,n,e,r,i,o,u,a;return e=1<=arguments.length?da.call(arguments,0):[],r=io(e,En),a=io(e,He),t=io(e,un),i=io(e,he),o=io(e,fe),n=io(e,hn),u=io(e,Te),new Bn(r,a,t,i,o,n,u)},uu=function(t,n){var e;return e=function(t,n){var r,i,o,u;if(_.isArray(t)){for(i=t.length,o=[];i--;)r=t[i],null!==r&&_.isObject(r)?(e(r,n),o.push(n(r))):o.push(void 0);return o}u=[];for(i in t)pa.call(t,i)&&(r=t[i],null!==r&&_.isObject(r)?(e(r,n),u.push(n(r))):u.push(void 0));return u},function(r){var i;return i=t.parse(r),e(i,function(t){var n;"CallExpression"===t.type&&"Identifier"===t.callee.type?_.isFunction(Eo[n=t.callee.name])&&(t.callee={type:"MemberExpression",computed:!1,object:{type:"Identifier",name:"plot"},property:{type:"Identifier",name:n}}):"Identifier"===t.type&&_.isFunction(Eo[n=t.name])&&(delete t.name,t.type="MemberExpression",t.computed=!1,t.object={type:"Identifier",name:"plot"},t.property={type:"Identifier",name:n})}),n.generate(i)}},Fo={maxCanvasSize:new re(795,600),visualizationSize:new re(300,300),axisLabelFont:"10px monospace",axisTickColor:"#4d4d4d",axisTitleFont:"bold 10px monospace",axisLabelColor:"#4d4d4d",gridLineColor:"#eee"},Nu=function(t){return Math.round(t)+"px"},Ir=function(t,n){var e,r,i,o;e=document.createElement(t),i=e.style;for(r in n)o=n[r],i[r]=o;return e},Eu=function(t){for(var n;n=t.firstChild;)t.removeChild(n)},ai=function(t){var n,e,r,i,o,u,a,s;u=function(){var n;n=[];for(o in t)a=t[o],r=function(){var t;t=[];for(i in a)s=a[i],t.push(i+":"+s);return t}(),n.push(o+"{"+r.join(";")+";}");return n}(),n=document.createElement("style"),n.type="text/css",n.innerHTML=u.join("\n"),e=_.head(document.getElementsByTagName("head")),e.appendChild(n)},si=function(t){var n,e,r,i,o,u,a;e=document.createElement("table"),e.appendChild(r=document.createElement("tbody"));for(n in t)a=t[n],r.appendChild(u=document.createElement("tr")),u.appendChild(i=document.createElement("td")),i.appendChild(document.createTextNode(n+":")),u.appendChild(o=document.createElement("th")),o.appendChild(document.createTextNode(a));return e},Yr=function(t){var n,e,r,i,o,u,a;return a=t.width,o=t.height,i=document.createElement("canvas"),e=i.getContext("2d"),r=window.devicePixelRatio||1,n=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1,u=r/n,i.style.position="absolute",r!==n?(i.width=a*u,i.height=o*u,e.scale(u,u),i.style.width=Nu(a),i.style.height=Nu(o)):(i.width=a,i.height=o),new s(i,e,t,u)},li=function(t){var n,e,r,i,o,u,a,s,c,l,h,f;return f=function(){var n,e;for(e=[],a=n=1;5>=n;a=++n)e.push(Yr(t));return e}(),n=f[0],o=f[1],u=f[2],l=f[3],r=f[4],i=Ir("div",{position:"relative",overflow:"visible",width:Nu(t.width),height:Nu(t.height)}),s=Ir("div",{position:"absolute",left:Nu(0),top:Nu(0),width:Nu(0),height:Nu(0),display:"none",outline:"1px dotted #999",background:"rgba(0, 0, 0, 0.05)"}),h=Ir("div",{position:"absolute",left:Nu(0),top:Nu(0),"max-width":Nu(.9*t.width),display:"none"}),h.className="lightning-tooltip",i.appendChild(n.element),i.appendChild(o.element),i.appendChild(s),i.appendChild(u.element),i.appendChild(h),c=$r(l),e=Ar(r),new De(t,i,n,o,u,l,r,s,h,c,e)},uo=function(t){var n,e,r;return e=null!=(r=t.target)?r:t.srcElement,n=e.getBoundingClientRect(),[t.clientX-n.left,t.clientY-n.top]},sr=function(t,n,e,r,i){var o,u,a,s,c,l,h,f,d,g;u=$(document),o=$(t),s=n.style,c=f=l=d=h=g=0,a=!1,o.on("mousemove",function(t){var n;return c=t.offsetX,f=t.offsetY,(void 0===c||void 0===f)&&(n=uo(t),c=n[0],f=n[1]),a?(s.left=Nu(c>l?l:c),s.top=Nu(f>d?d:f),s.width=Nu(Math.abs(c-l)),s.height=Nu(Math.abs(f-d))):e(c,f)}),o.on("mousedown",function(t){var n;return t.preventDefault(),l=t.offsetX,d=t.offsetY,(void 0===l||void 0===d)&&(n=uo(t),l=n[0],d=n[1]),a=!0,s.display="block",s.left=Nu(l),s.top=Nu(d),u.on("mouseup",function(t){var n;return t.preventDefault(),h=t.offsetX,g=t.offsetY,(void 0===h||void 0===g)&&(n=uo(t),h=n[0],g=n[1]),a=!1,s.display="none",s.width=Nu(0),s.height=Nu(0),u.off("mouseup"),Math.abs(l-h)>5||Math.abs(d-g)>5?r(l,d,h,g):i(l,d)})})},jr=function(){var t,n,e;return e={},t=function(t,n){var r;return(r=e[t])?r.push(n):e[t]=[n]},n=function(t,n){var r,i,o,u,a;if(t)if(n){if(o=e[t])for(r=u=0,a=o.length;a>u;r=++u)if(i=o[r],i===n){o.splice(r,1);break}}else delete e[t]},di=function(){var t,n,r,i,o,u;if(n=arguments[0],t=2<=arguments.length?da.call(arguments,1):[],i=e[n])for(o=0,u=i.length;u>o;o++)r=i[o],r.apply(null,t)},[t,n,di]},hi=function(t,n,e,r,i,o){var u,a,s,c,l,h,f,d,g,p,v,m,w,b,y,_,k,x,C,S,q,N,W;return W=li(t),u=W.baseCanvas,f=W.highlightCanvas,g=W.hoverCanvas,s=W.clipCanvas,m=W.maskCanvas,p=W.marquee,x=W.tooltip,v=W.mask,a=W.clip,C=t.regions.center,q=n.indices,S=void 0,k=function(n,r){var i,o,u,c,l;if(o=v.test(n,r),void 0!==o)for(i=s.context,i.clearRect(0,0,t.width,t.height),c=0,l=e.length;l>c;c++)if(u=e[c],i.save(),i.translate(C.left,C.top),u.mask([o],u.encoders,i,a),i.restore(),a.test(n,r))return o},c=function(t,n,e){var r;return r=si(e),Eu(x),x.appendChild(r),x.style.display="block",w(t,n)},N=7,w=function(n,e){var r,i,o,u;if("none"!==x.style.display)return u=x.clientWidth,o=x.clientHeight,r=n+N,i=e-N-o,r+u>t.width&&(r=n-N-u),0>i&&(i=e+N),0>r&&(r=0),0>i&&(i=0),x.style.left=Nu(r),x.style.top=Nu(i)},l=function(){return x.style.display="none"},d=function(r,i){var u,a,s,h,f,d,p,v,m,b,y,_,x,q,N;if(h=k(r,i),h!==S){if(S=h,s=g.context,s.clearRect(0,0,t.width,t.height),l(),void 0!==h){for(s.save(),s.translate(C.left,C.top),v=0,y=e.length;y>v;v++)f=e[v],f.highlight([h],f.encoders,s);for(s.restore(),o("hover",new an(n.vectors,h)),d={},m=0,_=e.length;_>m;m++){f=e[m],q=f.encodings;for(u in q)if(a=q[u])if(a instanceof Xe)(p=a.vector)&&(d[p.label]=p.format(h));else if(a instanceof Oe)for(N=a.vectors,b=0,x=N.length;x>b;b++)p=N[b],d[p.label]=p.format(h)}c(r,i,d)}}else w(r,i)},h=function(n){var r,i,o,a;if(r=f.context,r.clearRect(0,0,t.width,t.height),n.length){for(u.element.style.opacity=.5,r.save(),r.translate(C.left,C.top),o=0,a=e.length;a>o;o++)i=e[o],i.highlight(n,i.encoders,r),i.render(n,i.encoders,r);r.restore()}else u.element.style.opacity=1},y=function(t,e){var r;r=k(t,e),void 0!==r?(h([r]),o("select",new $n(n.vectors,[r]))):(h([]),o("deselect",new j(n.vectors)))},_=function(t,r,i,u){var a,s,c,l,f,d,g,p;for(l=-C.left+(t>i?i:t),c=-C.left+(t>i?t:i),d=-C.top+(r>u?u:r),f=-C.top+(r>u?r:u),g=0,p=e.length;p>g;g++)a=e[g],s=a.select(q,a.encoders,l,d,c,f),h(s),s.length?o("select",new $n(n.vectors,s)):o("deselect",new j(n.vectors))},b=function(){var n,o,a,s,c;for(n=u.context,a=m.context,Fu(n,r,C),ju(n,i,C),n.save(),n.translate(C.left,C.top),a.save(),a.translate(C.left,C.top),s=0,c=e.length;c>s;s++)o=e[s],o.render(q,o.encoders,n),o.mask(q,o.encoders,a,v);a.restore(),n.restore(),Xu(n,r,t.regions.bottom),Au(n,i,t.regions.left)},sr(g.element,p,d,_,y),new Ge(W,n,k,h,d,y,_,b)},Yu=function(t,n,e,r,i){var o,u,a,s,l,h,f,d,g,p,v,m,w,b,y,_,k,x;if(t.font=Fo.axisLabelFont,t.fillStyle=Fo.axisLabelColor,t.strokeStyle=Fo.axisTickColor,t.textBaseline="middle",m=sa+4,l=e-m,t.save(),hr(t,m,0,l,r),t.textAlign="right",v=e-5,a=e-6,n instanceof c){for(k=n.guide(),w=0,y=k.length;y>w;w++)o=k[w],u=o.value,d=n.scale(o),p=-.5+Math.round(d),vi(t,v,p,e,p),t.fillText(u,a,d,l-6);vi(t,e-.5,0,e-.5,r)}else{if(!(n instanceof fn))throw new Error("Invalid axis type.");for(f=6,h=r-6,x=n.guide(),b=0,_=x.length;_>b;b++)g=x[b],u=g.label,d=n.scale(g.value),p=Math.max(.5,-.5+Math.round(d)),vi(t,v,p,e,p),s=f>d?f:d>h?h:d,t.fillText(u,a,s,l-6);vi(t,e-.5,0,e-.5,r)}return t.restore(),t.font=Fo.axisTitleFont,t.textAlign="center",t.translate(m/2,r/2),t.rotate(i*rn),t.fillText(n.label,0,0,r),t.restore()},Pu=function(t,n,e,r){var i,o,u,a,s;if(t.strokeStyle=Fo.gridLineColor,n instanceof c)vi(t,0,.5,e,.5),vi(t,0,r-.5,e,r-.5);else if(n instanceof fn)for(s=n.guide(),u=0,a=s.length;a>u;u++)i=s[u],o=Math.max(.5,-.5+Math.round(n.scale(i.value))),vi(t,0,o,e,o)},Fu=function(t,n,e){return t.save(),t.translate(e.left,e.top+e.height),t.rotate(-rn),Pu(t,n,e.height,e.width),t.restore()},ju=function(t,n,e){return t.save(),t.translate(e.left,e.top),Pu(t,n,e.width,e.height),t.restore()},Xu=function(t,n,e){return t.save(),t.translate(e.left,e.top+e.height),t.rotate(-rn),Yu(t,n,e.height,e.width,1),t.restore()},Au=function(t,n,e){return t.save(),t.translate(e.left,e.top),Yu(t,n,e.width,e.height,-1),t.restore()},wr=function(t,n){var e,r,i,o,u,a,s,c,l;return 0<=(a=t.indexOf(" "))?(c=t.substr(0,a),e=t.substr(a)):c=t,l=c.split(/\.+/g),s=l[0],i=2<=l.length?da.call(l,1):[],0===s.indexOf("#")&&(u=s.substr(1),s="div"),""===s&&(s="div"),r="<"+s,u&&(r+=" id='"+u+"'"),i.length&&(r+=" class='"+i.join(" ")+"'"),e&&(r+=e),r+=">",o="</"+s+">","="===n?function(t){return r+(null!==t&&void 0!==t?t:"")+o}:"+"===n?function(t,n){var e;return e=r.replace("{0}",n),e+t+o}:function(t){return r+t.join("")+o
}},fa={},Dr=function(){var t,n,e,r,i,o,u;for(e=1<=arguments.length?da.call(arguments,0):[],u=[],i=0,o=e.length;o>i;i++)n=e[i],(t=fa[n])?u.push(t):(r=n.charAt(0),u.push("="===r||"+"===r?fa[n]=wr(n.substr(1),r):fa[n]=wr(n)));return u},zu=function(t){var n;return n=document.createElement("div"),n.innerHTML=t,n.childNodes[0]},eo=function(t,n){var e,r,i,o,u,a,s;for(r={},i=[],a=0,s=n.length;s>a;a++)o=n[a],u=(e=t.at(o)).key,r[u]||(r[u]=!0,i.push(e));return i},oi=function(t,n){var e,r,i,o,u,a;for(r=null,e=null,a=null,o=0,u=t.length;u>o;o++)if(i=t[o],null===r)switch(r=i.type){case xe:a=i,e=eo(i,n);break;case ye:e=i.domain;break;default:throw new Error("ni")}else{if(r!==i.type)throw new Error("Incompatible axis vector ["+i.label+"]. Expect type ["+r+"], got ["+i.type+"]");switch(r){case xe:if(a!==i)throw new Error("Incompatible categorical vector ["+i.label+"]. Expected ["+a.label+"].");break;case ye:e=mr(e,i.domain);break;default:throw new Error("ni")}}return new ue(r,t,e)},Er=function(t){var n,e;return n=function(){var n,r,i;for(i=[],n=0,r=t.length;r>n;n++)e=t[n],i.push(e.label);return i}(),_.unique(n).join(", ")},br=function(t,n){var e,r,i,o,a,s,l,h,f,d,g,p,v;if(l=new Fn(0,0,400,400),e=Or(t,"",n,new Qn(0,l.width),l),s=sa+4+6+10,e instanceof c){for(a=0,r=e.guide(),f=0,g=r.length;g>f;f++)i=r[f],a<(o=(""+i.value).length)&&(a=o);return new u(Math.ceil(a*sa+s),Math.ceil(r.length*(sa+8)))}if(e instanceof fn){for(a=0,r=e.guide(),v=e.guide(),d=0,p=v.length;p>d;d++)h=v[d],a<(o=h.label.length)&&(a=o);return new u(Math.ceil(a*sa+s),Fo.visualizationSize.height)}throw new Error("Invalid axis type.")},Or=function(t,n,e,r,i){var o,u,a,s,l;switch(t){case xe:return u=Kr(e,r),o=function(){return e},new c(t,n,u,e,r,i,o);case ye:return l=Jr(e,r),u=l[0],a=l[1],s=l[2],o=function(t){var n,e,r,i,o,u;for(null==t&&(t=10),n=a(t),o=s(t),u=[],r=0,i=o.length;i>r;r++)e=o[r],u.push(new We(e,n(e)));return u},new fn(t,n,u,e,r,i,o);default:throw new Error("Unhandled axis type ["+t+"].")}},Hu=function(t,n){var e,r;return r=ti(n),e=Tu(t,r),io(n,Se)?Uu(e,n):io(n,Pn)?Lu(e,n):Bu(e,n)},Lu=function(t,n){var e,r,i,o,u,a,s,c,l,h,f,d,g,p,v,m;return u=io(n,Pn),i=u.index,m=Dr("=table.lightning-record","tbody","tr","=th","=td"),s=m[0],c=m[1],f=m[2],h=m[3],l=m[4],d=function(){var n,e;n=t.schema,e=[];for(o in n)v=n[o],p=v.format(i),r=function(){switch(v.type){case xe:return void 0!==p?_.escape(p):"-";case ye:return void 0!==p?_.escape(p):"-";case _e:return void 0!==p?p:"-";default:throw new Error("Cannot render table cell of type "+v.type)}}(),e.push(f([h(_.escape(v.label)),l(r)]));return e}(),e=zu(s(c(d))),a=_.noop,g=_.noop,new qn(e,a,g)},Uu=function(t,n){var e,r,i,o,u,a,s,c,l,h,f,d,g,p,v,m,w,b,y,k,x,C;return a=io(n,Se),k=function(){var n,e,i,o;if(a.fields.length){for(i=a.fields,o=[],n=0,e=i.length;e>n;n++)r=i[n],o.push(t.evaluate(r));return o}return t.vectors}(),x=_.flatten(k),C=Dr("table.lightning-table","=thead","tbody","tr","=th","=th.lightning-number","=td","=td.lightning-number"),u=C[0],d=C[1],s=C[2],v=C[3],f=C[4],g=C[5],c=C[6],l=C[7],p=function(){var t,n,e;for(e=[],t=0,n=x.length;n>t;t++)switch(y=x[t],y.type){case ye:e.push(g(_.escape(y.label)));break;default:e.push(f(_.escape(y.label)))}return e}(),m=function(){var n,e,r,o;for(r=t.indices,o=[],n=0,e=r.length;e>n;n++)i=r[n],h=function(){var t,n,e;for(e=[],t=0,n=x.length;n>t;t++)switch(y=x[t],b=y.format(i),y.type){case xe:e.push(c(void 0!==b?_.escape(b):"-"));break;case ye:e.push(l(void 0!==b?_.escape(b):"-"));break;case _e:e.push(c(void 0!==b?b:"-"));break;default:throw new Error("Cannot render table cell of type "+y.type)}return e}(),o.push(v(h));return o}(),e=zu(u([d(v(p)),s(m)])),o=_.noop,w=_.noop,new qn(e,o,w)},yr=function(t,n){return t.type===ye&&n.type===xe?go(t.domain):t.domain},Bu=function(t,n){var e,r,i,o,s,c,l,h,f,d,g,p,v,m,w,b,y,k,x,C,S,q,N,W;return p=_.map(no(n,mn),function(n){var e,r;return r=function(){var r,i,o,u;for(o=n.position.coordinates,u=[],r=0,i=o.length;i>r;r++)e=o[r],u.push(t.evaluate(e.field));return u}(),Hr(n,_.flatten(r))}),y=_.map(p,function(t){return t.space}),C=oo(y,function(t){return t.x}),S=oo(y,function(t){return t.y}),w=oi(C,t.indices),b=oi(S,t.indices),f=yr(w,b),d=yr(b,w),e=br(w.type,f),r=br(b.type,d),l=null!=(N=io(n,u))?N:new u(Math.min(Fo.maxCanvasSize.width,r.width+e.height),Math.min(Fo.maxCanvasSize.height,e.width+r.height)),h=new a(l.width,l.height,new pn(Math.min(.3*Fo.maxCanvasSize.width,r.width),0,0,Math.min(.3*Fo.maxCanvasSize.height,e.width))),i=h.regions.bottom,o=h.regions.left,v=new Qn(0,i.width),m=b.type===ye?new Qn(o.height,0):new Qn(0,o.height),s=Or(w.type,Er(C),f,v,i),c=Or(b.type,Er(S),d,m,o),g=_.map(p,function(n){var e,r,i,o,u;i=n.geometry,r=i.encode(t,n,s,c),e={};for(o in r)u=r[o],(null!=u?u.encode:void 0)&&(e[o]=u.encode);return new sn(r,e,i.mask,i.highlight,i.render,i.select)}),W=jr(),k=W[0],x=W[1],di=W[2],q=hi(h,t,g,s,c,di),q.render(),new qn(q.viewport.container,k,x)},ia=di([I,Array,Function,function(t,n,e){return t.read(function(t,r){return t?e(t):ia(r,n,e)})}],[Z,Array,Function,function(t,n,e){var r;try{return e(null,Hu(t,n))}catch(i){return r=i,e(r)}}]),_o=function(){return ai({".lightning-tooltip":{background:"#2c2c2c",color:"#fff","font-size":"12px"},".lightning-tooltip th, .lightning-tooltip td":{padding:"0px 4px","vertical-align":"middle"},".lightning-tooltip th":{"text-align":"left"},".lightning-table th, .lightning-table td":{padding:"0px 8px","vertical-align":"middle"},".lightning-table tbody > tr:nth-child(odd)":{"background-color":"#f3f3f3"},".lightning-table .lightning-number":{"text-align":"right"},".lightning-record th, .lightning-record td":{padding:"0px 8px","vertical-align":"middle"},".lightning-record th":{"text-align":"right"},".lightning-record tbody > tr:nth-child(odd)":{"background-color":"#f3f3f3"}})},la=null,sa=18,yo=function(){var t,n;return la=t=Yr(new u(100,100)),n=t.context,n.font=Fo.axisLabelFont,sa=n.measureText("M").width},ca=!1,bo=function(){return ca?void 0:(_o(),yo(),ca=!0)},Eo=function(){var t,n;return n=1<=arguments.length?da.call(arguments,0):[],(t=io(n,I,Z))?(bo(),function(e){return ia(t,_.without(n,t),e)}):function(){var t;return t=1<=arguments.length?da.call(arguments,0):[],Eo.apply(null,n.concat(t))}},Eo.VERSION="999.999.999",Eo.from=Lo,Eo.value=Cu,Eo.domain=jo,Eo.range=lu,Eo.position=cu,Eo.fillColor=Bo,Eo.fillOpacity=Vo,Eo.strokeColor=bu,Eo.strokeOpacity=yu,Eo.size=mu,Eo.width=qu,Eo.height=$o,Eo.lineWidth=tu,Eo.shape=vu,Eo.tooltip=xu,Eo.factor=Ro,Eo.stack=wu,Eo.groupBy=Go,Eo.select=pu,Eo.where=Su,Eo.limit=Zo,Eo.having=Ho,Eo.eq=zo,Eo.ne=iu,Eo.lt=nu,Eo.gt=Uo,Eo.le=Ko,Eo.ge=Do,Eo.like=Qo,Eo.avg=Io,Eo.count=Po,Eo.max=eu,Eo.min=ru,Eo.sum=_u,Eo.parse=uu,Eo.point=su,Eo.rect=fu,Eo.path=au,Eo.schema=gu,Eo.table=ku,Eo.record=hu,Eo.remote=du,Eo.createFrame=Lr,Eo.createVector=ci,Eo.createList=Ur,Eo.createFactor=Rr,null!=("undefined"!=typeof module&&null!==module?module.exports:void 0)?module.exports=Eo:window.plot=Eo}).call(this);